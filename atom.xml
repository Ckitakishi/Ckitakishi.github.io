<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ckitakishi.playground</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ckitakishi.com/"/>
  <updated>2021-01-01T16:21:44.250Z</updated>
  <id>http://ckitakishi.com/</id>
  
  <author>
    <name>[object Object]</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2020 æœ€åä¸€å¤©æˆ‘åœ¨æƒ³ä»€ä¹ˆ</title>
    <link href="http://ckitakishi.com/2021/01/01/2020-%E6%9C%80%E5%90%8E%E4%B8%80%E5%A4%A9%E6%88%91%E5%9C%A8%E6%83%B3%E4%BB%80%E4%B9%88/"/>
    <id>http://ckitakishi.com/2021/01/01/2020-æœ€åä¸€å¤©æˆ‘åœ¨æƒ³ä»€ä¹ˆ/</id>
    <published>2021-01-01T12:43:22.000Z</published>
    <updated>2021-01-01T16:21:44.250Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p> 2020.12.31 / æ™´</p></blockquote><h3 id="2020"><a href="#2020" class="headerlink" title="2020"></a>2020</h3><p>æ¯•ä¸šåçš„å‡ å¹´é—´ï¼Œå¤§å¤šæ•°çš„å¹´æœ«å¹´å§‹éƒ½åœ¨è·¯ä¸Šæˆ–è€…å³å°†å¯ç¨‹ï¼Œ15 çš„æ¹˜å—ï¼Œ17 çš„åŒ—æµ·é“ï¼Œ18 çš„å·æ¸ï¼Œ19 çš„åŒ—é™†â€¦åœ¨ä¸€ä¸ªä¸ªæ™®é€šçš„æ—¥å­é‡Œå†™ä¸‹çè´µçš„è®°å¿†ï¼Œè®©å®ƒä»¬æœ‰äº†ç‰¹åˆ«çš„æ„ä¹‰ã€‚ä¸‹åˆèµ°åœ¨è¡—ä¸Šï¼Œæ—¥è½å°†è¿‘ï¼Œèµ¶ç´§éšæ‰‹æ‹äº†ä¸€å¼ ç…§ç‰‡æ¥è®°å½• 2020 æœ€åçš„å¤•æ—¥ï¼Œä¸€ç¬é—´æœ‰äº›ææƒšï¼Œä¸ç¡®å®šæ˜å¹´çš„æ­¤åˆ»æˆ‘æ˜¯å¦è¿˜ä¼šè®°å¾—è¿™ä¸€å¤©ã€‚</p><p>å…³äº 2020ï¼Œå¤§å¤šæ•°äººçš„ç”Ÿæ´»æˆ–å¤šæˆ–å°‘éƒ½å—åˆ°äº†ä¸€äº›è´Ÿé¢å½±å“ï¼ŒçŒœæƒ³å¾ˆå¤šäººéƒ½åœ¨å¿ƒä¸­é»˜é»˜æƒ³è¿‡ï¼Œâ€œå¦‚æœæ²¡æœ‰ç–«æƒ…â€¦â€ï¼Œâ€œç–«æƒ…è¿‡åâ€¦â€ã€‚æˆ‘äº¦æ˜¯å¦‚æ­¤ï¼Œä¸€æ–¹é¢è¿™å‡ å¹´å¤šäº†ä¸€äº›çƒ¦æ¼å’Œå¿§è™‘ï¼Œå†åŠ ä¹‹é•¿æœŸåœ¨å®¶çš„å‹æŠ‘ï¼Œæœ‰å‡ ä¸ªæœˆçœŸçš„ä¸å¤ªå¿«ä¹ï¼Œåˆ‡èº«é¢†ä¼šäº†çœ‹ä¼¼æ™®é€šçš„æ—¥å­å…¶å®éš¾èƒ½å¯è´µè¿™ä¸ªé“ç†ã€‚å¥½åœ¨å¹¶ä¸ä¼šå±ˆæœäºç”Ÿæ´»å¸¦æ¥çš„è‹¦ç—›ï¼Œè€Œä¸”å¾ˆå¤šäº‹éƒ½ç¿»ç¯‡äº†ï¼Œåˆå¼€å§‹å¯¹æ–°çš„ä¸€å¹´æœ‰äº†æœŸå¾…ï¼ˆç¬‘</p><p>ä¸è¿‡å¹¶éä¸€åˆ‡éƒ½é‚£ä¹ˆç³Ÿç³•ï¼Œ2020 ä¹Ÿæœ‰å‡ ä»¶å€¼å¾—æµ“å¢¨é‡å½©è®°ä¸‹ä¸€ç¬”çš„äº‹æƒ…ï¼š</p><ul><li>æ˜¥èŠ‚å›äº†è¶Ÿå®¶ï¼Œå› ä¸ºç–«æƒ…å“ªä¹Ÿæ²¡å»ï¼Œå¦¥å¦¥çš„åœ¨å®¶é™ªäº†å®¶äººä¸¤æ˜ŸæœŸï¼Œæ­¤åˆ»æƒ³æ¥ç”šæ˜¯éš¾å¾—ã€‚</li><li>å¨è‰ºæœ‰äº†è¿›æ­¥ï¼Œå°¤å…¶æ˜¯æ™´åŒå­¦ï¼Œå¦‚ä»ŠåšæŸå‡ å“ä¸­åæ–™ç†çš„æ°´å¹³å¯ä»¥è¯´æ˜¯æƒŠä¸ºå¤©äººã€‚</li><li>åœ¨é€‚åº”äº†æ–°çš„ç”Ÿæ´»/å·¥ä½œèŠ‚å¥ä¹‹åï¼ŒWFH çš„ä½“éªŒå˜å¾—è¶³å¤Ÿä»¤äººæ„‰æ‚¦ï¼Œå†åŠ ä¸Šå…äºé€šå‹¤ï¼Œæœ‰äº†æ›´å¤šæ‚ é—²ï¼ˆåšé¥­ï¼Œæ´—ç¢—ï¼‰çš„æ—¶é—´ã€‚</li><li>å‘Šåˆ«èˆ’é€‚åœˆï¼Œ10 æœˆç¦»å¼€äº†å¥‹æ–—ä¸¤å¹´çš„å›¢é˜Ÿï¼Œå¤šäºé‡åˆ°äº†ä¸€ç¾¤å¾ˆæ£’çš„åŒäº‹ï¼Œè¿‡å»ä¸¤å¹´ç«Ÿç„¶çœŸçš„è§‰å¾—å·¥ä½œå¼€å¿ƒã€‚åœ¨æ–°çš„å›¢é˜Ÿå¾—åˆ°äº†æ›´å¥½çš„ WLBï¼Œä¸‹ä¸€ä¸ªé˜¶æ®µå¸Œæœ›è‡ªå·±èƒ½æ›´æœ‰å‹‡æ°”ä¸€äº›ã€‚</li><li>èµ¶åœ¨ä¸œäº¬ç–«æƒ…çˆ†å‘å‰è·Ÿæˆ–è®¸å¤šå¹´éƒ½ä¸å†è§å¾—åˆ°çš„æœ‹å‹å»äº†ä¸€è¶Ÿè½»äº•æ³½ï¼Œæ‰“äº†é›ªä»—ï¼Œåƒå­©ç«¥æ—¶æœŸä¸€æ ·å¼€å¿ƒï¼ˆå°½ç®¡å­©ç«¥æ—¶æœŸè§è¿‡çš„é›ªä¸€åªæ‰‹éƒ½æ•°å¾—è¿‡æ¥ï¼‰ã€‚</li><li>å­¦äº†å‡ ä¸ªæœˆéŸ©è¯­ï¼Œå£è¯­ç¨ç¨è®°ä½äº†ä¸€äº›ï¼Œå´å†™ä¸å‡ºå‡ ä¸ªå¯¹çš„å•è¯ï¼Œæˆ‘å¯èƒ½æ˜¯ä¸ªæ–‡ç›²äº†ï¼Œæœ‰æ„§äºä¸€ç›´è·Ÿæˆ‘è¯´ Good Job çš„è€å¸ˆã€‚</li><li>åŠ¨æ£®ç§°å¾—ä¸Š 2020 å¯¹æˆ‘å½±å“æœ€å¤§çš„æ¸¸æˆï¼Œå’Œæœ‹å‹ä»¬åœ¨æ— æ•°ä¸ªä¸çœ çš„å¤œæ™šä¸€èµ·é’“é±¼ç æ ‘ï¼Œè¿˜æœ‰å°åŠ¨ç‰©ä»¬çš„é™ªä¼´ï¼Œåœ¨å‡ºä¸äº†é—¨çš„æ—¥å­é‡Œæ„Ÿå—è¿™ç§ç”±è™šæ‹Ÿå‘çœŸå®è½¬æ¢çš„æ¸©æš–ã€‚</li></ul><h3 id="2021"><a href="#2021" class="headerlink" title="2021"></a>2021</h3><p>å‰ä¸¤å¤©çœ‹åˆ°ä¸€ä¸ªè±†ç“£è¯é¢˜ï¼šä½ æœ€å¹³é™æ”¾æ¾çš„æ—¶åˆ»ã€‚æˆ‘æƒ³è¿™ä¸€åˆ»å¤§æ¦‚å°±æ˜¯å§ï¼Œå¯ä»¥å¹³é™ä¸”å¦ç™½çš„æ€è€ƒè‡ªå·±å¯¹æœªæ¥çš„æœŸè®¸ï¼Œç®€è¨€ä¹‹ï¼š</p><ul><li>ä¿æŒå¥åº·è‰¯å¥½çš„å¿ƒæƒ…ï¼Œæ—©ç¡</li><li>å¤šè·Ÿäº²å‹è”ç»œï¼Œå¤šäº¤æœ‹å‹</li><li>æŠ•å…¥æ—¶é—´åšä¸ªäººäº§å“</li><li>æŠ•èµ„æœªæ¥ï¼Œä¿æŒå­¦ä¹  </li><li>ç‚¹äº®æ–°æŠ€èƒ½æ ‘ï¼ˆä¸ŠåŠå¹´å°±æ˜¯éŸ©è¯­äº†å§ï¼‰</li><li>æ€è€ƒä¹‹ä½™ï¼Œè¡¨è¾¾å’Œè®°å½•è‡ªå·±çš„æƒ³æ³•</li><li>æ¢é©¾ç…§</li><li>ä¿æŒå¯¹èµ°è¡—ä¸²å··ï¼Œæ‘„å½±ï¼Œæ–™ç†çš„çƒ­æƒ…</li></ul><p>å®³æ€•ç€å†™å¤ªå¤šå®ç°ä¸äº†æ˜å¹´è‡ªå·±çœ‹ç€å°´å°¬ï¼Œå´è¿˜æ˜¯å†™äº†é‚£ä¹ˆå¤šğŸ˜‚</p><p>Anywayï¼Œå¸Œæœ›æ¯ä¸ªäººéƒ½èƒ½æœ‰å¾—å¿æ‰€æ„¿çš„ä¸€å¹´ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt; 2020.12.31 / æ™´&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;2020&quot;&gt;&lt;a href=&quot;#2020&quot; class=&quot;headerlink&quot; title=&quot;2020&quot;&gt;&lt;/a&gt;2020&lt;/h3&gt;&lt;p&gt;æ¯•ä¸šåçš„å‡ å¹´é—´ï¼Œå¤§å¤šæ•°çš„
      
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="éšç¬”" scheme="http://ckitakishi.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨ NSAttributedString - Part.2</title>
    <link href="http://ckitakishi.com/2020/06/27/%E5%AE%89%E5%85%A8%E4%B8%94%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8-NSAttributedString-Part-2/"/>
    <id>http://ckitakishi.com/2020/06/27/å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨-NSAttributedString-Part-2/</id>
    <published>2020-06-27T13:59:04.000Z</published>
    <updated>2020-06-27T16:17:50.379Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•å®‰å…¨ä¸”ä¼˜é›…åœ°å®šä¹‰ä¸€ä¸ªå±æ€§å­—ç¬¦ä¸²ã€‚ä¸è¿‡åœ¨å®é™…çš„è¿ç”¨åœºæ™¯ä¸­ï¼Œæƒ…å†µå¾€å¾€ä¼šæ›´å¤æ‚ä¸€äº›ã€‚</p><p>ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”±å¾ˆå¤šå±æ€§ä¸åŒçš„éƒ¨åˆ†æ„æˆçš„å®Œæ•´å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯æƒ³è¦å®ç°å›¾æ–‡æ··æ’ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä¸å¯é¿å…çš„éœ€è¦å°†æ‰€æœ‰éƒ¨åˆ†ç»„è£…åœ¨ä¸€èµ·ï¼Œæœ€åŸºç¡€çš„æ–¹æ³•æ˜¯åˆ›å»º <code>NSMutableAttributedString</code> ï¼Œç„¶åé€šè¿‡ <code>append(_:)</code> æ–¹æ³•æ¥å®Œæˆå­—ç¬¦ä¸²çš„æ„å»ºã€‚ç®€å•æ˜“æ‡‚æ˜¯å®ƒçš„æœ‰ç‚¹ï¼Œç„¶è€Œä¸çŸ¥ä¸è§‰ä¸­å¯èƒ½å°±ä¼šå†™å‡ºç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mutableAttributedString = <span class="type">NSMutableAttributedString</span>(attributedString: str1)</span><br><span class="line">mutableAttributedString.append(str2)</span><br><span class="line">mutableAttributedString.append(str3)</span><br><span class="line">mutableAttributedString.append(str4)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å¤šå°‘æœ‰ä¸€äº›ç¹é‡æ„Ÿï¼Œä¹Ÿä¸å¤Ÿç›´è§‚ï¼Œæœ‰å¾ˆå¤§çš„ä¼˜åŒ–ä½™åœ°ã€‚æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œä¹Ÿè®¸ä¸€åƒä¸ªå¼€å‘è€…å°±æœ‰ä¸€åƒç§æ”¹å–„çš„æ€è·¯ï¼Œæ¥ä¸‹æ¥æƒ³è¦è®¨è®ºä¸¤ç§æ›´ä¼˜é›…çš„æ–¹æ¡ˆï¼Œåˆ†åˆ«å€ŸåŠ›äºæšä¸¾ (Enum) å’Œ å­—ç¬¦ä¸²æ’å€¼ (StringInterpolation)ã€‚</p><h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>å’Œå‰æ–‡ç±»ä¼¼ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å†æ¬¡å®šä¹‰ä¸€ä¸ªæšä¸¾æ¥ä¼˜åŒ–ä»£ç çš„å¯è¯»æ€§ã€‚æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œå®šä¹‰ä¸€äº›å¸¸ç”¨çš„ caseï¼Œåªå®šä¹‰å­—ç¬¦ä¸²å®åœ¨æ˜¯æœ‰ä¸€äº›å­¤ç‹¬ï¼Œæˆ‘ä»¬å¯ä»¥å†è¿½åŠ ä¸€ä¸ªç”¨äºæ’å›¾çš„ caseï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AttributedString</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> string(<span class="type">String</span>, [<span class="type">StringAttribute</span>]?)</span><br><span class="line">    <span class="keyword">case</span> image(<span class="type">UIImage</span>, offsetX: <span class="type">CGFloat</span> = <span class="number">0.0</span>, offsetY: <span class="type">CGFloat</span> = <span class="number">0.0</span>, scale: <span class="type">CGFloat</span> = <span class="number">1.0</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">assemble</span><span class="params">(<span class="number">_</span> attrStrings: [AttributedString])</span></span> -&gt; <span class="type">NSAttributedString</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> mutableAttributedString = <span class="type">NSMutableAttributedString</span>(string: <span class="string">""</span>)</span><br><span class="line">        attrStrings.forEach &#123; (attrString: <span class="type">AttributedString</span>) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">switch</span> attrString &#123;</span><br><span class="line">            <span class="keyword">case</span> .string(<span class="keyword">let</span> string, <span class="keyword">let</span> attributes):</span><br><span class="line">                mutableAttributedString.append(.<span class="keyword">init</span>(string: string, attributes: attributes?.attributesDictionary))</span><br><span class="line">            <span class="keyword">case</span> .image(<span class="keyword">let</span> image, <span class="keyword">let</span> offsetX, <span class="keyword">let</span> offsetY, <span class="keyword">let</span> scale):</span><br><span class="line">                mutableAttributedString.append(.<span class="keyword">init</span>(image: image, offsetX: offsetX, offsetY: offsetY, scale: scale))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mutableAttributedString</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSAttributedString</span> </span>&#123;</span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(image: <span class="type">UIImage</span>, offsetX: <span class="type">CGFloat</span>, offsetY: <span class="type">CGFloat</span>, scale: <span class="type">CGFloat</span> = <span class="number">1.0</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> attachment = <span class="type">NSTextAttachment</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> size: <span class="type">CGSize</span> = &#123;</span><br><span class="line">            <span class="keyword">guard</span> scale != <span class="number">1.0</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> image.size &#125;</span><br><span class="line">            <span class="keyword">return</span> image.size.applying(<span class="type">CGAffineTransform</span>(scaleX: scale, y: scale))</span><br><span class="line">        &#125;()</span><br><span class="line">        </span><br><span class="line">        attachment.bounds = .<span class="keyword">init</span>(origin: .<span class="keyword">init</span>(x: offsetX, y: offsetY), size: size)</span><br><span class="line">        attachment.image = image</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(attachment: attachment)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œå³ç®€å•æ˜äº†ï¼Œè¿˜å¯ä»¥é¿å…å¾ˆå¤šæ™¦æ¶©ä¸”é‡å¤çš„ä»£ç ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xxxxxx.attributedText = <span class="type">AttributedString</span>.assemble([</span><br><span class="line">    .image(<span class="type">UIImage</span>(named: <span class="string">"stop"</span>) ?? <span class="type">UIImage</span>(), offsetX: <span class="number">0.0</span>, offsetY: -<span class="number">8.0</span>, scale: <span class="number">0.5</span>),</span><br><span class="line">    .string(<span class="string">"è¸Ÿè¹°ä¸å¦‚"</span>, [ .foregroundColor(.gray) ]),</span><br><span class="line">    .string(<span class="string">"åœæ­¢æŠ±æ­‰"</span>, [ .foregroundColor(.orange) ])</span><br><span class="line">])</span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²æ’å€¼-StringInterpolation"><a href="#å­—ç¬¦ä¸²æ’å€¼-StringInterpolation" class="headerlink" title="å­—ç¬¦ä¸²æ’å€¼ (StringInterpolation)"></a>å­—ç¬¦ä¸²æ’å€¼ (StringInterpolation)</h2><p>ç›¸è¾ƒäºæšä¸¾ï¼Œå€ŸåŠ©å­—ç¬¦ä¸²æ’å€¼çš„æ–¹æ³•ä¸ä¼šé‚£ä¹ˆç›´è§‚ã€‚è¿™æ˜¯ä¸€ä¸ª Swift 5 çš„æ–°ç‰¹æ€§ï¼Œåˆè§ä¹‹æ—¶æˆ‘å…¶å®å¹¶æ²¡æœ‰å½»åº•æ„Ÿå—åˆ°å­—ç¬¦ä¸²æ’å€¼çš„å¼ºå¤§ï¼Œç§ä»¥ä¸ºåªæ˜¯èƒ½å¤Ÿå°†ä¸€äº›å­—ç¬¦ä¸²çš„å…±é€šå¤„ç†å†™çš„æ›´ä¼˜é›…ï¼Œå°½ç®¡è¿™ä¹Ÿè¶³ä»¥ä»¤äººæ¬£å–œã€‚ç›´åˆ°å¾ˆä¹…ä¹‹åè¯»äº† <a href="https://nshipster.com/expressiblebystringinterpolation/" target="_blank" rel="noopener">ExpressibleByStringInterpolation</a>ï¼Œæ‰çœŸæ˜¯ç†è§£äº†ä¸€äº›å­—ç¬¦ä¸²æ’å€¼ä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¾¿åˆ©ã€‚æ–‡ä¸­å…³äºå­—ç¬¦ä¸²æ’å€¼åˆçº§ä½¿ç”¨æ‰€ä¸¾çš„ä¾‹å­ååˆ†å·§å¦™ï¼Œå¾ˆä¼˜é›…çš„é¿å¼€äº† <code>DateFormatter</code> æ ¼å¼å®šä¹‰çš„å‘ã€‚ä½†å­—ç¬¦ä¸²æ’å€¼çš„èƒ½åŠ›æ›´å¤šä½“ç°åœ¨è‡ªå®šä¹‰å­—ç¬¦ä¸²æ’å€¼ç±»å‹ä¸­ã€‚</p><p>ç”±äºæˆ‘ä»¬æœŸå¾…çš„æ’å€¼ç±»å‹æ˜¯å±æ€§å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä»å®šä¹‰ç»“æ„ä½“å¼€å§‹ç€æ‰‹ï¼Œé¦–å…ˆä¸ºè¯¥ç»“æ„ä½“å®šä¹‰ä¸€ä¸ª <code>NSAttributedString</code> ç±»å‹çš„å±æ€§ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AttributedString</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> attributedString: <span class="type">NSAttributedString</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶éœ€è¦äº†è§£ä¸¤ä¸ªåè®®ï¼š<code>ExpressibleByStringLiteral</code> å’Œ <code>ExpressibleByStringInterpolation</code>ï¼Œåè€…ç»§æ‰¿äºå‰è€…ï¼ŒäºŒè€…åˆ†åˆ«æœ‰ä¸€ä¸ªå¿…é¡»å®ç°çš„åˆå§‹åŒ–æ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">AttributedString</span>: <span class="title">ExpressibleByStringLiteral</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(stringLiteral: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.attributedString = <span class="type">NSAttributedString</span>(string: stringLiteral)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ExpressibleByStringInterpolation inherits from ExpressibleByStringLiteral</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">AttributedString</span>: <span class="title">ExpressibleByStringInterpolation</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(stringInterpolation: <span class="type">StringInterpolation</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.attributedString = <span class="type">NSAttributedString</span>(attributedString: stringInterpolation.attributedString)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å­—é¢é‡éƒ¨åˆ†åªéœ€è¦åˆå§‹åŒ–æ–¹æ³•å³å¯ï¼Œæ’å€¼çš„æƒ…å†µä¸‹è‡ªç„¶ä¼šå¤æ‚ä¸€äº›ï¼Œä»åˆå§‹åŒ–æ–¹æ³•æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªå…³è”ç±»å‹å°±å¯ä»¥çœ‹å‡ºæ¥ã€‚<code>StringInterpolation</code> æ‰çœŸæ­£åœ¨è´Ÿè´£åœ¨å¤„ç†æ’å€¼ã€‚å®ƒçš„å·¥ä½œåŸç†æ˜¯å°†å„ä¸ªç»„æˆéƒ¨åˆ†é€šè¿‡ä¸€ç³»åˆ— append æ–¹æ³•ç»„è£…èµ·æ¥ï¼Œå†ä½œä¸ºå‚æ•°ä¼ ç»™ä¸Šé¢çš„åˆå§‹åŒ–æ–¹æ³• <code>init(stringInterpolation:)</code>ã€‚<code>appendLiteral(_:)</code> çš„èŒè´£æ˜¯å¤„ç†æ™®é€šçš„å­—ç¬¦ä¸²å­—é¢é‡ï¼Œåä¸º <code>appendInterpolation</code> çš„æ–¹æ³•ä»¬åˆ™æ˜¯æ‰¿æ‹…äº†å¤„ç†ç±»å‹äº”èŠ±å…«é—¨çš„æ’å€¼çš„ä»»åŠ¡ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå°±åˆ†åˆ«ä¸ºå­—ç¬¦ä¸²åŠå…¶å±æ€§ï¼Œå›¾ç‰‡å®šä¹‰äº†ä¸åŒçš„ <code>appendInterpolation</code> æ–¹æ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">AttributedString</span>: <span class="title">ExpressibleByStringInterpolation</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Custom String Interpolation Type</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">StringInterpolation</span>: <span class="title">StringInterpolationProtocol</span> </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> attributedString: <span class="type">NSMutableAttributedString</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">init</span>(literalCapacity: <span class="type">Int</span>, interpolationCount: <span class="type">Int</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>.attributedString = <span class="type">NSMutableAttributedString</span>()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">appendLiteral</span><span class="params">(<span class="number">_</span> literal: String)</span></span> &#123;</span><br><span class="line">            <span class="keyword">let</span> attrString = <span class="type">NSAttributedString</span>(string: literal)</span><br><span class="line">            <span class="keyword">self</span>.attributedString.append(attrString)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">appendInterpolation</span><span class="params">(<span class="number">_</span> string: String, stringAttributes: [StringAttribute])</span></span> &#123;</span><br><span class="line">            <span class="keyword">let</span> attrString = <span class="type">NSAttributedString</span>(string: string,</span><br><span class="line">                                                stringAttributes: stringAttributes)</span><br><span class="line">            <span class="keyword">self</span>.attributedString.append(attrString)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// for UIImage</span></span><br><span class="line">        <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">appendInterpolation</span><span class="params">(image: UIImage, offsetX: CGFloat, offsetY: CGFloat, scale: CGFloat = <span class="number">1.0</span>)</span></span> &#123;</span><br><span class="line">            <span class="keyword">let</span> attachment = <span class="type">NSTextAttachment</span>()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> size: <span class="type">CGSize</span> = &#123;</span><br><span class="line">                <span class="keyword">guard</span> scale != <span class="number">1.0</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> image.size &#125;</span><br><span class="line">                <span class="keyword">return</span> image.size.applying(<span class="type">CGAffineTransform</span>(scaleX: scale, y: scale))</span><br><span class="line">            &#125;()</span><br><span class="line">            </span><br><span class="line">            attachment.bounds = .<span class="keyword">init</span>(origin: .<span class="keyword">init</span>(x: offsetX, y: offsetY), size: size)</span><br><span class="line">            attachment.image = image</span><br><span class="line">        </span><br><span class="line">            <span class="keyword">self</span>.attributedString.append(<span class="type">NSAttributedString</span>(attachment: attachment))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äº <code>appendLiteral(_:)</code> æ–¹æ³•ï¼Œæœ‰ä¸€ç‚¹ä¸å¾—ä¸è¯´ï¼Œå¦‚æœæƒ³è¦åœ¨å…¶ä¸­åšé™¤äº† append ä¹‹å¤–çš„äº‹ï¼ŒåŠ¡å¿…è¦ä¸‡åˆ†å°å¿ƒï¼Œé™¤äº†æ˜¾ç„¶å¯è§çš„å­—é¢é‡ä¹‹å¤–ï¼Œç©ºæ ¼ï¼Œæ¢è¡Œï¼Œç”šè‡³æ˜¯å­—ç¬¦ä¸²å‰åçš„ä¸å¯è§éƒ¨åˆ†éƒ½ä¼šå—åˆ°å…¶å½±å“ã€‚</p><p>ä¸¥æ ¼æ„ä¹‰ä¸Šæˆ‘ä»¬å·²ç»å®Œæˆäº†ç”¨å­—ç¬¦ä¸²æ’å€¼çš„æ–¹æ³•æ¥ç»„è£…å±æ€§å­—ç¬¦ä¸²ï¼Œå®åœ¨æ˜¯æœ‰äº›ä»¤äººæ¿€åŠ¨ï¼ä¸å¦‚è¶çƒ­æ‰“é“ï¼Œé¡ºæ‰‹æ·»åŠ ä¸¤ä¸ªä¾¿åˆ©æ–¹æ³•ï¼Œä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿå†æå‡ä¸€ç‚¹ç‚¹çµæ´»åº¦ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AttributedString</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> attributedString: <span class="type">NSAttributedString</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(<span class="number">_</span> newStr: AttributedString)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> mutableAttributedString = <span class="type">NSMutableAttributedString</span>(attributedString: attributedString)</span><br><span class="line">        mutableAttributedString.append(newStr.attributedString)</span><br><span class="line">        <span class="keyword">self</span>.attributedString = mutableAttributedString</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(contentsOf newStrs: [AttributedString])</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> mutableAttributedString = <span class="type">NSMutableAttributedString</span>(attributedString: attributedString)</span><br><span class="line">        newStrs.forEach &#123; str <span class="keyword">in</span></span><br><span class="line">            mutableAttributedString.append(str.attributedString)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">self</span>.attributedString = mutableAttributedString</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œï¼Œç»„è£…å±æ€§å­—ç¬¦ä¸²çš„è¿‡ç¨‹å˜å¾—ä¼˜é›…ä¸”çµæ´»äº†ä¸€äº›ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> attrString1: <span class="type">AttributedString</span> = <span class="string">"""</span></span><br><span class="line"><span class="string">\("è¸Ÿè¹°ä¸å¦‚", stringAttributes: [ .foregroundColor(.systemGray), .font(.systemFont(ofSize: 14.0)) ])</span></span><br><span class="line"><span class="string">\("åœæ­¢æŠ±æ­‰", stringAttributes: [ .foregroundColor(.systemGray2), .font(.systemFont(ofSize: 14.0)) ])</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> attrString2: <span class="type">AttributedString</span> = <span class="string">"""</span></span><br><span class="line"><span class="string">\(image: UIImage(named: "stop") ?? UIImage(), offsetX: 0.0, offsetY: 0.0, scale: 0.5)</span></span><br><span class="line"><span class="string">\("å†è¿‡ç§‹å¤©", stringAttributes: [ .foregroundColor(.systemGray3), .font(.systemFont(ofSize: 14.0)) ])</span></span><br><span class="line"><span class="string">\("çƒ‚äº†èœ¿èœ’", stringAttributes: [ .foregroundColor(.systemGray4), .font(.systemFont(ofSize: 14.0)) ])</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">attrString1.append(attrString2)</span><br><span class="line"></span><br><span class="line">xxxxxlabel.attributedText = attrString1.attributedString</span><br></pre></td></tr></table></figure><h2 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h2><p>æˆ‘æƒ³å¾ˆå¤šäººå¯¹å±æ€§å­—ç¬¦ä¸²çš„æ„Ÿæƒ…åº”è¯¥æ˜¯çˆ±æ¨äº¤ç»‡çš„ï¼Œå¸Œæœ›è¿™ä¸¤ç¯‡æ–‡ç« èƒ½ä¸ºå®ƒæ‹‰å›å‡ å¼ çš„ç¥¨â€¦ğŸ˜‚</p><blockquote><p>Source Code:</p><p><a href="https://github.com/Ckitakishi/PlayWithAttributedString" target="_blank" rel="noopener">https://github.com/Ckitakishi/PlayWithAttributedString</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•å®‰å…¨ä¸”ä¼˜é›…åœ°å®šä¹‰ä¸€ä¸ªå±æ€§å­—ç¬¦ä¸²ã€‚ä¸è¿‡åœ¨å®é™…çš„è¿ç”¨åœºæ™¯ä¸­ï¼Œæƒ…å†µå¾€å¾€ä¼šæ›´å¤æ‚ä¸€äº›ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”±å¾ˆå¤šå±æ€§ä¸åŒçš„éƒ¨åˆ†æ„æˆçš„å®Œæ•´å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯æƒ³è¦å®ç°å›¾æ–‡æ··æ’ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä¸å¯é¿å…çš„éœ€è¦å°†æ‰€æœ‰éƒ¨åˆ†ç»„è£…åœ¨ä¸€èµ·ï¼Œæœ€åŸºç¡€çš„æ–¹æ³•æ˜¯åˆ›å»º &lt;co
      
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://ckitakishi.com/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨ NSAttributedString - Part.1</title>
    <link href="http://ckitakishi.com/2020/06/06/%E5%AE%89%E5%85%A8%E4%B8%94%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8-NSAttributedString-Part-1/"/>
    <id>http://ckitakishi.com/2020/06/06/å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨-NSAttributedString-Part-1/</id>
    <published>2020-06-06T05:28:59.000Z</published>
    <updated>2020-06-27T16:18:58.474Z</updated>
    
    <content type="html"><![CDATA[<p>Swift æ‹¥æœ‰å¯é€‰ç±»å‹ä¸”ç±»å‹å®‰å…¨ï¼Œè¿™äº›ç‰¹æ€§å¸®åŠ©å¼€å‘è€…é¿å…äº†å¾ˆå¤šéº»çƒ¦é—®é¢˜ã€‚</p><p>ç„¶è€Œå½“æ¶‰åŠåˆ°å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¿˜æ˜¯æˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›ç‘•ç–µã€‚ä¾‹å¦‚å¼•ç”¨èµ„æºæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡å­—ç­‰ï¼Œä¸€æ—¦æ‹¼å†™é”™è¯¯ï¼Œæ˜¯æ²¡æœ‰åŠæ³•åœ¨ç¼–è¯‘ä¹‹å‰çŸ¥é“çš„ï¼Œåˆæˆ–è€…æ˜¯ç»§ç»­åœ¨ä»£ç ä¸­å¼•ç”¨å·²ç»è¢«åˆ é™¤çš„èµ„æºï¼Œä¹Ÿä¸å®¹æ˜“è¢«å¯Ÿè§‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€äº›çŸ¥åçš„åº“åº”è¿è€Œç”Ÿï¼Œåƒæ˜¯ <a href="https://github.com/mac-cain13/R.swift" target="_blank" rel="noopener">R.swift</a>, <a href="https://github.com/SwiftGen/SwiftGen" target="_blank" rel="noopener">SwiftGen</a> ä¹‹ç±»ã€‚è§£å†³æ–¹æ¡ˆçš„å…¶ä¸­ä¸€ä¸ªæ ¸å¿ƒæ˜¯ä½¿å¾—èµ„æºå¼•ç”¨è¿™ä¸ªè¿‡ç¨‹å˜å¾—ç±»å‹å®‰å…¨ï¼Œä»¥æ­¤æ¥å…‹æœæ½œåœ¨çš„ä¸æ˜äº†æ€§ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// normal</span></span><br><span class="line"><span class="keyword">let</span> icon = <span class="type">UIImage</span>(named: <span class="string">"settings-icon"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// R.swift</span></span><br><span class="line"><span class="keyword">let</span> icon = <span class="type">R</span>.image.settingsIcon()</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™æ¬¡æƒ³è®¨è®ºçš„å¹¶ä¸æ˜¯ä¸Šè¿°é—®é¢˜ï¼Œè€Œæ˜¯åœ¨ <code>NSAttributedString</code> çš„è¿ç”¨ä¸­åŒæ ·å­˜åœ¨ç€çš„æ½œåœ¨ä¸å®‰å…¨å› ç´ ã€‚ä»æˆ‘çš„æ—¥å¸¸ä½“éªŒæ¥è¯´ï¼Œ<code>NSAttributedString</code> åœ¨æ— æ•°æƒ…å¢ƒä¹‹ä¸‹éƒ½ä¼šè¢«æˆ‘ä»¬æƒ³èµ·ï¼Œæ— è®ºæ˜¯å¯Œæ–‡æœ¬æ”¯æŒè¿˜æ˜¯å›¾æ–‡æ··æ’ï¼Œåˆæˆ–è€…æ˜¯æƒ³å®ç°ä¸€ä¸ª markdown ç»„ä»¶ç­‰ç­‰ã€‚</p><p>è™½ç„¶æˆ‘è®¤ä¸ºä» Objective-C åˆ° Swiftï¼Œåœ¨å®‰å…¨é—®é¢˜ä¸Šå·²ç»æ˜¯è¿ˆè¿›äº†ä¸€å¤§æ­¥ã€‚ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼Œä»¥å¾€å†™ Objective-C çš„æ—¶å€™ï¼Œä¼šæ³¨æ„é¿å…ä¸€ä¸ªé¢„æœŸå¤–çš„ <code>nil</code> è¢«ä½œä¸º <code>str</code> å‚æ•°ä¼ å…¥ï¼Œè€Œå¼•èµ·ä¸å¿…è¦çš„å´©æºƒã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">instancetype</span>)initWithString:(<span class="built_in">NSString</span> *)str</span><br></pre></td></tr></table></figure><p>å¯¹äº Swift è€Œè¨€ï¼Œäº‹æƒ…ä¼šå˜å¾—ç®€å•å¾ˆå¤šï¼Œå¯é€‰å€¼çš„å£°æ˜è®©æˆ‘ä»¬æ›´å®¹æ˜“åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">init</span>(string str: <span class="type">String</span>)</span><br></pre></td></tr></table></figure><p>å³ä¾¿å¦‚æ­¤ï¼Œå…³äºæ½œåœ¨çš„ä¸å®‰å…¨å› ç´ ä¾ç„¶æœ‰å¾ˆå¤šè¯å¯ä»¥è¯´ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªæå…¶ç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> paragraphStyle = <span class="type">NSMutableParagraphStyle</span>()</span><br><span class="line">paragraphStyle.lineSpacing = <span class="number">1.0</span></span><br><span class="line">paragraphStyle.lineBreakMode = .byTruncatingTail</span><br><span class="line">paragraphStyle.alignment = .center</span><br><span class="line"></span><br><span class="line">xxxxxx.attributedText = <span class="type">NSAttributedString</span>(</span><br><span class="line">    string: <span class="string">"å®è¨€æ˜¥å¤© ç ´ç¢ç§‹åƒ"</span>,</span><br><span class="line">    attributes: [</span><br><span class="line">        .font: <span class="type">UIFont</span>.systemFont(ofSize: <span class="number">12.0</span>, weight: .regular),</span><br><span class="line">        .foregroundColor: <span class="type">UIColor</span>.gray,</span><br><span class="line">        .paragraphStyle: paragraphStyle</span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>çœ‹å®Œè¿™æ®µä»£ç ï¼Œå¿ƒä¸­åº”è¯¥ä¼šå¾ˆå®¹æ˜“æµ®ç°å‡ ä¸ªç›´å‡»çµé­‚çš„é—®é¢˜ï¼š</p><ol><li>ä¸ºä»€ä¹ˆä¸º <code>foregroundColor</code> è®¾ç½®å€¼çš„æ—¶å€™ä¸èƒ½å¤Ÿçœç•¥ <code>UIColor</code>ï¼Ÿ</li><li>å¦‚æœä¼ å…¥çš„ä¸æ˜¯ <code>UIColor</code> ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å—ï¼Ÿ</li><li><code>paragraphStyle</code> çš„åˆå§‹åŒ–å’Œèµ‹å€¼æ˜¯ä¸æ˜¯å¯ä»¥å†™çš„æ›´ <code>swifty</code>ï¼Ÿ</li></ol><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•ï¼Œçœ‹å€¼ç±»å‹å„å¼å„æ ·äº”èŠ±å…«é—¨å°±ä¼šçŸ¥é“è¿™å¤§æ¦‚æ˜¯ <code>Any</code>ï¼Œå¦‚æœå°† <code>attributes</code> çš„åˆå§‹åŒ–åˆ†ç¦»å‡ºæ¥ï¼Œè¿™ä¸ªåŸå› ä¼šæ›´åŠ ä¸€ç›®äº†ç„¶ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>: <span class="type">Any</span>] = [</span><br><span class="line">    .font: <span class="type">UIFont</span>.systemFont(ofSize: <span class="number">12.0</span>, weight: .regular),</span><br><span class="line">    .foregroundColor: <span class="type">UIColor</span>.gray,</span><br><span class="line">    .paragraphStyle: paragraphStyle</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒä¸ªé—®é¢˜å®Œå…¨æ˜¯ç¬¬ä¸€é—®çš„å‰¯ä½œç”¨ã€‚å¯¹äºä¼šä¸ä¼šå‘ç”Ÿä»€ä¹ˆäº‹ï¼Œç­”æ¡ˆæ˜¯ä¼šã€‚æ›¾ç»ä¸€æ—¶å¤±ç¥ï¼Œä¸º <code>paragraphStyle</code> ä¼ å…¥äº†ä¸€ä¸ª <code>CGColor</code> çš„å€¼ï¼Œæœ€å¯æ€•çš„åœ¨äºä¸­æ–‡å’Œæ—¥è¯­éƒ½å¯ä»¥é¡ºåˆ©å‘ˆç°å‡ºæ‰€æœŸå¾…çš„é¢œè‰²ï¼Œä½†åˆ‡æ¢æˆè‹±è¯­ååº”ç”¨ç›´æ¥å°±å´©æºƒäº†ã€‚è‹¥é­é‡è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³ä¸ºäº†æ¢å¯»åŸå› ä¹Ÿè¿˜æ˜¯éœ€è¦èŠ±ä¸€ç‚¹ç‚¹æ—¶é—´çš„ã€‚</p><p>ä¸ºäº†æ¶ˆè§£è¿™ä¸å®‰å…¨æ„Ÿï¼Œä¼°è®¡å¤§å®¶éƒ½ä¼šæƒ³è¦åšç‚¹ä»€ä¹ˆã€‚è¦ä¹ˆæ˜¯ä¸º <code>attributes</code> å†™ä¸€æ®µç±»å‹æ£€æŸ¥çš„ä»£ç é€šè¿‡è¾“å‡º log æ¥é¿å…æ„å¤–ï¼Œæˆ–è€…æ˜¯å°è£… <code>NSAttributedString</code> ä»¥å®ç°ç±»å‹å®‰å…¨ã€‚æ–¹æ¡ˆä¸€ç•¥æ˜¾å•è–„ï¼Œä½†ä¸Šè¿°æœ€è‡´å‘½çš„é—®é¢˜äºŒæ˜¯å¯ä»¥è¢«åœ†æ»¡è§£å†³çš„ï¼Œå”¯ä¸€çš„ç¼ºæ†¾æ˜¯åœ¨ç¼–è¯‘åæ‰èƒ½çŸ¥é“ç»“æœã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œä¸å¦‚å°±æ¥å®ç°æ–¹æ¡ˆäºŒã€‚</p><p>æ¯”è¾ƒç›´æ¥çš„æƒ³æ³•åº”è¯¥æ˜¯é¿å… <code>Any</code> çš„å­˜åœ¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸å¦¨ç´¢æ€§æŠ›å¼ƒå­—å…¸ï¼Œä½¿å„ä¸ªå±æ€§æˆä¸ºä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­˜åœ¨ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºä¸€äº›å‡½æ•°ç„¶åé“¾å¼è°ƒç”¨ï¼Œä½†æ›´å®¹æ˜“æµ®ç°åœ¨è„‘æµ·ä¸­çš„åº”è¯¥æ˜¯ç”¨æšä¸¾å»åšè¿™ä»¶äº‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">StringAttribute</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> font(<span class="type">UIFont</span>)</span><br><span class="line">    <span class="keyword">case</span> foregroundColor(<span class="type">UIColor</span>)</span><br><span class="line">    <span class="keyword">case</span> underlineColor(<span class="type">UIColor?</span>) <span class="comment">// The default value is nil</span></span><br><span class="line">    <span class="keyword">case</span> kern(<span class="type">CGFloat</span>)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å®šä¹‰äº†ä¸Šè¿°æšä¸¾ä¹‹åï¼ŒåŸºæœ¬ä¸Šç±»å‹ä¸å®‰å…¨çš„é—®é¢˜å°±å¾—åˆ°äº†è§£å†³ã€‚ä¸è¿‡ä½œä¸ºæ¢å–ç±»å‹å®‰å…¨çš„ä»£ä»·ï¼Œéœ€è¦å¤šä¸€é“å·¥åºæŠŠ <code>StringAttribute</code> è½¬å› <code>[NSAttributedString.Key: Any]</code>ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">NSAttributedString</span> </span>&#123;</span><br><span class="line">    <span class="keyword">convenience</span> <span class="keyword">init</span>(string str: <span class="type">String</span>, stringAttributes attrs: [<span class="type">StringAttribute</span>]) &#123;</span><br><span class="line">        <span class="keyword">self</span>.<span class="keyword">init</span>(string: str, attributes: attrs.attributesDictionary)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">StringAttribute</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> font(<span class="type">UIFont</span>)</span><br><span class="line">    <span class="keyword">case</span> foregroundColor(<span class="type">UIColor</span>)</span><br><span class="line">    <span class="keyword">case</span> underlineColor(<span class="type">UIColor?</span>) <span class="comment">// The default value is nil</span></span><br><span class="line">    <span class="keyword">case</span> kern(<span class="type">CGFloat</span>)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> keyAndValue: (<span class="type">NSAttributedString</span>.<span class="type">Key</span>, <span class="type">Any?</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .font(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> (.font, value)</span><br><span class="line">        <span class="keyword">case</span> .foregroundColor(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> (.foregroundColor, value)</span><br><span class="line">        <span class="keyword">case</span> .underlineColor(<span class="keyword">let</span> optionalValue):</span><br><span class="line">            <span class="keyword">return</span> (.underlineColor, optionalValue)</span><br><span class="line">        <span class="keyword">case</span> .kern(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> (.kern, value <span class="keyword">as</span> <span class="type">NSNumber</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Array</span> <span class="title">where</span> <span class="title">Element</span> == <span class="title">StringAttribute</span> </span>&#123;</span><br><span class="line">    <span class="comment">// StringAttribute =&gt; [NSAttributedString.Key: Any]</span></span><br><span class="line">    <span class="keyword">var</span> attributesDictionary: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>: <span class="type">Any</span>] &#123;</span><br><span class="line">        <span class="keyword">var</span> attributesDict: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>: <span class="type">Any</span>] = [:]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.forEach &#123; attribute <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> (key, value) = attribute.keyAndValue</span><br><span class="line">            attributesDict[key] = value</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> attributesDict</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œå°±å¤§åŠŸå‘Šæˆäº†ï¼æˆ‘ä»¬å¯ä»¥å°è¯•æŠŠä¸Šé¢çš„ä»£ç æ”¹å†™ä¸€ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> attributes: [<span class="type">StringAttribute</span>] = [</span><br><span class="line">    .font(.systemFont(ofSize: <span class="number">12.0</span>, weight: .regular)),</span><br><span class="line">    .foregroundColor(.gray),</span><br><span class="line">    .paragraphStyle(paragraphStyle)</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¦‚æœå®Œæ•´å®ç°äº† <code>StringAttribute</code> çš„è¯ï¼Œä¸€å®šä¼šç•™æ„åˆ° <code>NSAttributedString</code> ä¸­æœ‰ä¸€ä¸ªç›¸å¯¹ç‰¹æ®Šçš„å±æ€§ï¼š<code>.paragraphStyle</code>ã€‚ä½¿ç”¨å®ƒä¹‹å‰éœ€è¦å…ˆå®Œæˆä¸€ç³»åˆ—çš„åˆå§‹åŒ–èµ‹å€¼ï¼Œæ­£æ˜¯ä¸Šé¢ä»£ç å—ä¸­å‡ºç°çš„ <code>paragraphStyle</code>ã€‚ä½œä¸ºä¸€ä¸ªä»£ç é£æ ¼ä¼˜åŒ–çš„å¯é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ç”¨ä¸ <code>StringAttribute</code> ç›¸ä¼¼çš„æ‰‹æ®µæ¥å°è£… <code>NSMutableParagraphStyle</code>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ParagraphAttribute</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> alignment(<span class="type">NSTextAlignment</span>)</span><br><span class="line">    <span class="keyword">case</span> lineSpacing(<span class="type">CGFloat</span>)</span><br><span class="line">    <span class="keyword">case</span> lineBreakMode(<span class="type">NSLineBreakMode</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">StringAttribute</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> paragraphStyle([<span class="type">ParagraphAttribute</span>])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> keyAndValue: (<span class="type">NSAttributedString</span>.<span class="type">Key</span>, <span class="type">Any?</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">        <span class="keyword">case</span> .paragraphStyle(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> (.paragraphStyle, <span class="keyword">self</span>.configureParagraphStyle(value))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// [ParagraphAttribute] =&gt; NSMutableParagraphStyle</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">configureParagraphStyle</span><span class="params">(<span class="number">_</span> attributes: [ParagraphAttribute])</span></span> -&gt; <span class="type">NSMutableParagraphStyle</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> paragraphStyle = <span class="type">NSMutableParagraphStyle</span>()</span><br><span class="line"></span><br><span class="line">        attributes.forEach &#123;</span><br><span class="line">            <span class="keyword">switch</span> $<span class="number">0</span> &#123;</span><br><span class="line">            <span class="keyword">case</span> .alignment(<span class="keyword">let</span> value):</span><br><span class="line">                paragraphStyle.alignment = value</span><br><span class="line">            <span class="keyword">case</span> .lineSpacing(<span class="keyword">let</span> value):</span><br><span class="line">                paragraphStyle.lineSpacing = value</span><br><span class="line">            <span class="keyword">case</span> .lineBreakMode(<span class="keyword">let</span> value):</span><br><span class="line">                paragraphStyle.lineBreakMode = value</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> paragraphStyle</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>äºæ˜¯ï¼Œæœ€åˆçš„ä»£ç å°±å¯ä»¥ç”¨ä¸€ç§æ›´ <code>Swifty</code> çš„æ–¹å¼æ¥é‡å†™äº†ã€‚<br>ä»£ç é£æ ¼å„æœ‰æ‰€çˆ±ï¼Œå°±æˆ‘ä¸ªäººæ¥è¯´ï¼Œå®‰å…¨ä¸ä¼˜é›…çš„ä»£ç ç€å®ä»¤äººæ„ŸåŠ¨ï¼šP</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">xxxxxx.attributedText = <span class="type">NSAttributedString</span>(</span><br><span class="line">    string: <span class="string">"å®è¨€æ˜¥å¤© ç ´ç¢ç§‹åƒ"</span>,</span><br><span class="line">    stringAttributes: [</span><br><span class="line">        .font(.systemFont(ofSize: <span class="number">12.0</span>, weight: .regular)),</span><br><span class="line">        .foregroundColor(.gray),</span><br><span class="line">      .paragraphStyle([</span><br><span class="line">          .lineSpacing(<span class="number">1.0</span>),</span><br><span class="line">          .lineBreakMode(.byTruncatingTail),</span><br><span class="line">          .alignment(.center)</span><br><span class="line">      ])</span><br><span class="line"></span><br><span class="line">])</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰äº†ä¸€ä¸ªç±»å‹å®‰å…¨çš„ <code>NSAttributedString</code> åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸è¿‡æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œä¼´éšç€ <code>SwiftUI</code> çš„è¯ç”Ÿï¼ŒSwift 5.1 ä¸­æ–°å¢åŠ äº† <code>Function Builder</code>ï¼Œç”¨å®ƒæ¥è¾¾æˆæˆ‘ä»¬æœ€åˆçš„ç›®æ ‡ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½æ–¹æ³•ã€‚è¯»ä¸€è¯»è¿™ç¯‡ <a href="https://medium.com/@carson.katri/create-your-first-function-builder-in-5-minutes-b4a717390671" target="_blank" rel="noopener">Create Your First Function Builder in 10 Minutes</a> åº”è¯¥ä¼šæœ‰ä¸å°‘å¯å‘ã€‚</p><h2 id="TBC"><a href="#TBC" class="headerlink" title="TBC"></a>TBC</h2><p>(ä¸‹ä¸€ç¯‡è®¡åˆ’è®²ä¸€è®²åœ¨å…¶å®ƒä¸€äº›åœºæ™¯ä¸­ï¼Œå¦‚ä½•æ›´ä¼˜é›…åœ°ä½¿ç”¨ <code>NSAttributedString</code>)</p><blockquote><p>Source Code:</p><p><a href="https://github.com/Ckitakishi/PlayWithAttributedString" target="_blank" rel="noopener">https://github.com/Ckitakishi/PlayWithAttributedString</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Swift æ‹¥æœ‰å¯é€‰ç±»å‹ä¸”ç±»å‹å®‰å…¨ï¼Œè¿™äº›ç‰¹æ€§å¸®åŠ©å¼€å‘è€…é¿å…äº†å¾ˆå¤šéº»çƒ¦é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œå½“æ¶‰åŠåˆ°å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¿˜æ˜¯æˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›ç‘•ç–µã€‚ä¾‹å¦‚å¼•ç”¨èµ„æºæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡å­—ç­‰ï¼Œä¸€æ—¦æ‹¼å†™é”™è¯¯ï¼Œæ˜¯æ²¡æœ‰åŠæ³•åœ¨ç¼–è¯‘ä¹‹å‰çŸ¥é“çš„ï¼Œåˆæˆ–è€…æ˜¯ç»§ç»­åœ¨ä»£ç ä¸­å¼•ç”¨å·²ç»è¢«åˆ é™¤çš„èµ„æºï¼Œä¹Ÿä¸å®¹æ˜“è¢«å¯Ÿè§‰ã€‚ä¸º
      
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://ckitakishi.com/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Memory warning: å¤§éšéšäºå¸‚</title>
    <link href="http://ckitakishi.com/2019/02/23/Memory-warning-%E5%A4%A7%E9%9A%90%E9%9A%90%E4%BA%8E%E5%B8%82/"/>
    <id>http://ckitakishi.com/2019/02/23/Memory-warning-å¤§éšéšäºå¸‚/</id>
    <published>2019-02-23T03:32:21.000Z</published>
    <updated>2019-02-23T07:40:37.921Z</updated>
    
    <content type="html"><![CDATA[<p>å¯¹ memory warning (å†…å­˜è­¦å‘Š) çš„å¤„ç†æ˜¯ä¸€ä¸ªåœ¨å¼€å‘ä¸­æå…¶å®¹æ˜“è¢«å¿½ç•¥çš„é—®é¢˜ï¼Œç©¶å…¶åŸå› ï¼Œæœ€é‡è¦è«è¿‡äº warning å¹¶ä¸é‚£ä¹ˆå®¹æ˜“å‘ç”Ÿ<del>ï¼Œå¼€å‘ä¸­å°¤å…¶å¦‚æ­¤</del>ã€‚å³ä½¿å‘ç”Ÿäº†ï¼Œåœ¨æˆ‘ä»¬åˆ†æå´©æºƒæ—¥å¿—çš„æ—¶å€™ï¼Œä¹Ÿæœªå¿…èƒ½å¤Ÿæ˜å¯Ÿä¸ä¹‹æ˜¯å¦æœ‰å…³ï¼Œå†è¿›ä¸€æ­¥è¯´ï¼Œå°±ç®—çŸ¥é“äº†åæœ‰å…«ä¹æ˜¯ memory warning å¯¼è‡´äº†å´©æºƒï¼Œæœ‰æ—¶å€™è¦å‡†ç¡®å®šä½æ ¹æºä»éœ€è€—è´¹ä¸€ç•ªåŠŸå¤«ã€‚</p><h2 id="å¸¸è§åŸå› "><a href="#å¸¸è§åŸå› " class="headerlink" title="å¸¸è§åŸå› "></a>å¸¸è§åŸå› </h2><p>ç”±å†…å­˜åŸå› å¯¼è‡´çš„å´©æºƒç±»å‹å¤šä¸èƒœæ•°ï¼Œä¸è¿‡åœ¨è¿™é‡Œåªæ‰“ç®—è®¨è®ºå†…å­˜ä¸è¶³å¯¼è‡´åº”ç”¨è¢«å¼ºåˆ¶ç»ˆç»“è¿™ä¸€ç§ã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯ä¸‹è¿°å‡ ç§ï¼š</p><ul><li>è‡ªç„¶æ¶ˆè€—ï¼Œå¤„ç†åª’ä½“èµ„æºå°¤å…¶å®¹æ˜“æ¶ˆè€—å†…å­˜ã€‚<ul><li>æœªå¤„ç† memory warning</li><li>å¯¹ memory warning çš„å¤„ç†ä¸æ­£ç¡®</li></ul></li><li>memory leak (å†…å­˜æ³„æ¼)ï¼Œç¡®åˆ‡æ¥è¯´ memory leak ä¸æ˜¯ç›´æ¥åŸå› ï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ é€Ÿå™¨ã€‚</li></ul><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h2><p>ä¹‹æ‰€ä»¥è®¤è¯†åˆ°è¿™ä¸ªé—®é¢˜çš„é‡è¦æ€§ï¼Œæ˜¯å› ä¸ºæœ€è¿‘åœ¨çœ‹å´©æºƒæ—¥å¿—çš„æ—¶å€™ï¼Œå‘ç°æœ‰å¾ˆå¤šä¸ªåŸå› è¿‘ä¼¼ï¼Œä½†å‘ç”Ÿåœºæ‰€ä¸å¤ªç›¸åŒçš„å´©æºƒï¼Œä¸è¿‡æ€»ä½“æ¥è¯´å‘ç”Ÿç‡åªæœ‰ 0.0X%ã€‚å› ä¸ºå¤¹æ‚ç€ä¸€äº› RxSwift çš„ä»£ç ï¼ŒçœŸæ­£å‘ç”Ÿå´©æºƒçš„ä½ç½®å˜å¾—å¾ˆéš¾åˆ¤æ–­ï¼ŒçœŸå®åŸå› æ›´æ˜¯æ‰‘æœ”è¿·ç¦»ã€‚æ‰€è°“å®¶å®¶æœ‰æœ¬éš¾å¿µçš„ç»ï¼Œç›¸ä¼¼çš„ï¼ŒçŸ­çŸ­ä»£ç éƒ½æœ‰è¯´ä¸å°½çš„æ•…äº‹ï¼Œæ‰€ä»¥å°±äº‹è®ºäº‹ï¼Œæ¥è¯´è¯´åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p><a id="more"></a><p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå°è£…äº† <code>UICollectionView</code> çš„ <code>UIViewController</code>ï¼Œä¹Ÿå°±æ˜¯ <code>BaseCollectionViewController</code>ï¼Œåœ¨å…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥â€œä¿è¯â€ä¸æ˜¯ <code>nil</code> ä¸”ä¸ä¸º <code>weak</code> çš„ <code>collectionVIew</code>ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BaseCollectionViewController.swift</span></span><br><span class="line"><span class="keyword">fileprivate</span>(<span class="keyword">set</span>) <span class="keyword">var</span> collectionView: <span class="type">UICollectionView!</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> isViewLoaded &amp;&amp; view.window == <span class="literal">nil</span> &amp;&amp; collectionView.isDescendant(of: view) &#123;</span><br><span class="line">        collectionView.removeFromSuperview()</span><br><span class="line">        collectionView.delegate = <span class="literal">nil</span></span><br><span class="line">        collectionView.dataSource = <span class="literal">nil</span></span><br><span class="line">        collectionView = <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">super</span>.didReceiveMemoryWarning()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">loadView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.loadView()</span><br><span class="line">    <span class="comment">// init collectionView in code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œè¿˜æ‹¥æœ‰ä¸€ä¸ªç»§æ‰¿è‡ª BaseCollectionViewController çš„ XXViewControllerï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// XXViewController</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XXViewController</span>: <span class="title">BaseCollectionViewController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">didReceiveMemoryWarning</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> isViewLoaded &amp;&amp; view.window == <span class="literal">nil</span> &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.didReceiveMemoryWarning()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">reloadData</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// fetch data from server then reload collection view</span></span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">        collectionView.reloadData()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…çš„è¿ç”¨æƒ…æ™¯æ˜¯ï¼Œåœ¨ <code>XXViewController`</code> ä¸­å­˜åœ¨ pop ä¸€ä¸ªæ–° ViewController çš„æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™ï¼ŒXXViewController<code>éœ€è¦é‡æ–°è·å–æ•°æ®æ¥åˆ·æ–°é¡µé¢å¹¶æ›´æ–° collectionView çš„</code>contentOffset<code>ã€‚æŒ‰é“ç†æ¥è¯´ï¼Œåˆ·æ–°æ•°æ®åœ¨ä¸‹ä¸€æ¬¡ view will appear çš„æ—¶å€™è¿›è¡Œä¼šæ›´ä¿é™©ï¼Œä½†æ˜¯ç”±äºè¢«å¼ºçƒˆè¦æ±‚è°ƒæ•´</code>contentOffset` è¿™ä¸ªè¿‡ç¨‹ä¸å¯è§ï¼Œæ‰€ä»¥â€¦è¿™æ ·ä¸€æ¥ï¼Œbug å°±â€œåº”è¿è€Œç”Ÿâ€äº†ã€‚</p><p>å½“æ–° ViewController ä½äºæœ€é¡¶ç«¯çš„æ—¶å€™ï¼ŒXXViewController å°±ä¸å†è¢« window æ‰€æŒæœ‰ã€‚ç”±äºå®ƒç»§æ‰¿è‡ª BaseCollectionViewControllerï¼Œ<code>didReceiveMemoryWarning</code> å‘ç”Ÿæ—¶ collectionView ä¼šåœ¨ä¸çŸ¥ä¸è§‰ä¸­è¢«ç½®ä¸º nilï¼Œå¦‚æœè¿™ä¸€åˆ‡å‘ç”Ÿåœ¨ collectionView.reloadData() ä¹‹å‰ï¼Œé‚£å™©æ¢¦å°±è¯ç”Ÿäº†ã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ–è®¸ä¼šåæ€ controller view ä¹‹é—´çš„ç»§æ‰¿å…³ç³»åˆ°åº•åˆç†ä¹ˆï¼Œè°ƒæ•´ <code>contentOffset</code> ä¸å¯è§åˆ°åº•åˆç†ä¹ˆï¼Œ<code>collectionView = nil</code> åˆ°åº•æœ‰æ²¡æœ‰æ„ä¹‰ã€‚æˆ‘è®¤ä¸ºè¿™äº›éƒ½æ˜¯åˆç†çš„ç€æ‰‹ç‚¹ï¼Œå¯¹äºè¿™ç±»é—®é¢˜ï¼Œæ‰¾åˆ°åŸå› å…¶å®å°±å·²ç»è§£å†³äº† 80% äº†ã€‚</p><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>æœªé›¨ç»¸ç¼ªè¿™å¥è¯åœ¨è¿™é‡Œéå¸¸é€‚ç”¨ï¼Œæå‰å»æ€è€ƒä¸€äº›é—®é¢˜æœ‰åŠ©äºæˆ‘ä»¬è§„é¿ memory warning å¸¦æ¥çš„éº»çƒ¦ï¼š</p><ul><li>å½“æ¥æ”¶åˆ° memery warning æ—¶æˆ‘ä»¬è¯¥åšä»€ä¹ˆï¼Ÿ</li><li>view controller  ä¸è¢« window æŒæœ‰çš„æ—¶å€™éœ€è¦åšä»€ä¹ˆï¼Ÿ</li><li>å½“ä¸€ä¸ª view controller è¢«æ¢å¤çš„æ—¶å€™ï¼Œ<code>loadView</code>, <code>viewDidLoad</code> ä¼šé»˜è®¤è¢«è°ƒç”¨ï¼Œä½†æ˜¯è‡ªå®šä¹‰çš„ <code>init</code> æ–¹æ³•ä»¬å°±ä¸ä¸€å®šäº†ï¼Œè¿™æ ·ä»èƒ½é¡ºåˆ©å®Œæˆåˆå§‹åŒ–å—ï¼Ÿ</li><li>æ˜¯å¦å­˜åœ¨æ˜¾è‘—çš„å†…å­˜æ³„æ¼ï¼Ÿ</li></ul><p>å½“è¿™äº›é—®é¢˜éƒ½æ¢³ç†æ¸…æ¥šçš„æ—¶å€™ï¼Œä¹Ÿå°±å¤§å¤§å‡å°‘äº†åé¡¾ä¹‹å¿§ã€‚</p><p>é™¤äº†ä¸Šé¢æåˆ°è¿‡çš„ <code>didReceiveMemoryWarning</code>ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ï¼š <code>applicationDidReceiveMemoryWarning</code>ï¼Œåè€…æ˜¯ App delegate çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºå¯ä»¥ç”¨æ¥ç®¡ç†ä¸€äº›å…¨å±€å¯¹è±¡ï¼Œæˆ–æ˜¯ç¼“å­˜ä¹‹ç±»çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™ç›‘å¬åä¸º <code>UIApplicationDidReceiveMemoryWarningNotification</code> çš„é€šçŸ¥æ¥åšä¸€äº›ç‰¹æ®Šçš„å¤„ç†ã€‚</p><h2 id="è§¦å‘-memory-warning"><a href="#è§¦å‘-memory-warning" class="headerlink" title="è§¦å‘ memory warning"></a>è§¦å‘ memory warning</h2><p>é‚£ä¹ˆï¼Œå½“å‡†å¤‡å°±ç»ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è§¦å‘ memory warning æ¥è¿›è¡Œæµ‹è¯•äº†ã€‚</p><ol><li>æ¨¡æ‹Ÿå™¨ â€“&gt; Debug â€“&gt; Simulate Memory Warning (<code>Shift + Command + M</code>): æ¨¡æ‹Ÿå™¨è°ƒè¯•é€‰é¡¹ï¼Œç»“åˆæ–­ç‚¹æ¨¡æ‹Ÿ warning</li><li><code>UIApplication.shared.perform(Selector((&quot;_performMemoryWarning&quot;)))</code>: åœ¨ä»£ç ä¸­æŒ‡å®šä½ç½®è§¦å‘ warning</li></ol><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å†…å­˜ç®¡ç†ç€å®ä¸æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œä¸Šè¿°å†…å®¹ä¸è¿‡æµ®äºæµ…è¡¨ã€‚å¦‚æœæƒ³è¦ç¨å¾®å†å¤šäº†è§£ä¸€ç‚¹ï¼Œæ¨èçœ‹ä¸€çœ‹ WWDC 2018 çš„ <a href="https://developer.apple.com/videos/play/wwdc2018/416/" target="_blank" rel="noopener">Session 416</a> ï¼Œæœ‰å¾ˆå¤šå†…å®¹åˆ·æ–°äº†æˆ‘çš„æ—¢å­˜è®¤çŸ¥â€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¯¹ memory warning (å†…å­˜è­¦å‘Š) çš„å¤„ç†æ˜¯ä¸€ä¸ªåœ¨å¼€å‘ä¸­æå…¶å®¹æ˜“è¢«å¿½ç•¥çš„é—®é¢˜ï¼Œç©¶å…¶åŸå› ï¼Œæœ€é‡è¦è«è¿‡äº warning å¹¶ä¸é‚£ä¹ˆå®¹æ˜“å‘ç”Ÿ&lt;del&gt;ï¼Œå¼€å‘ä¸­å°¤å…¶å¦‚æ­¤&lt;/del&gt;ã€‚å³ä½¿å‘ç”Ÿäº†ï¼Œåœ¨æˆ‘ä»¬åˆ†æå´©æºƒæ—¥å¿—çš„æ—¶å€™ï¼Œä¹Ÿæœªå¿…èƒ½å¤Ÿæ˜å¯Ÿä¸ä¹‹æ˜¯å¦æœ‰å…³ï¼Œå†è¿›ä¸€æ­¥è¯´ï¼Œå°±ç®—çŸ¥é“äº†åæœ‰å…«ä¹æ˜¯ memory warning å¯¼è‡´äº†å´©æºƒï¼Œæœ‰æ—¶å€™è¦å‡†ç¡®å®šä½æ ¹æºä»éœ€è€—è´¹ä¸€ç•ªåŠŸå¤«ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¸¸è§åŸå› &quot;&gt;&lt;a href=&quot;#å¸¸è§åŸå› &quot; class=&quot;headerlink&quot; title=&quot;å¸¸è§åŸå› &quot;&gt;&lt;/a&gt;å¸¸è§åŸå› &lt;/h2&gt;&lt;p&gt;ç”±å†…å­˜åŸå› å¯¼è‡´çš„å´©æºƒç±»å‹å¤šä¸èƒœæ•°ï¼Œä¸è¿‡åœ¨è¿™é‡Œåªæ‰“ç®—è®¨è®ºå†…å­˜ä¸è¶³å¯¼è‡´åº”ç”¨è¢«å¼ºåˆ¶ç»ˆç»“è¿™ä¸€ç§ã€‚æ¯”è¾ƒå¸¸è§çš„æ˜¯ä¸‹è¿°å‡ ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‡ªç„¶æ¶ˆè€—ï¼Œå¤„ç†åª’ä½“èµ„æºå°¤å…¶å®¹æ˜“æ¶ˆè€—å†…å­˜ã€‚&lt;ul&gt;
&lt;li&gt;æœªå¤„ç† memory warning&lt;/li&gt;
&lt;li&gt;å¯¹ memory warning çš„å¤„ç†ä¸æ­£ç¡®&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;memory leak (å†…å­˜æ³„æ¼)ï¼Œç¡®åˆ‡æ¥è¯´ memory leak ä¸æ˜¯ç›´æ¥åŸå› ï¼Œè€Œæ˜¯ä¸€ä¸ªåŠ é€Ÿå™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å®ä¾‹&quot;&gt;&lt;a href=&quot;#å®ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å®ä¾‹&quot;&gt;&lt;/a&gt;å®ä¾‹&lt;/h2&gt;&lt;p&gt;ä¹‹æ‰€ä»¥è®¤è¯†åˆ°è¿™ä¸ªé—®é¢˜çš„é‡è¦æ€§ï¼Œæ˜¯å› ä¸ºæœ€è¿‘åœ¨çœ‹å´©æºƒæ—¥å¿—çš„æ—¶å€™ï¼Œå‘ç°æœ‰å¾ˆå¤šä¸ªåŸå› è¿‘ä¼¼ï¼Œä½†å‘ç”Ÿåœºæ‰€ä¸å¤ªç›¸åŒçš„å´©æºƒï¼Œä¸è¿‡æ€»ä½“æ¥è¯´å‘ç”Ÿç‡åªæœ‰ 0.0X%ã€‚å› ä¸ºå¤¹æ‚ç€ä¸€äº› RxSwift çš„ä»£ç ï¼ŒçœŸæ­£å‘ç”Ÿå´©æºƒçš„ä½ç½®å˜å¾—å¾ˆéš¾åˆ¤æ–­ï¼ŒçœŸå®åŸå› æ›´æ˜¯æ‰‘æœ”è¿·ç¦»ã€‚æ‰€è°“å®¶å®¶æœ‰æœ¬éš¾å¿µçš„ç»ï¼Œç›¸ä¼¼çš„ï¼ŒçŸ­çŸ­ä»£ç éƒ½æœ‰è¯´ä¸å°½çš„æ•…äº‹ï¼Œæ‰€ä»¥å°±äº‹è®ºäº‹ï¼Œæ¥è¯´è¯´åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>å…³äº MetaX çš„ä¸‰è¨€ä¸¤è¯­</title>
    <link href="http://ckitakishi.com/2018/04/29/%E5%85%B3%E4%BA%8E-MetaX-%E7%9A%84%E4%B8%89%E8%A8%80%E4%B8%A4%E8%AF%AD/"/>
    <id>http://ckitakishi.com/2018/04/29/å…³äº-MetaX-çš„ä¸‰è¨€ä¸¤è¯­/</id>
    <published>2018-04-29T11:47:04.000Z</published>
    <updated>2018-05-07T15:21:47.183Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>Support:</strong></p><p>If you have any question or comment for MetaX, please do not hesitate to contact me via the ways on the bottom left of this page.</p></blockquote><p>Source: <a href="https://github.com/Ckitakishi/MetaX" target="_blank" rel="noopener">MetaX on Github</a></p><h2 id="åˆè¡·"><a href="#åˆè¡·" class="headerlink" title="åˆè¡·"></a>åˆè¡·</h2><p>å¸¸å¸¸æŠŠç›¸æœºä¸­çš„ç…§ç‰‡ä¼ åˆ°æ‰‹æœºé‡Œï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ä¸€ç‚¹æ˜¯æ²¡æœ‰åœ°ç†ä¿¡æ¯ï¼Œæ‰€ä»¥å°±è‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿäº†ã€‚<br>ä½œä¸ºä¸€ä¸ªæ€»ç»“ï¼Œä¸‹æ–‡çš„ä¸»é¢˜æ˜¯ç…§ç‰‡æ¡†æ¶ PhotoKit å’Œç®€å•çš„é—®é¢˜è§£å†³è®°å½•ã€‚</p><h2 id="å…³äºç…§ç‰‡æ¡†æ¶-PhotoKit"><a href="#å…³äºç…§ç‰‡æ¡†æ¶-PhotoKit" class="headerlink" title="å…³äºç…§ç‰‡æ¡†æ¶ - PhotoKit"></a>å…³äºç…§ç‰‡æ¡†æ¶ - PhotoKit</h2><p>åœ¨ <strong>PhotoKit</strong> ä¹‹å‰ï¼ŒAssetsLibrary æ˜¯è¢«å¹¿æ³›ä½¿ç”¨çš„ï¼Œç”±äºå¹¶æ²¡æœ‰å®é™…ç”¨è¿‡ï¼Œå°±ä¸å†èµ˜è¿°ã€‚ä» <strong>PhotoKit</strong> çš„æ–‡æ¡£å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªååˆ†åºå¤§çš„æ¡†æ¶ï¼ŒåŒ…å«äº†ç›¸å½“å¤šçš„ç±»ã€‚<strong>PhotoKit</strong> å¯ä»¥ä½¿å¾—è‡ªå·±çš„åº”ç”¨ä¸ç…§ç‰‡åº“ä»¥ç›¸åŒæµç¨‹å·¥ä½œï¼Œæ­¤å¤–æ€§èƒ½ä¹Ÿç›¸å½“ä¸é”™ã€‚</p><h3 id="ä»è·å–å›¾åƒå¼€å§‹"><a href="#ä»è·å–å›¾åƒå¼€å§‹" class="headerlink" title="ä»è·å–å›¾åƒå¼€å§‹"></a>ä»è·å–å›¾åƒå¼€å§‹</h3><h4 id="ç›¸å†Œå–å¾—"><a href="#ç›¸å†Œå–å¾—" class="headerlink" title="ç›¸å†Œå–å¾—"></a>ç›¸å†Œå–å¾—</h4><p>å¦‚æœä»¥ä»ç›¸å†Œåˆ—è¡¨é€‰å–ç…§ç‰‡è¿™ä¸ªæµç¨‹ä¸ºä¾‹æ¥çœ‹ï¼Œç›¸å†Œåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ <code>PHCollection</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œæ‹¥æœ‰ä¸¤ä¸ªå­ç±»ï¼š <code>PHAssetCollection</code> å’Œ <code>PHCollectionList</code>ï¼Œå‰è€…è¡¨ç¤ºç›¸å†Œï¼Œåè€…è¡¨ç¤ºç›¸å†Œåˆ—è¡¨ä¹Ÿå°±æ˜¯æ–‡ä»¶å¤¹ã€‚é¢˜å¤–è¯ï¼Œåœ¨ iOS è®¾å¤‡ä¸Šåˆ›å»ºæ–‡ä»¶å¤¹å‡ ä¹å¯ä»¥è¯´æ˜¯ä¸€ä¸ªéšè—åŠŸèƒ½ï¼Œç‚¹å‡»è¿½åŠ æŒ‰é’®æ˜¯ç›¸å†Œï¼Œè€Œé•¿æŒ‰åˆ™å¯ä»¥é€‰æ‹©ç›¸å†Œæˆ–æ–‡ä»¶å¤¹ã€‚è€Œè·å–ç›¸å†Œçš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸Šè¿°å‡ ä¸ªç±»ä¸­çš„ fetch æ–¹æ³•ï¼Œè¿”å› <code>PHFetchResult&lt;XXX&gt;</code>ï¼Œå¯ä»¥ç”¨éƒ¨åˆ†ä¸ <code>Foundation</code> ä¸­é›†åˆç±»å‹ç›¸åŒçš„æ¥å£æ¥å¤„ç†è¿™ä¸ªç»“æœï¼Œæ¯”å¦‚ç”¨ <code>enumerateObjects(_:)</code> æ¥è¿›è¡Œéå†ã€‚è¯¥æ–¹æ³•é»˜è®¤ä¼šå–å›æ‰€æœ‰ç»“æœï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>PHFetchOptions</code> æ¥åšä¸€äº›è¿‡æ»¤æˆ–æ˜¯æ’åºå¤„ç†ã€‚ä¾‹å¦‚å–å›æ‰€æœ‰æ™ºèƒ½ç›¸å†Œï¼š</p><a id="more"></a><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> options = <span class="type">PHFetchOptions</span>()</span><br><span class="line">options.sortDescriptors = [<span class="type">NSSortDescriptor</span>(key: <span class="string">"creationDate"</span>, ascending: <span class="literal">false</span>)]</span><br><span class="line"><span class="keyword">let</span> smartAlbums: <span class="type">PHFetchResult</span>&lt;<span class="type">PHAssetCollection</span>&gt;?</span><br><span class="line">smartAlbums = <span class="type">PHAssetCollection</span>.fetchAssetCollections(with: .smartAlbum, subtype: .albumRegular, options: options)</span><br></pre></td></tr></table></figure><p>æ™ºèƒ½ç›¸å†Œç”±ç³»ç»ŸæŒ‰ç…§å›¾åƒç±»å‹è‡ªåŠ¨ç”Ÿæˆï¼Œæ‰€ä»¥å¹¶ä¸ä¼šå‡ºç°æ–‡ä»¶å¤¹ã€‚ç„¶è€Œï¼Œå¦‚æœä»¥ç³»ç»Ÿç…§ç‰‡åº“æ¥è¯´ï¼Œè¿˜æœ‰ä¸€ç±»ç›¸å†Œæ˜¯ç”¨æˆ·è‡ªå®šä¹‰ç›¸å†Œï¼Œå¤„ç†è¿™ç±»ç›¸å†Œçš„æ—¶å€™å¿…é¡»è¦æ³¨æ„åŒºåˆ†æ–‡ä»¶å¤¹ä¸ç›¸å†Œã€‚æˆ‘é€‰æ‹©çš„å¤„ç†æ–¹æ³•æ˜¯æš´åŠ›åœ°ç”¨ä¸€ä¸ªé€’å½’å°†æ–‡ä»¶å¤¹å®Œå…¨å¹³é“ºå±•å¼€ä½œä¸ºé¦–çº§ç›¸å†Œã€‚</p><p>å¦å¤–ï¼Œè®¿é—®å›¾ç‰‡åº“éœ€è¦è¯·æ±‚ç”¨æˆ·æƒé™ï¼Œåœ¨æƒé™æœªå†³å®šçš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ fetch æ–¹æ³•çš„æ—¶å€™ä¼šè‡ªåŠ¨è¯·æ±‚æƒé™ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ <code>PHPhotoLibrary</code> çš„ç±»æ–¹æ³• <code>requestAuthorization:</code> æ˜¾å¼åœ°å‘èµ·è¯·æ±‚ã€‚å¦‚æœè¢«æ‹’..ç»..äº†ï¼Œæ·»åŠ ä¸€ä¸ªç±»ä¼¼ 404 é¡µé¢çš„è§†å›¾å¹¶è®¾ç½®ä¸€ä¸ªæŒ‰é’®æŒ‡å‘åº”ç”¨çš„è®¾ç½®é¡µé¢æ˜¯ (æˆ‘è®¤ä¸º) æ¯”è¾ƒä¼˜é›…çš„åšæ³•ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url = <span class="type">URL</span>(string: <span class="type">UIApplicationOpenSettingsURLString</span>)</span><br><span class="line"><span class="type">UIApplication</span>.shared.<span class="keyword">open</span>(url!, options: [:], completionHandler: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><h4 id="ç…§ç‰‡å–å¾—"><a href="#ç…§ç‰‡å–å¾—" class="headerlink" title="ç…§ç‰‡å–å¾—"></a>ç…§ç‰‡å–å¾—</h4><p>ç…§ç‰‡çš„å–å¾—æ˜¯ä¸€ä¸ªå±‚å±‚é€’è¿›çš„è¿‡ç¨‹ï¼Œåœ¨å–å¾—äº†ç›¸å†Œä¹‹åï¼Œä¾¿å¯ä»¥å°è¯•è·å– <code>PHAsset</code> å¯¹è±¡ï¼Œå°æ ‡é¢˜è¯´çš„æ¯”è¾ƒç‹­éš˜ä¸€äº›ï¼Œå®é™…ä¸Š <code>PHAsset</code> å¯¹è±¡åŒ…å«å›¾åƒï¼Œè§†é¢‘ï¼Œå’Œ Live Photoã€‚æ­¤æ—¶å¯ä»¥é€šè¿‡è°ƒç”¨ <code>fetchAssets(in:options:)</code> æ¥å–å¾—ä¸€ä¸ªç±»å‹ä¸º <code>PHFetchResult&lt;PHAsset&gt;</code> çš„èµ„æºé›†ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> assetCollection = smartAlbums.object(at: <span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> fetchResult = <span class="type">PHAsset</span>.fetchAssets(<span class="keyword">in</span>: assetCollection, options: options)</span><br></pre></td></tr></table></figure><p>æ‰‹æ¡ <code>PHAsset</code>ï¼Œå‡ ä¹å°±æ‹¥æœ‰äº†ä¸€åˆ‡ã€‚æ­¤åˆ» <code>PHImageManager</code> è¯¥å‡ºåœºäº†ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºè¯·æ±‚ç‰¹å®š asset å¯¹åº”çš„åª’ä½“èµ„æºçš„ç±»ã€‚ä»¥è¯·æ±‚å›¾ç‰‡ä¸ºä¾‹ï¼Œå…¶ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ–¹æ³•æ˜¯ <code>requestImage(for:targetSize:contentMode:options:resultHandler:)</code>ï¼Œé€šè¿‡å‚æ•°å°±ä¼šå‘ç°ï¼Œè¯·æ±‚çš„åŒæ—¶å°±å¯ä»¥ç¡®å®šå›¾ç‰‡çš„å°ºå¯¸ï¼Œå¹¶è¿›è¡Œè£å‰ªã€‚</p><p>æˆ‘ä»¬è¿˜èƒ½å¤Ÿä¸ºè¿™ä¸ªè¯·æ±‚è®¾å®šä¸€ä¸ªç±»å‹ä¸º <code>PHImageRequestOptions</code> çš„ optionï¼Œå€ŸåŠ©å®ƒçš„ <code>isSynchronous</code> å±æ€§å¯ä»¥å†³å®šä»¥åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„æ–¹å¼æ¥å‘èµ·è¯·æ±‚ï¼›è€Œ <code>deliverryMode</code> åˆ™æ˜¯è®©ä½ ä»¬èƒ½å¤Ÿåœ¨å›¾åƒçš„åŠ è½½æ—¶é—´å’Œè´¨é‡ä¸­åšä¸€ä¸ªæƒè¡¡æˆ–æŠ‰æ‹©ï¼Œ<code>.highQualityFormat</code> ä¸è®ºè€—æ—¶å¤šä¹…éƒ½ä¼šåŠ è½½åŸå°ºå¯¸å›¾ç‰‡ï¼Œ<code>.fastFormat</code> ä¼šèˆå¼ƒè´¨é‡æ¥å¿«é€ŸåŠ è½½å›¾åƒï¼Œ<code>.opportunistic</code> çº¦ç­‰äºå‰ä¸¤è€…çš„å’Œï¼Œå…ˆ <code>.fastFormat</code> å <code>.highQualityFormat</code>ï¼Œæ‰€ä»¥ä¼šå‘ç”Ÿä¸¤æ¬¡è¯·æ±‚ï¼Œä½†æ˜¯ï¼Œå¦‚æœ <code>isSynchronous = true</code>ï¼Œé‚£ä¹ˆè¯·æ±‚ä¸€å®šæ˜¯ <code>.highQualityFormat</code>ï¼›è¿˜æœ‰ <code>isNetworkAccessAllowed</code>ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸ä» iCloud ä¸‹è½½å›¾ç‰‡ï¼Œå¦‚æœå…è®¸ï¼Œé‚£ <code>progressHandler</code> ä¹Ÿä¼šè¢«åŒæ—¶è°ƒç”¨ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å°†è¿›åº¦ä½“ç°åœ¨ UI ä¸Šã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> options = <span class="type">PHImageRequestOptions</span>()</span><br><span class="line">options.deliveryMode = .opportunistic</span><br><span class="line"><span class="comment">// options.isSynchronous = true</span></span><br><span class="line">options.isNetworkAccessAllowed = <span class="literal">true</span></span><br><span class="line">options.progressHandler = &#123;(progress: <span class="type">Double</span>, <span class="number">_</span>, <span class="number">_</span>, <span class="number">_</span>) <span class="keyword">in</span></span><br><span class="line">    <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">imageRequestId = <span class="type">PHImageManager</span>.<span class="keyword">default</span>().requestImage(<span class="keyword">for</span>: asset, targetSize: targetSize, contentMode: .aspectFit, options: options, resultHandler: &#123; image, info <span class="keyword">in</span></span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡ŒåŸºæœ¬ä¸Šä¸€å¼ å›¾ç‰‡çš„å–å¾—å°±å®Œæˆäº†ã€‚ä¸è¿‡ï¼Œå¦‚æœç”±äºä¸€äº›åŸå› è¯·æ±‚å¤±è´¥æˆ–è€…ä¸å®Œæ•´å‘¢ï¼Ÿåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>info</code> ä¾¿æ˜¯ä¸€ä¸ªåŒ…å«äº†å¤šæ¡å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­ç»“æœçš„ä¿¡æ¯çš„å­—å…¸ã€‚<code>PHImageResultIsInCloudKey</code> å¯ä»¥çŸ¥é“å›¾åƒæ˜¯å¦éœ€è¦ä» iCloud ä¸‹è½½ï¼›<code>PHImageResultIsDegradedKey</code> æ„å‘³ç€å½“å‰çš„å›¾åƒæ˜¯å¦æ˜¯ä½è´¨é‡ç‰ˆæœ¬ï¼›ä»¥åŠ <code>PHImageErrorKey</code>ï¼Œé¡¾åæ€ä¹‰æ˜¯è¡¨ç¤ºäº†é”™è¯¯ä¿¡æ¯ï¼Œç­‰ç­‰ã€‚</p><h4 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><p>æœ€åå€¼å¾—ä¸€æçš„æ˜¯å›¾ç‰‡å–å¾—çš„ç¼“å­˜æœºåˆ¶ã€‚</p><p>é€šå¸¸ï¼Œåœ¨è·å–ä¸€å¼ å…·ä½“çš„å›¾ç‰‡ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šå…ˆè·å–æ•´ä¸ªç›¸å†Œçš„æ‰€æœ‰å›¾ç‰‡åšæˆä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯”å¦‚ä¸€ä¸ªå¦‚åŒç³»ç»Ÿå›¾ç‰‡åº“çš„ collectionViewï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œæœ‰æ—¶å€™ä¼šéœ€è¦æå‰å°†å›¾ç‰‡è½½å…¥å†…å­˜ï¼Œè€Œ <code>PHImageManager</code> æœ‰ä¸€ä¸ªå­ç±» <code>PHImageCachingManager</code> æ­£å¥½å¯ä»¥ç”¨æ¥åšè¿™ä»¶äº‹ã€‚</p><p><code>PHImageCachingManager</code> æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¼€å§‹ç¼“å­˜ï¼š<code>startCachingImages(for:targetSize:contentMode:options:)</code>ï¼Œå¦ä¸€ä¸ªæ˜¯åœæ­¢ç¼“å­˜ï¼Œ<code>stopCachingImages(for:targetSize:contentMode:options:)</code>ï¼Œå½»åº•åœæ­¢ç¼“å­˜æ—¶å€™å¯ä»¥ä½¿ç”¨ <code>stopCachingImagesForAllAssets()</code>ã€‚æ¥å—çš„å‚æ•°å’Œä¸Šé¢æåˆ°äº†è¯·æ±‚å›¾åƒå‡ ä¹ä¸€æ ·ä¸€æ ·ï¼Œè€Œäº‹å®ä¸Šåœ¨å–å¾—ç¼“å­˜ä¹‹åï¼Œå†æ¬¡ä½¿ç”¨ <code>requestImage</code> å–å¾—ç‹¬ç«‹å›¾åƒçš„æ—¶å€™ï¼Œå¦‚æœå‚æ•°ç›¸åŒï¼Œåˆ™ä¼šä»ç¼“å­˜ä¸­è·å–ã€‚</p><p>é‚£ç©¶ç«Ÿæ˜¯å°†æ‰€æœ‰å›¾åƒèµ„æºéƒ½æ”¾å…¥ç¼“å­˜ä»¥ä¾›ä¸æ—¶ä¹‹éœ€å‘¢ï¼Œè¿˜æ˜¯ä»…ä»…æ˜¯ç¼“å­˜ä¸€éƒ¨åˆ†å‘¢ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±ç¼“å­˜æ‰€æœ‰èµ„æºå‘¢ï¼Œè¿˜æ˜¯ä¸€è¾¹æ»‘åŠ¨ä¸€è¾¹ç¼“å­˜å‘¢ï¼Ÿæ—¶æœºï¼ŒèŒƒå›´ç­‰ç­‰éƒ½æ˜¯éå¸¸é‡è¦è€Œå¿…é¡»è¦è€ƒè™‘çš„é—®é¢˜ã€‚æ¨èå‚è€ƒä¸€ä¸‹ Apple çš„ç¤ºä¾‹ä»£ç  â€” <a href="https://developer.apple.com/library/content/samplecode/UsingPhotosFramework/Introduction/Intro.html" target="_blank" rel="noopener">Using Photos Framework</a>ï¼Œè™½ç„¶è¿™ä¸ªç¤ºä¾‹ bug æœ‰ç‚¹ç‚¹å¤šï¼Œä½†æ˜¯ç¼“å­˜éƒ¨åˆ†çš„è®¾è®¡è¿˜æ˜¯å¾ˆå¦™çš„ï½ä¹Ÿå› æ­¤å€Ÿé‰´äº†è¿™ä¸ªéƒ¨åˆ†çš„å®ç°ã€‚å®ƒçš„è®¾è®¡ç­–ç•¥åœ¨äºï¼Œè½½å…¥ç”»é¢åŠç”»é¢æ»šåŠ¨ä¸¤ä¸ªæ—¶æœºæ›´æ–°ç¼“å­˜ï¼Œè€ŒåŒºåŸŸåªåŒ…æ‹¬ä»¥å¯è§éƒ¨åˆ†ä¸ºä¸­å¿ƒï¼Œé«˜åº¦ä¸ºä¸¤å€çš„éƒ¨åˆ† (ä¾‹å¦‚ï¼šå¯è§èŒƒå›´ [0, 0, 768, 1024] å¯¹åº”ç¼“å­˜åŒºåŸŸï¼š[-512, 0, 768, 2048])ï¼Œéšç€ç”»é¢çš„æ»‘åŠ¨ï¼Œä¸åœè°ƒç”¨ <code>startCachingImages</code> ä¸ <code>stopCachingImages</code>ï¼Œè¯¥åŒºåŸŸä¹Ÿä¼šéšä¹‹æ”¹å˜ï¼Œå°±åƒä¸€ä¸ªæ»‘åŠ¨çª—å£ä¸€æ ·ã€‚</p><h3 id="ä¿®æ”¹å›¾åƒ"><a href="#ä¿®æ”¹å›¾åƒ" class="headerlink" title="ä¿®æ”¹å›¾åƒ"></a>ä¿®æ”¹å›¾åƒ</h3><p>æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œæœ‰å…³å›¾åƒçš„æ¡†æ¶ä¾æ¬¡æ˜¯ï¼š</p><ul><li>UIKit</li><li>CoreImage</li><li>CoreGraphics</li><li>ImageIO</li></ul><p>ä¸‹é¢æ‰“ç®—è®¨è®ºä¸¤ä¸ªç»´åº¦çš„å›¾ç‰‡ä¿®æ”¹ï¼Œæ»¤é•œå’Œ Metadataã€‚æ¥ç€ä¸Šä¸€éƒ¨åˆ†çš„æµç¨‹ç»§ç»­å¾€ä¸‹æ¥è¯´ï¼Œè™½ç„¶å®ç°æ»¤é•œå…¶å®åˆå¾ˆå¤šæ–¹æ³•ï¼Œä½†æ˜¯è‹¥é€‰æ‹© <strong>Core Image</strong>ï¼Œé‚£ä¹ˆä¸è®ºå“ªä¸€ç§ï¼Œéƒ½è¦å…ˆé€šè¿‡ PHAsset çš„å®ä¾‹æ–¹æ³• <code>requestContentEditingInput(with:completionHandler:)</code> æ¥è·å–å®Œæ•´å°ºå¯¸çš„ <code>CIImage</code> å›¾åƒï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">asset.requestContentEditingInput(with: options, completionHandler: &#123; contentEditingInput, <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> imageURL = contentEditingInput?.fullSizeImageURL <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// error</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> ciImageOfURL = <span class="type">CIImage</span>(contentsOf: imageURL)</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> ciImage = ciImageOfURL <span class="keyword">else</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ»¤é•œ"><a href="#æ»¤é•œ" class="headerlink" title="æ»¤é•œ"></a>æ»¤é•œ</h4><p>åœ¨é¡ºåˆ©å–å¾— <code>CIImage</code> ä¹‹åï¼Œæ·»åŠ æ»¤é•œçš„æµç¨‹å¤§è‡´å¦‚ä¸‹ã€‚<strong>Core Image</strong> æä¾›äº†ä¸€äº›æ»¤é•œï¼Œå¦‚æœéœ€è¦è‡ªå®šçš„è¯ï¼Œçœ‹ä¸€çœ‹ WWDC2014 Session 515 ä¼šéå¸¸æœ‰å¸®åŠ©ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹è¿‡å»ç‰ˆæœ¬çš„ç®¡ç†</span></span><br><span class="line"><span class="keyword">let</span> adjustmentData = <span class="type">PHAdjustmentData</span>...</span><br><span class="line">                                                  </span><br><span class="line"><span class="keyword">let</span> contentEditingOutput = <span class="type">PHContentEditingOutput</span>(contentEditingInput: contentEditingInput)</span><br><span class="line">contentEditingOutput.adjustmentData = adjustmentData</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> outputImage = ciImage</span><br><span class="line">    .applyingOrientation(input.fullSizeImageOrientation)</span><br><span class="line">    .applyingFilter(<span class="built_in">filter</span>, withInputParameters: <span class="literal">nil</span>)</span><br><span class="line">    </span><br><span class="line"><span class="type">CIContext</span>().writeJPEGRepresentation(of: outputImage,</span><br><span class="line">                                    to: contentEditingOutput.renderedContentURL, </span><br><span class="line">                                    colorSpace: ciImage.colorSpace!,</span><br><span class="line">                                    options: [:])</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¡®è®¤ä¿®æ”¹</span></span><br><span class="line"><span class="type">PHPhotoLibrary</span>.shared().performChanges(&#123;</span><br><span class="line">    <span class="keyword">let</span> request = <span class="type">PHAssetChangeRequest</span>(<span class="keyword">for</span>: <span class="keyword">self</span>.asset)</span><br><span class="line">    request.contentEditingOutput = contentEditingOutput</span><br><span class="line">&#125;, completionHandler: &#123; success, error <span class="keyword">in</span></span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Metadata"><a href="#Metadata" class="headerlink" title="Metadata"></a>Metadata</h4><p>æœ‰äº† <code>CIImage</code>ï¼Œè¯»å– Metadata åªéœ€è¦è·å– <code>CIImage</code> çš„ <code>properties</code> å±æ€§å³å¯ã€‚ä½†æ˜¯å¦‚æœè¦å†™å…¥ï¼Œå°±éœ€è¦åŸºäºç›¸å¯¹åº•å±‚çš„ <code>ImageIO</code> æ¡†æ¶æ¥å®Œæˆã€‚</p><p>é¦–å…ˆï¼Œæˆ‘åˆ›å»ºäº†ä¸´æ—¶å­˜å‚¨ï¼Œï¼Œè™½ç„¶æœ€åˆçš„æƒ³æ³•æ˜¯ç›´æ¥è¦†ç›–å½“å‰ç¼–è¾‘ä¸­çš„å›¾åƒï¼Œè¿™ä¸ªæ–¹æ¡ˆåœ¨æ¨¡æ‹Ÿå™¨ç«Ÿç„¶æˆåŠŸäº†ï¼Œä½†æ˜¯çœŸå®è®¾å¤‡è¡Œä¸é€šã€‚åæ¥è¿«ä¸å¾—å·²é€‰æ‹©äº†è¿‚å›çš„æ–¹æ³•ï¼Œè¦†ç›– =&gt; è¿½åŠ æ–°å›¾åƒ + (å¯é€‰)åˆ é™¤æ—§å›¾åƒã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> context = <span class="type">CIContext</span>(options:<span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶å­˜å‚¨</span></span><br><span class="line"><span class="keyword">var</span> tmpUrl = <span class="type">NSURL</span>.fileURL(withPath: <span class="type">NSTemporaryDirectory</span>() + imageURL.lastPathComponent)</span><br></pre></td></tr></table></figure><p>ä¸ºäº†è®©æ–°åˆ›å»ºçš„å›¾åƒä¿æŒä¸åŸå§‹å›¾åƒç›¸åŒçš„ç±»å‹ï¼Œé€šè¿‡ <code>CGImageSource</code> æ¥è·å–ã€‚å¦‚æœè·å–æˆåŠŸï¼Œå°±å¯ä»¥æŒ‡å®šä¸Šé¢çš„ä¸´æ—¶ URL ä½œä¸ºä½ç½®ï¼Œå°è¯•åˆ›å»º <code>CGImageDestination</code>ï¼Œä¹‹æ‰€ä»¥è¯´æ˜¯å°è¯•ï¼Œæ˜¯å› ä¸ºä¸å¾—ä¸è€ƒè™‘å¦‚æœå½“å‰è®¾å¤‡å¹¶ä¸æ”¯æŒæœŸå¾…åˆ›å»ºçš„ç±»å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šå¾—åˆ° <code>nil</code>ã€‚è¿™ä¸ªæ—¶å€™åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½å¤Ÿå†è¯•ä¸€æ¬¡ï¼Œåœ¨å½“å‰ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªåšæ³•ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ <strong>HEIF</strong> æ ¼å¼åœ¨ä¸€äº›è¾ƒæœ‰å†å²çš„è®¾å¤‡ä¸Šå¹¶ä¸è¢«æ”¯æŒè€Œå¸¦æ¥çš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨å¤±è´¥çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤å°†ç›®æ ‡ç±»å‹è®¾å®šä¸º <strong>JPEG</strong>ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä» CIImage åˆ›å»º CGImage</span></span><br><span class="line"><span class="keyword">let</span> cgImage = context.createCGImage(ciImage, from: ciImage.extent)</span><br><span class="line"><span class="comment">// æ ¹æ® CGImageSource æ¥è·å–å›¾ç‰‡ç±»å‹æ ‡è¯† (UTI)</span></span><br><span class="line"><span class="keyword">let</span> cgImageSource = <span class="type">CGImageSourceCreateWithURL</span>(imageURL <span class="keyword">as</span> <span class="type">CFURL</span>, <span class="literal">nil</span>)</span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> sourceType = <span class="type">CGImageSourceGetType</span>(cgImageSource!) <span class="keyword">else</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å°è¯•åˆ›å»º CGImageDestination</span></span><br><span class="line"><span class="keyword">var</span> createdDestination: <span class="type">CGImageDestination?</span> = <span class="type">CGImageDestinationCreateWithURL</span>(tmpUrl <span class="keyword">as</span> <span class="type">CFURL</span>, sourceType</span><br><span class="line">    , <span class="number">1</span>, <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯¥ç‰ˆæœ¬æš‚å®šæ–¹æ¡ˆï¼šæ— æ³•åˆ›å»ºçš„å›¾åƒæ ¼å¼å°±å­˜å‚¨ä¸º JPEG</span></span><br><span class="line"><span class="keyword">if</span> createdDestination == <span class="literal">nil</span> &#123;</span><br><span class="line">    <span class="comment">// media type is unsupported: delete temp file, create new one with extension [.JPG].</span></span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = <span class="keyword">try</span>? <span class="type">FileManager</span>.<span class="keyword">default</span>.removeItem(at: tmpUrl)</span><br><span class="line">    tmpUrl = <span class="type">NSURL</span>.fileURL(withPath: <span class="type">NSTemporaryDirectory</span>() + imageURL.deletingPathExtension().lastPathComponent + <span class="string">".JPG"</span>)</span><br><span class="line">    createdDestination = <span class="type">CGImageDestinationCreateWithURL</span>(tmpUrl <span class="keyword">as</span> <span class="type">CFURL</span>, <span class="string">"public.jpeg"</span> <span class="keyword">as</span> <span class="type">CFString</span></span><br><span class="line">        , <span class="number">1</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">guard</span> <span class="keyword">let</span> destination = createdDestination <span class="keyword">else</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‹¥å®Œæˆäº† <code>CGImageDestination</code> åˆ›å»ºï¼Œå°±å¯ä»¥å¼€å§‹å‘è¿™ä¸ªç›®æ ‡æ·»åŠ å›¾åƒäº†ã€‚åœ¨ä¸Šä¸€æ®µä»£ç ä¸­ï¼Œåˆ›å»ºæ—¶ä¼ å…¥çš„ç¬¬ 3 ä¸ªå‚æ•°æ­£æ˜¯ä»£è¡¨ç€å›¾åƒçš„æ•°é‡ï¼Œå› ä¸ºåªæ˜¯å•å¼ å›¾åƒï¼Œæ‰€ä»¥æ˜¯è‡ªç„¶æ˜¯ 1ï¼›è¯¥æ–¹æ³•ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»º GIFã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‘ CGImageDestination æ·»åŠ å›¾åƒï¼Œä»¥åŠè¯¥å›¾åƒçš„ metadataã€‚</span></span><br><span class="line"><span class="type">CGImageDestinationAddImage</span>(destination, cgImage!, newProps <span class="keyword">as</span> <span class="type">CFDictionary</span>)</span><br><span class="line"><span class="keyword">if</span> !<span class="type">CGImageDestinationFinalize</span>(destination) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œé€šè¿‡ä»åœ¨ä¸´æ—¶å­˜å‚¨ä½ç½®çš„å›¾åƒæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ asset è¿½åŠ è¯·æ±‚ï¼Œå¹¶å°†ä¸´æ—¶å­˜å‚¨çš„å›¾åƒç§»é™¤å³å¯ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PHPhotoLibrary</span>.shared().performChanges(&#123;</span><br><span class="line">    <span class="keyword">let</span> request = <span class="type">PHAssetChangeRequest</span>.creationRequestForAssetFromImage(atFileURL: tempURL)</span><br><span class="line">    <span class="keyword">let</span> <span class="number">_</span> = <span class="keyword">try</span>? <span class="type">FileManager</span>.<span class="keyword">default</span>.removeItem(at: tempURL)</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="HEIF"><a href="#HEIF" class="headerlink" title="HEIF"></a>HEIF</h4><p><strong>HEIF</strong> æ˜¯å…¨æ–°çš„å›¾ç‰‡æ ¼å¼ï¼Œç›¸åº”çš„è¿˜æœ‰è§†é¢‘çš„ <strong>HEVC</strong>ã€‚è‹¹æœè¡¨ç¤ºåœ¨ç›¸åŒç”»è´¨ä¸‹å¤§å°èƒ½èŠ‚çº¦ 50% çš„å­˜å‚¨ç©ºé—´ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œæ¨èçœ‹ä¸€çœ‹ WWDC 2017 Session 511ã€‚</p><p>åœ¨å®é™…è¿ç”¨ä¸­é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘åœ¨ç›¸å¯¹è¾ƒæ—§çš„è®¾å¤‡ä¸ŠæŸ¥çœ‹ <strong>.HEIC (HEIF)</strong> çš„å›¾ç‰‡ï¼Œå¹¶å°è¯•å»ä¿®æ”¹å®ƒï¼Œä¸Šé¢æåˆ°çš„ <code>CGImageDestination</code> ä¼šå¾—åˆ°ä¸€ä¸ª <code>nil</code> å¯¹è±¡ã€‚ç»“æœå¹¶ä¸æ„å¤–ï¼Œæ¯•ç«Ÿè¿™éœ€è¦è½¯ä»¶ä¸ç¡¬ä»¶åŒæ–¹é¢çš„æ”¯æŒã€‚ä½†æ˜¯å…·ä½“æ¥è¯´ç©¶ç«Ÿåˆ†ç•Œçº¿åœ¨å“ªé‡Œå‘¢ï¼Ÿå¯ä»¥åœ¨ 511 æ‰¾åˆ°ç­”æ¡ˆï¼Œè€Œ<a href="https://support.apple.com/en-us/HT207022" target="_blank" rel="noopener">è¿™ä¸ªæ”¯æŒé¡µ</a>ä¹Ÿè®²çš„å¾ˆè¯¦ç»†ã€‚åŸºæœ¬æ¡ä»¶å°±æ˜¯è¿è¡Œ iOS 11 çš„ iPhone 7 ç­‰è®¾å¤‡ä»¥åŠä¹‹åçš„æ–°è®¾å¤‡ã€‚</p><h3 id="ç›‘å¬å˜åŒ–"><a href="#ç›‘å¬å˜åŒ–" class="headerlink" title="ç›‘å¬å˜åŒ–"></a>ç›‘å¬å˜åŒ–</h3><p>ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ã€‚ä½†ï¼Œå¦‚æœæ­¤æ—¶ç³»ç»Ÿçš„å›¾ç‰‡åº“å‘ç”Ÿäº†æ”¹å˜ï¼Œåˆè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>åªéœ€è¦è®°ä½å››æ­¥ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼š</p><ol><li>è®©å½“å‰çš„ç±»éµå¾ª <code>PHPhotoLibraryChangeObserver</code> åè®®ã€‚</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">DetailInfoViewController</span>: <span class="title">PHPhotoLibraryChangeObserver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨è§†å›¾å³å°†å‡ºç°æ—¶å°†å½“å‰çš„ç±»ä½œä¸ºè§‚å¯Ÿè€…æ³¨å†Œåˆ° <code>PHPhotoLibrary</code> å…±äº«å¯¹è±¡ä¸Šã€‚</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PHPhotoLibrary</span>.shared().register(<span class="keyword">self</span>)</span><br></pre></td></tr></table></figure><ol start="3"><li>å®ç° <code>PHPhotoLibraryChangeObserver</code> åè®®çš„ <code>photoLibraryDidChange(_:)</code><br>æ–¹æ³•ã€‚</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">photoLibraryDidChange</span><span class="params">(<span class="number">_</span> changeInstance: PHChange)</span></span> &#123;</span><br><span class="line">    <span class="comment">// changeDetails æ–¹æ³•æœ‰æ¥å—ä¸åŒå‚æ•°çš„å¤šä¸ªç‰ˆæœ¬ï¼Œå¯å‚ç…§æ–‡æ¡£ã€‚</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> curAsset = asset, <span class="keyword">let</span> details = changeInstance.changeDetails(<span class="keyword">for</span>: curAsset) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    asset = details.objectAfterChanges</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>æœ€ååœ¨ <code>deinit</code> ä¸­è§£é™¤ç›‘å¬ã€‚</li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">deinit</span> &#123;</span><br><span class="line">    <span class="type">PHPhotoLibrary</span>.shared().unregisterChangeObserver(<span class="keyword">self</span>)</span><br><span class="line">&#125;</span><br><span class="line">``` </span><br><span class="line"></span><br><span class="line">## ä¸€äº›ç¬”è®°</span><br><span class="line"></span><br><span class="line">### <span class="type">PromiseKit</span> <span class="number">6</span> </span><br><span class="line"></span><br><span class="line"><span class="type">PromiseKit</span> <span class="number">6</span> å¯¹å‡ ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„ç‚¹åšå‡ºäº†ä¿®æ”¹ã€‚è¯´å®è¯ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªæ¡†æ¶çš„æ–‡æ¡£å¯è¯»æ€§å…¶å®è¿˜æœ‰å¾…æå‡ã€‚ç›´æ¥çœ‹æºç åŠå…¶ä¸­çš„æ³¨é‡Šåè€Œæ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</span><br><span class="line"></span><br><span class="line">å…¶ä¸­ä¸€ç‚¹æ˜¯æ”¹å˜äº†æ ¸å¿ƒåˆå§‹åŒ–æ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line">```swift</span><br><span class="line"><span class="comment">// ä¹‹å‰</span></span><br><span class="line"><span class="type">Promise</span> &#123; fulfill, reject <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç°åœ¨</span></span><br><span class="line"><span class="type">Promise</span> &#123; seal <span class="keyword">in</span></span><br><span class="line">    <span class="comment">// seal.fulfill(foo)</span></span><br><span class="line">    <span class="comment">// seal.reject(error)</span></span><br><span class="line">    <span class="comment">// seal.resolve(foo, error)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ç‚¹æ˜¯ï¼Œå°†ä¸‡èƒ½çš„ <code>then</code> æ‹†åˆ†ä¸ºäº† <code>then</code>, <code>done</code> å’Œ <code>map</code>ã€‚ä½œè€…çš„è§£é‡Šæ˜¯ï¼Œä»¥å‰ <code>then</code> åšå¾ˆå¤šäº‹ï¼Œä½†æ˜¯ç”±äºä¾èµ– Swift æ ¹æ®ä¸Šä¸‹æ–‡åšæ¨æ–­ï¼Œåœ¨ç”¨äº†å¤šä¸ª <code>then</code> ä¹‹åæ¨æ–­å°±ä¼šå‘ç”Ÿå¤±è´¥ã€‚è€Œä¸”å¾ˆéš¾åˆ¤æ–­é”™è¯¯å‘ç”Ÿåœ¨å“ªã€‚æ‰€ä»¥å°±åªèƒ½é€‰æ‹©ä»æ¯”è¾ƒé«˜çš„å±‚çº§å°±ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯æœ‰äº†ç°åœ¨çš„æ–¹æ¡ˆï¼š</p><ul><li><code>then</code>ï¼šè¿”å›ä¸€ä¸ª promiseã€‚</li><li><code>done</code>ï¼šè¿”å›ä¸€ä¸ª Void promise (80% çš„æƒ…å†µç”¨åœ¨ promise é“¾ä¸­)ã€‚</li><li><code>map</code>ï¼šè¿”å›é promise å€¼ï¼Œæ¯”å¦‚ä¸€ä¸ªå•çº¯çš„å€¼ã€‚</li></ul><h3 id="åœ°ç†ä½ç½®æ£€ç´¢"><a href="#åœ°ç†ä½ç½®æ£€ç´¢" class="headerlink" title="åœ°ç†ä½ç½®æ£€ç´¢"></a>åœ°ç†ä½ç½®æ£€ç´¢</h3><p>æˆ‘éœ€è¦çš„æ˜¯ä¸€ä¸ªæ ¹æ®å…³é”®å­—è·å–ç›¸å…³åœ°ç‚¹çš„ä¸€ä¸ªæ£€ç´¢ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ POI æ£€ç´¢ã€‚å› ä¸ºéœ€è¦æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥å…ˆè€ƒè™‘äº† <strong>MapKit</strong> çš„ <code>MKLocalSearch</code> æˆ–è€… <code>MKLocalSearchCompleter</code>ã€‚</p><p>å‰è€…å¸¸å¸¸ä¼šç”¨åœ¨åœ°å›¾çš„æ£€ç´¢ï¼Œé€šè¿‡ <code>start(completionHandler:)</code> å¯ä»¥å–å¾— 10 ä¸ªç»“æœï¼Œå¹¶ä¸”è¿™ä¸ª limit æ— æ³•è‡ªå®šä¹‰ï¼Œå®ƒåœ¨ä¸»çº¿ç¨‹å·¥ä½œï¼Œè€Œä¸”å½“å‘èµ·æ–°çš„è¯·æ±‚æ—¶å½“å‰å³ä½¿æœ‰æ­£åœ¨è¿›è¡Œçš„æ£€ç´¢ä¹Ÿä¸ä¼šè¢«ç»ˆæ­¢ï¼Œå¦‚æœä¸æ³¨æ„å¾ˆå¯èƒ½ä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> localSearchRequest = <span class="type">MKLocalSearchRequest</span>()</span><br><span class="line"><span class="keyword">let</span> newestLocation = locations.last! <span class="keyword">as</span> <span class="type">CLLocation</span></span><br><span class="line">localSearchRequest.region = <span class="type">MKCoordinateRegion</span>(center: newestLocation.coordinate, span: <span class="type">MKCoordinateSpanMake</span>(<span class="number">5.0</span>, <span class="number">5.0</span>))</span><br><span class="line"></span><br><span class="line"><span class="type">MKLocalSearch</span>(request: localSearchRequest).start(completionHandler: &#123; (localSearchResponse, error) -&gt; <span class="type">Void</span> <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">guard</span> searchText == searchBar.text <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥è¿™ä¼¼ä¹å¹¶ä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„é€‰æ‹©ã€‚è¾…ä»¥åè€…çš„ <code>MKLocalSearchCompleter</code> ä¼šæ›´å¥½ä¸€äº›ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> completer = <span class="type">MKLocalSearchCompleter</span>()</span><br><span class="line">completer.queryFragment = searchText</span><br><span class="line"></span><br><span class="line"><span class="comment">// MARK: MKLocalSearchCompleter Delegate</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LocationSearchViewController</span>: <span class="title">MKLocalSearchCompleterDelegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¤„ç†æ£€ç´¢ç»“æœ</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">completerDidUpdateResults</span><span class="params">(<span class="number">_</span> completer: MKLocalSearchCompleter)</span></span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.resultDataSource = completer.results</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¤„ç†é”™è¯¯</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">completer</span><span class="params">(<span class="number">_</span> completer: MKLocalSearchCompleter, didFailWithError error: Error)</span></span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œæ£€ç´¢ç»“æœåˆ—è¡¨å°±å¯ä»¥å¾ˆç®€å•çš„è¡¨ç¤ºå‡ºæ¥äº†ã€‚å½“éœ€è¦å–å¾—å„ä¸ªä½ç½®çš„è¯¦ç»†ä¿¡æ¯æ—¶ï¼Œè¿˜æ˜¯æ— æ³•ç¦»å¼€ <code>MKLocalSearch</code>ï¼Œæ ¹æ®æ£€ç´¢ç»“æœåˆ›å»ºè¯·æ±‚å³å¯ã€‚</p><p>ä¸è¿‡å³ä½¿è¿™æ ·ä¹Ÿè¿˜æ˜¯æœ‰å¾ˆå¤šåˆ¶é™ï¼Œæ¯”å¦‚è¿‘é‚»æ£€ç´¢ï¼Œå°è¯•ä½¿ç”¨äº† Foursquareï¼Œè™½ç„¶è¿™ä¸ªé—®é¢˜å¾—ä»¥è§£å†³ï¼Œä½†æ˜¯è¯·æ±‚æ•°é‡çš„é™åˆ¶åˆæ˜¯æ–°çš„éœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œè¦èµ°çš„è·¯è¿˜å¾ˆé•¿ã€‚å¦å¤–ï¼Œç”±äºåœ¨ä¸­å›½æ— æ³•æ£€ç´¢æµ·å¤–åœ°ç‚¹ï¼Œä¹Ÿæ— æ³•é€†å‘è½¬æ¢æµ·å¤–ç»çº¬åº¦ï¼Œè¦èµ°çš„è·¯ä¸æ˜¯å¾ˆé•¿ï¼Œè€Œæ˜¯å¾ˆé•¿å¾ˆé•¿ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Support:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;If you have any question or comment for MetaX, please do not hesitate to contact me via the ways on the bottom left of this page.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Source: &lt;a href=&quot;https://github.com/Ckitakishi/MetaX&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;MetaX on Github&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;åˆè¡·&quot;&gt;&lt;a href=&quot;#åˆè¡·&quot; class=&quot;headerlink&quot; title=&quot;åˆè¡·&quot;&gt;&lt;/a&gt;åˆè¡·&lt;/h2&gt;&lt;p&gt;å¸¸å¸¸æŠŠç›¸æœºä¸­çš„ç…§ç‰‡ä¼ åˆ°æ‰‹æœºé‡Œï¼Œä½†æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ä¸€ç‚¹æ˜¯æ²¡æœ‰åœ°ç†ä¿¡æ¯ï¼Œæ‰€ä»¥å°±è‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿäº†ã€‚&lt;br&gt;ä½œä¸ºä¸€ä¸ªæ€»ç»“ï¼Œä¸‹æ–‡çš„ä¸»é¢˜æ˜¯ç…§ç‰‡æ¡†æ¶ PhotoKit å’Œç®€å•çš„é—®é¢˜è§£å†³è®°å½•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…³äºç…§ç‰‡æ¡†æ¶-PhotoKit&quot;&gt;&lt;a href=&quot;#å…³äºç…§ç‰‡æ¡†æ¶-PhotoKit&quot; class=&quot;headerlink&quot; title=&quot;å…³äºç…§ç‰‡æ¡†æ¶ - PhotoKit&quot;&gt;&lt;/a&gt;å…³äºç…§ç‰‡æ¡†æ¶ - PhotoKit&lt;/h2&gt;&lt;p&gt;åœ¨ &lt;strong&gt;PhotoKit&lt;/strong&gt; ä¹‹å‰ï¼ŒAssetsLibrary æ˜¯è¢«å¹¿æ³›ä½¿ç”¨çš„ï¼Œç”±äºå¹¶æ²¡æœ‰å®é™…ç”¨è¿‡ï¼Œå°±ä¸å†èµ˜è¿°ã€‚ä» &lt;strong&gt;PhotoKit&lt;/strong&gt; çš„æ–‡æ¡£å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªååˆ†åºå¤§çš„æ¡†æ¶ï¼ŒåŒ…å«äº†ç›¸å½“å¤šçš„ç±»ã€‚&lt;strong&gt;PhotoKit&lt;/strong&gt; å¯ä»¥ä½¿å¾—è‡ªå·±çš„åº”ç”¨ä¸ç…§ç‰‡åº“ä»¥ç›¸åŒæµç¨‹å·¥ä½œï¼Œæ­¤å¤–æ€§èƒ½ä¹Ÿç›¸å½“ä¸é”™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä»è·å–å›¾åƒå¼€å§‹&quot;&gt;&lt;a href=&quot;#ä»è·å–å›¾åƒå¼€å§‹&quot; class=&quot;headerlink&quot; title=&quot;ä»è·å–å›¾åƒå¼€å§‹&quot;&gt;&lt;/a&gt;ä»è·å–å›¾åƒå¼€å§‹&lt;/h3&gt;&lt;h4 id=&quot;ç›¸å†Œå–å¾—&quot;&gt;&lt;a href=&quot;#ç›¸å†Œå–å¾—&quot; class=&quot;headerlink&quot; title=&quot;ç›¸å†Œå–å¾—&quot;&gt;&lt;/a&gt;ç›¸å†Œå–å¾—&lt;/h4&gt;&lt;p&gt;å¦‚æœä»¥ä»ç›¸å†Œåˆ—è¡¨é€‰å–ç…§ç‰‡è¿™ä¸ªæµç¨‹ä¸ºä¾‹æ¥çœ‹ï¼Œç›¸å†Œåˆ—è¡¨ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ &lt;code&gt;PHCollection&lt;/code&gt;ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œæ‹¥æœ‰ä¸¤ä¸ªå­ç±»ï¼š &lt;code&gt;PHAssetCollection&lt;/code&gt; å’Œ &lt;code&gt;PHCollectionList&lt;/code&gt;ï¼Œå‰è€…è¡¨ç¤ºç›¸å†Œï¼Œåè€…è¡¨ç¤ºç›¸å†Œåˆ—è¡¨ä¹Ÿå°±æ˜¯æ–‡ä»¶å¤¹ã€‚é¢˜å¤–è¯ï¼Œåœ¨ iOS è®¾å¤‡ä¸Šåˆ›å»ºæ–‡ä»¶å¤¹å‡ ä¹å¯ä»¥è¯´æ˜¯ä¸€ä¸ªéšè—åŠŸèƒ½ï¼Œç‚¹å‡»è¿½åŠ æŒ‰é’®æ˜¯ç›¸å†Œï¼Œè€Œé•¿æŒ‰åˆ™å¯ä»¥é€‰æ‹©ç›¸å†Œæˆ–æ–‡ä»¶å¤¹ã€‚è€Œè·å–ç›¸å†Œçš„æ–¹æ³•æ˜¯ä½¿ç”¨ä¸Šè¿°å‡ ä¸ªç±»ä¸­çš„ fetch æ–¹æ³•ï¼Œè¿”å› &lt;code&gt;PHFetchResult&amp;lt;XXX&amp;gt;&lt;/code&gt;ï¼Œå¯ä»¥ç”¨éƒ¨åˆ†ä¸ &lt;code&gt;Foundation&lt;/code&gt; ä¸­é›†åˆç±»å‹ç›¸åŒçš„æ¥å£æ¥å¤„ç†è¿™ä¸ªç»“æœï¼Œæ¯”å¦‚ç”¨ &lt;code&gt;enumerateObjects(_:)&lt;/code&gt; æ¥è¿›è¡Œéå†ã€‚è¯¥æ–¹æ³•é»˜è®¤ä¼šå–å›æ‰€æœ‰ç»“æœï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä½¿ç”¨ &lt;code&gt;PHFetchOptions&lt;/code&gt; æ¥åšä¸€äº›è¿‡æ»¤æˆ–æ˜¯æ’åºå¤„ç†ã€‚ä¾‹å¦‚å–å›æ‰€æœ‰æ™ºèƒ½ç›¸å†Œï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="Projects" scheme="http://ckitakishi.com/categories/Projects/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
      <category term="å›¾åƒ" scheme="http://ckitakishi.com/tags/%E5%9B%BE%E5%83%8F/"/>
    
      <category term="æ‘„å½±" scheme="http://ckitakishi.com/tags/%E6%91%84%E5%BD%B1/"/>
    
  </entry>
  
  <entry>
    <title>å›é¡¾ Try!Swift Tokyo 2018</title>
    <link href="http://ckitakishi.com/2018/03/14/%E5%9B%9E%E9%A1%BEtryswift-2018/"/>
    <id>http://ckitakishi.com/2018/03/14/å›é¡¾tryswift-2018/</id>
    <published>2018-03-14T10:37:51.000Z</published>
    <updated>2018-03-14T06:23:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ‹–å»¶ç—‡å¾ˆå¯æ€•ï¼Œè¿‡äº†å¿«ä¸¤å‘¨ç»ˆäºå¼€å§‹ç€æ‰‹å†™ Try!Swift Tokyo 2018 çš„æ„Ÿæƒ³ã€‚å—åˆ°äº†å‰åŒäº‹çš„å½±å“ï¼Œä»Šå¹´çš„å¤§ä¼šæˆ‘æ˜¯åšä¸ºå¿—æ„¿è€…å‚åŠ çš„ï¼Œç©å¾—å¾ˆå¼€å¿ƒï¼Œç„¶è€Œåªå¬åˆ°äº†ä¸€åŠçš„æ¼”è®²T.Tã€‚æ‰€ä»¥ä¹‹åä¼šä»å¬ä¼—å’Œå¿—æ„¿è€…ä¸¤ä¸ªè§’åº¦æ¥ç®€çŸ­çš„å†™ä¸€å†™è®©æˆ‘å°è±¡æ·±åˆ»çš„ä¸€äº›äº‹å„¿ã€‚</p><p><img src="/images/tryswift1.jpg" alt="é›†åˆå†™çœŸ"></p><blockquote><p><a href="https://www.tryswift.co/events/2018/tokyo/jp" target="_blank" rel="noopener">Try!Swift å®˜ç½‘</a></p></blockquote><p>ä¹…é—»ä¸å¦‚ä¸€è§ï¼Œå„ç§æœºç¼˜å·§åˆç»ˆäºå’Œ<a href="https://onevcat.com" target="_blank" rel="noopener">å–µç¥</a>ç¢°é¢äº†ï¼Œä¸€è·¯å­¦ä¹  iOS å¯èƒ½è¯»çš„æœ€å¤šçš„å°±æ˜¯å–µç¥å†™çš„æ–‡ç« äº†ï¼ŒçœŸçš„æ˜¯å—ç›ŠåŒªæµ…ã€‚è™½ç„¶å› ä¸ºæ¯”è¾ƒå¿™åªèŠäº†ä¸€ä¼šå„¿è¿˜éƒ½æ˜¯æ‚è°ˆwwwï¼Œä½†æ˜¯æœ‰ç§æˆå°±è¾¾æˆçš„æ¿€åŠ¨æ„Ÿ(`ï½¥âˆ€ï½¥)</p><p>ç¬¬ä¸€å¤©æ—©æ™¨è¿˜é‡åˆ°äº† <a href="http://smoozapp.com/" target="_blank" rel="noopener">Smooz</a> çš„åˆ›å§‹äºº Kato æ¡‘ï¼Œäººå¾ˆå’Œå–„ä¸”å¥è°ˆï¼Œå›å¿†èµ·ç¬¬ä¸€æ¬¡çŸ¥é“ Smooz æ˜¯ 16 å¹´çš„å¹´åˆï¼Œé‚£æ—¶å€™è¿˜åœ¨æµ‹è¯•é˜¶æ®µï¼Œåªæœ‰ iOS ç‰ˆæœ¬ï¼Œä¹Ÿè¿˜æ²¡æœ‰æˆç«‹å…¬å¸è¿è¥ï¼Œç±»ä¼¼äºç‹¬ç«‹å¼€å‘è€…é¡¹ç›®ã€‚Smooz æ‹¥æœ‰ç±»ä¼¼ web æµè§ˆå™¨çš„å¤š tab ç½®é¡¶è®©äººçœ¼å‰ä¸€äº®ï¼Œå„ç§æ‰‹åŠ¿çš„ä¾¿åˆ©æ€§ä¹Ÿå¢è‰²ä¸å°‘ï¼Œå¦å¤–é¢œè‰²è¿˜ç›¸å½“å¯çˆ±ã€‚å½“æ—¶ (å¾ˆå¤±ç¤¼åœ°) æš—è‡ªæƒ³ä¼šä¸ä¼šæ¸æ¸åˆæˆä¸ºä¸€ä¸ªæ¢è‚¤æµè§ˆå™¨ï¼Ÿäº‹å®èƒœäºä¸€åˆ‡ï¼Œåæ¥ Smooz è·å¾—äº† App Store Best of 2016ï¼Œç°åœ¨å¸¸å¸¸å¯ä»¥åœ¨ç”µè½¦ä¸Šçœ‹åˆ°ç”¨æˆ·ï¼Œæ€»ä¹‹æ˜¯ä¸€æ¬¾å¾ˆä¸ä¸€æ ·çš„ç§»åŠ¨ç«¯æµè§ˆå™¨ï¼Œå€¼å¾—ä¸€è¯•ã€‚</p><a id="more"></a><h2 id="å¬ä¼—è§†è§’"><a href="#å¬ä¼—è§†è§’" class="headerlink" title="å¬ä¼—è§†è§’"></a>å¬ä¼—è§†è§’</h2><p>ç¼ºå¸­äº†å‡ åœºæƒ³å¬çš„æ¼”è®²ï¼Œåƒæ˜¯ Charlse for iOS..æ³ªç›®ã€‚ä¸‹é¢æ‰€å†™çš„å¤§å¤šæ˜¯ä¸´åœºæ„Ÿå—ã€‚</p><blockquote><p>è¿™æ˜¯ä¸€ä»½æ—¥è¯­çš„<a href="https://qiita.com/ozwio/items/71fb765b48905d6a2193" target="_blank" rel="noopener">èµ„æ–™æ€»ç»“</a>ã€‚</p></blockquote><h3 id="ä»£ç ä¼˜åŒ–ï¼šOptimizing-Swift-code-for-separation-of-concerns-and-simplicity"><a href="#ä»£ç ä¼˜åŒ–ï¼šOptimizing-Swift-code-for-separation-of-concerns-and-simplicity" class="headerlink" title="ä»£ç ä¼˜åŒ–ï¼šOptimizing Swift code for separation of concerns and simplicity"></a>ä»£ç ä¼˜åŒ–ï¼šOptimizing Swift code for separation of concerns and simplicity</h3><p>ä»£ç çš„ä¼˜åŒ–æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œä¸è¿‡æœ‰äº›ä¸œè¥¿è¶Šè€è¶Šèƒ½å‡¸æ˜¾å®ƒçš„ä»·å€¼æ‰€åœ¨ã€‚æˆ‘ä¸ªäººå¯¹è¿™ä¸ªè¯é¢˜æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œä¸€æ–¹é¢æ˜¯å¦‚è®²è€…æ‰€è¯´ï¼šä»£ç é€šå¸¸è¯»æ¯”å†™æ›´å¤šï¼›è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯å›¢é˜Ÿåˆä½œï¼Œç®€æ´æ˜ç¡®å†é‡è¦ä¸è¿‡äº†ã€‚å¬å®Œè¿™ä¸ªâ€œæœ€ä½³ç¼–ç¨‹å®è·µâ€ä¹‹åï¼Œæˆ‘è§‰å¾—å¯¹äºæˆ‘è¿™æ ·æ®µä½ä¸é«˜çš„å¼€å‘è€…æ¥è¯´è¿˜æ˜¯é¢‡æœ‰æ”¶è·çš„ï¼Œä¹Ÿè®¸ä»Šåèƒ½æŠŠä»£ç å†™çš„æ›´ Swifty ä¸€äº›ï¼Ÿã€‚å¦å¤–ï¼Œæ‰©å±•ç»™ Swift å¸¦æ¥çš„ä¾¿åˆ©åœ¨è¿™äº›ä¾‹å­ä¸­ä¹Ÿæ˜¯ä½“ç°çš„æ·‹æ¼“å°½è‡´ã€‚</p><p>å¾ˆå¤šä¾‹å­éƒ½æ·±æœ‰åŒæ„Ÿï¼Œæ¯”å¦‚è¯´ä¸‹é¢è¿™ç§æ¨¡å‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// before</span></span><br><span class="line">api.requestReplies(postID: <span class="number">4815162342</span>) &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] result <span class="keyword">in</span></span><br><span class="line">   <span class="keyword">switch</span> result &#123;</span><br><span class="line">   <span class="keyword">case</span> .success(<span class="keyword">let</span> replies):</span><br><span class="line">     <span class="keyword">var</span> filteredReplies: [<span class="type">Reply</span>] = []</span><br><span class="line">     <span class="keyword">for</span> reply <span class="keyword">in</span> replies &#123;</span><br><span class="line">       <span class="keyword">if</span> !user.isBlocking(reply.author) &#123;</span><br><span class="line">         filteredReplies.append(reply)</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">self</span>?.replies = filteredReplies</span><br><span class="line">   <span class="keyword">case</span> .failure:</span><br><span class="line">       <span class="comment">// ...</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½œä¸ºä¸€ä¸ªå†™ Objective-C å¤šäº Swift çš„äººï¼Œç§ä»¥ä¸ºè¿™æ ·çš„å†™æ³•åœ¨å¤§å®¶çš„ Objc ä»£ç ä¸­å¯æ˜¯è¯´æ˜¯ååˆ†å¸¸è§äº†ï½å³ä½¿èƒ½ä¼˜åŒ–ï¼Œæ„Ÿè§‰ä¹Ÿåªèƒ½åŠ å…¥ä¸€ä¸ª filter å†™æˆä¸‹é¢è¿™æ ·ï¼Ÿ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *filteredArray = [replies filteredArrayUsingPredicate:[<span class="built_in">NSPredicate</span> predicateWithBlock:^<span class="built_in">BOOL</span>(Reply *reply, <span class="built_in">NSDictionary</span> *bindings) &#123;</span><br><span class="line">    <span class="keyword">return</span> [user isBlocking:reply.author];</span><br><span class="line">&#125;]];</span><br></pre></td></tr></table></figure><p>è®²è€…æåˆ°çš„ Swift ä¼˜åŒ–æ–¹æ¡ˆæ˜¯ï¼š1. å°†æ ¸å¿ƒé€»è¾‘æŠ½è±¡å‡ºæ¥ä½œä¸ºä¸€ä¸ª Collection çš„æ‰©å±•ï¼›2. æ´»ç”¨ <code>var</code> å’Œ <code>filter</code>ã€‚è¿™æ ·ä¸€æ¥ï¼Œä»£ç çš„â€œä¿¡å™ªæ¯”â€ä¼šå¾—åˆ°ä¸å°‘æå‡ï¼Œå†™æ³•ä¹Ÿæ¯”è¾ƒä¼˜é›…ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// After</span></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Collection</span> <span class="title">where</span> <span class="title">Element</span> == <span class="title">Reply</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> filteringBlockedContent: [<span class="type">Reply</span>] &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">filter</span> &#123; !user.isBlocking($<span class="number">0</span>.author) &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">api.requestReplies(postID: <span class="number">4815162342</span>) &#123; [<span class="keyword">weak</span> <span class="keyword">self</span>] result <span class="keyword">in</span></span><br><span class="line">   <span class="keyword">switch</span> result &#123;</span><br><span class="line">   <span class="keyword">case</span> .success(<span class="keyword">let</span> replies):</span><br><span class="line">     <span class="keyword">self</span>?.replies = replies.filteringBlockedContent</span><br><span class="line">   <span class="keyword">case</span> .failure:</span><br><span class="line">       <span class="comment">// ...</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœŸå¿ƒå¸Œæœ›ä»¥åå†™çš„ä»£ç éƒ½æ˜¯ â€œAfterâ€ã€‚</p><blockquote><p>æ›´å¤šä¾‹å­åœ¨<a href="https://github.com/JaviSoto/Talks/tree/master/TrySwiftTokyo2018" target="_blank" rel="noopener">è¿™é‡Œ</a></p></blockquote><h3 id="SwiftNIO"><a href="#SwiftNIO" class="headerlink" title="SwiftNIO"></a>SwiftNIO</h3><p>è¿˜åœ¨æ¼”è®²å‰å¤§å®¶ä¸€èµ·èŠå¤©æ—¶å°±æ¨æµ‹è¿™å¯èƒ½æ˜¯å½“æ—¥æœ€ç«ï¼Ÿæ¯•ç«Ÿèƒ½åœ¨ WWDC ä»¥å¤–å’Œ Apple å·¥ç¨‹å¸ˆäº¤æµçš„æœºä¼šå°‘ä¹‹åˆå°‘ï¼Œå› æ­¤è¿˜ä¸º Q&amp;A ç¯èŠ‚å¢æ´¾äº†å¿—æ„¿è€…ï½è€Œå‘è¡¨çš„å†…å®¹ä¹Ÿæ²¡æœ‰è®©äººå¤±æœ›ï¼Œï¼Œåœ¨ä»‹ç»äº†ä¸€äº›æœ‰å…³å¼‚æ­¥ï¼Œä»¥åŠ IO äº‹ä»¶çš„å‘ç”Ÿå…¶å®å¯èƒ½å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³çš„é‚£ä¹ˆé¢‘ç¹ä¹‹åï¼Œè¡¨ç¤ºä¸å¦‚æ‰“é€ ä¸€ä¸ª Swift ç‰ˆçš„ Netty æ¥è®©æ€§èƒ½å¾—åˆ°ä¸€ä¸ªé£è·ƒå§ï¼Œäºæ˜¯ SwiftNIO å°±è¯ç”Ÿäº†ã€‚åæ¥çš„å†…å®¹é™·å…¥äº†ä¸€ç§äº‘é‡Œé›¾é‡Œï¼Œè¿˜æ˜¯æš‚ä¸”å…ˆè·³è¿‡å§ğŸ˜‚ã€‚åœ¨æ„æ–™ä¹‹å¤–çš„æ˜¯æœ€åç›´æ¥å®£å¸ƒäº† SwiftNIO çš„å¼€æºã€‚éšç€å®ƒçš„å¼€æºï¼ŒæœåŠ¡å™¨ç«¯ Swift ç®—æ˜¯åˆè¿ˆå‡ºäº†é‡è¦ä¸€æ­¥ã€‚</p><p>æœ€è¿‘æœ‰äººæ‹…å¿ƒ Norman ä¼šä¸ä¼šå› ä¸º SwiftNIO çš„å¼€æºè€Œå¯¼è‡´ç»´æŠ¤ Netty çš„æ—¶é—´å˜å°‘ï¼Œä»–è¡¨ç¤ºä¸ç”¨æ‹…å¿ƒå™¢å¤§å®¶ï¼Œæˆ‘å·²ç»åŒæ—¶ç»´æŠ¤å®ƒä»¬è¶…è¿‡ä¸€å¹´äº†ï½</p><blockquote><p>å‰ä¸¤å¤©è§†é¢‘å·²ç»å…¬å¼€äº†ï¼š<a href="https://www.youtube.com/watch?v=QJ3WG9kRLMo&amp;feature=youtu.be" target="_blank" rel="noopener">Youtube Link</a></p></blockquote><h3 id="ç”¨-Swift-è¿›è¡Œæ¸¸æˆå¼€å‘ğŸ‘¾"><a href="#ç”¨-Swift-è¿›è¡Œæ¸¸æˆå¼€å‘ğŸ‘¾" class="headerlink" title="ç”¨ Swift è¿›è¡Œæ¸¸æˆå¼€å‘ğŸ‘¾"></a>ç”¨ Swift è¿›è¡Œæ¸¸æˆå¼€å‘ğŸ‘¾</h3><p>æ¼”è®²è€… <a href="https://twitter.com/giginet" target="_blank" rel="noopener">giginet</a> å»å¹´æ˜¯ Lightning Talkï¼Œå‘è¡¨äº†ç”¨ SprireKit åœ¨ AppleWatch ä¸Šå¼€å‘è¶…çº§ç›ä¸½çš„ç§ç§ï¼Œå¹¶åœ¨æ­¤åçš„ Hackthon ä¸­å¼€å‘äº†ä¸€ä¸ª Touch Bar å°æ¸¸æˆï¼ŒèŠ±æ ·æŒ–æ˜è‹¹æœå®¶è®¾å¤‡çš„æ½œèƒ½ï¼Œå¾ˆä¼šç©ã€‚</p><p>ä»Šå¹´å†æ¬¡å·åœŸé‡æ¥ï¼Œä¸Šæ¥å°±è¡¨ç¤ºå…¶å® Xcode æ˜¯ä¸€ä¸ªæ¸¸æˆå¼€å‘å·¥å…·ï¼Œå¹¶å±•ç¤ºäº†åœ¨ Xcode é‡Œç»˜åˆ¶çš„ä¸–ç•Œåœ°å›¾â€¦è¨€å½’æ­£ä¼ ï¼Œå¼€å§‹ç€é‡ä»‹ç»äº†ä¸€ä¸‹ SprireKit å’Œ GameplayKit çš„åŸºæœ¬ç”¨æ³•å’Œç¤ºä¾‹ã€‚æœ€åå†æŠŠ SprireKit ä¸ Unity è¿›è¡Œäº†ä¸€æ³¢æ¯”è¾ƒï¼Œå‡ ä¹åœ¨æ‰€æœ‰å¹³å°å…¨å†›è¦†æ²¡çš„ SprireKit åœ¨ WatchOS ç‹¬å äº†ä¸€å—é˜µåœ°ã€‚ã€‚æ‰€ä»¥ Swift å¼€å‘è€…ä»¬éƒ½è¡ŒåŠ¨èµ·æ¥å§ï¼</p><p>è™½ç„¶å¼€äº†å¾ˆå¤šç©ç¬‘ï¼Œä¸è¿‡å¦‚æœæƒ³ç€æ‰‹æ¸¸æˆå¼€å‘ï¼Œä¹Ÿè®¸è¿˜çœŸå¯ä»¥ç”¨ Swift ä¸€è¯•å‘¢ï¼Ÿ</p><blockquote><p><a href="https://speakerdeck.com/giginet/-11" target="_blank" rel="noopener">èµ„æ–™</a></p></blockquote><h3 id="ç®—æ³•å¯è§†åŒ–ï¼šUsing-Swift-to-Visualize-Algorithms"><a href="#ç®—æ³•å¯è§†åŒ–ï¼šUsing-Swift-to-Visualize-Algorithms" class="headerlink" title="ç®—æ³•å¯è§†åŒ–ï¼šUsing Swift to Visualize Algorithms"></a>ç®—æ³•å¯è§†åŒ–ï¼šUsing Swift to Visualize Algorithms</h3><p>æ²¡æœ‰å¬åˆ°æ¼”è®²å‰ä»¥ä¸ºä¼šæ˜¯ä¸€ä¸ªå€Ÿç®—æ³•å¯è§†åŒ–æ¥ä»‹ç» Swift åœ¨å›¾å½¢ç»˜åˆ¶ä¸Šçš„ä¼˜åŠ¿ä¹‹ç±»çš„ã€‚æ¯”è¾ƒæ„å¤–çœŸæ­£çš„æ ¸å¿ƒä¸»é¢˜æ˜¯è´å¡å°”æ›²çº¿ã€‚è¿™ä¸ªæ¼”è®²åœ¨ç°åœºå¾—åˆ°äº†ç›¸å½“å¥½çš„åå“ï¼Œå¤§æ¦‚å‡­å€Ÿçš„æ˜¯è®²è§£æ¯”è¾ƒæ¸…æ™°æ˜“æ‡‚ï¼Œåƒæ˜¯ç»™å®šä»»æ„ç‚¹å¦‚ä½•ç»˜åˆ¶ï¼Œå¤šé˜¶è´å¡å°”æ›²çº¿å¦‚ä½•ç»˜åˆ¶éƒ½èƒ½ä»ä¸­æ‰¾åˆ°ç­”æ¡ˆã€‚å¦‚æœå¯¹åŠ¨ç”»æœ‰å…´è¶£ä½†ä¸äº†è§£è´å¡å°”æ›²çº¿çš„ç»˜åˆ¶æ–¹æ³•ä¸å¦¨çœ‹ä¸€çœ‹ï½</p><blockquote><p><a href="https://speakerdeck.com/subdigital/bezier-curves" target="_blank" rel="noopener">èµ„æ–™</a></p></blockquote><h3 id="Open-Source-Swift-Workshop"><a href="#Open-Source-Swift-Workshop" class="headerlink" title="Open Source Swift Workshop"></a>Open Source Swift Workshop</h3><p>æœ€åä¸€å¤©æœ‰å‡ åœº workshopï¼Œæˆ‘åªå»äº† Open Source Swift Workshop ( BY <a href="https://twitter.com/din0sr" target="_blank" rel="noopener">Nicholas Maccharoli</a> &amp; <a href="https://twitter.com/ikesyo" target="_blank" rel="noopener">ikesyo</a>  )ã€‚å¤§æ¦‚å¯ä»¥æ¦‚æ‹¬ä¸º â€œå¦‚ä½•é€šè¿‡æ”¹ bug æˆ–ä¼˜åŒ–ä¸º Swift è´¡çŒ®åŠ›é‡â€ã€‚åº”è¯¥æœ‰å¾ˆå¤šäººéƒ½æƒ³è¿‡ï¼Œé™¤äº†ç”¨ Swift å†™ä»£ç ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯èƒ½åšçš„æ›´å¤šå‘¢ã€‚ç°å®çš„æ®‹é…·åœ¨äºï¼Œå®é™…ä¸Šæ‰‹æœ‰æ—¶å€™å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ï¼Œä¹Ÿè®¸æ˜¯éœ€è¦ä¸€ä¸ªå¥‘æœºï¼Œä¹Ÿè®¸æ˜¯éœ€è¦ä¸€ä¸ªäººå¼•å¯¼ã€‚è€Œè¿™ä¸ª workshop ä¾¿æˆä¸ºäº†ä¸€ä¸ªå¾ˆå¥½çš„æœºä¼šï¼Œç»“æŸåæœ‰ä¸æ­¢ä¸€ä¸ªäººæäº† prâ€¦</p><p>é‰´äºè‡ªèº«å­¦è¯†æµ…è–„ï¼Œå½“å¤©å‘ ikesyo æ¡‘è¯·æ•™äº†æœ€åˆè¯¥å¦‚ä½•ç€æ‰‹ï¼Œä½œä¸ºå…¥é—¨æˆ‘è§‰å¾—å¾ˆç»†è‡´å¾ˆæ¸…æ™°ï¼š</p><ol start="0"><li>build æœ€æ–°çš„ Swift æºç ã€‚</li><li><a href="https://bugs.swift.org" target="_blank" rel="noopener">https://bugs.swift.org</a> ï¼šåœ¨è¿™é‡Œä¼šæœ‰å¾ˆå¤šå¾…è§£å†³çš„ issue, å±äº Compiler,  LLDB for Swift, Package Manager, Standard  Library ç­‰æ¨¡å—ï¼Œç¬¬ä¸€æ¬¡ä¸Šæ‰‹é€‰æ‹©è‡ªå·±ç›¸å¯¹äº†è§£çš„ä¼šæ¯”è¾ƒå¥½ï¼Œä¾‹å¦‚ï¼šStandard Library å’Œ Foundationã€‚æ­£ç¡®ä½¿ç”¨ Filter  ä¹Ÿæœ‰åŠ©äºæ‰¾åˆ°é€‚åˆè‡ªå·±çš„ issueï¼Œæ¯”å¦‚è¯´æ£€ç´¢å¸¦æœ‰å…¥é—¨çº§æ ‡ç­¾çš„ Standard Library æˆ– Foundation issue: <code>labels = StarterBug AND status = Open AND component in (&quot;Standard Library&quot;, Foundation)</code>ã€‚</li><li><a href="https://forums.swift.org/" target="_blank" rel="noopener">https://forums.swift.org/</a> ï¼šåœ¨è¿™é‡Œå’Œå¤§å®¶æ„‰å¿«çš„è®¨è®ºé—®é¢˜ã€‚</li><li>ä¹Ÿå¯ä»¥é€šè¿‡ä»æºç ä¸­æŸ¥æ‰¾ <code>FIXME</code>, <code>TODO</code> è¿™äº›å…³é”®å­—æ¥æŸ¥æ‰¾å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œè¿™å…¶ä¸­ç”šè‡³æœ‰ä¸€äº›æ˜¯æ–‡æœ¬å±‚é¢çš„ä¿®æ­£ï½</li></ol><p><strong>æ‰©å±•é˜…è¯»ï¼š</strong></p><ul><li><a href="https://swift.org/compiler-stdlib/#compiler-architecture" target="_blank" rel="noopener">https://swift.org/compiler-stdlib/#compiler-architecture</a></li><li><a href="https://swift.org/community/" target="_blank" rel="noopener">https://swift.org/community/</a></li><li><a href="https://academy.realm.io/posts/tryswift-jesse-squires-contributing-open-source-swift/" target="_blank" rel="noopener">https://academy.realm.io/posts/tryswift-jesse-squires-contributing-open-source-swift/</a></li><li><a href="https://www.uraimo.com/2016/02/09/a-short-swift-gyb-tutorial/" target="_blank" rel="noopener">https://www.uraimo.com/2016/02/09/a-short-swift-gyb-tutorial/</a></li><li><a href="https://www.youtube.com/watch?v=e18uipMmEoo" target="_blank" rel="noopener">https://www.youtube.com/watch?v=e18uipMmEoo</a></li></ul><h2 id="å¿—æ„¿è€…è§†è§’"><a href="#å¿—æ„¿è€…è§†è§’" class="headerlink" title="å¿—æ„¿è€…è§†è§’"></a>å¿—æ„¿è€…è§†è§’</h2><p>ä»Šå¹´çš„å‚ä¼šäººæ•°åŒ…æ‹¬ Sponsor å’Œ Speaker è¾¾åˆ°äº† 800 äººï¼Œæ¥è‡ªæ—¥æœ¬ä»¥å¤–çš„å‚åŠ è€…ä¹Ÿè¶…è¿‡äº† 200 äººï¼Œå¿—æ„¿è€…çš„æ•°é‡çº¦ä¸º 30 äººã€‚é˜´å·®é˜³é”™ï¼Œæˆ‘ä¸»è¦æ‹…å½“çš„æ˜¯ global supportï¼Œå¼•å¯¼æ¼”è®²è€…ä¸åŒä¼ äº‹å‰ä¼šé¢ï¼ŒæŒ‰æ—¶ä¸Šå°ï¼Œä¹‹å Q&amp;Aã€‚å¾ˆæœ‰æ„æ€çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼Œè‹±è¯­åŒå£°è¯‘æ—¥è¯­å…¶å®å¾ˆç—›è‹¦ï¼Œå› ä¸ºæ—¥è¯­çœŸçš„å¾ˆå•°å—¦ï¼Œå°¤å…¶æ˜¯è¿™ç§åœºåˆåŸºæœ¬éƒ½æ˜¯æ•¬è¯­ï¼Œè‹±è¯­ 10 ä¸ªéŸ³èŠ‚æ—¥è¯­å¯èƒ½éœ€è¦ 20 ä¸ªï¼Œæ¯æ¬¡åŒä¼ ä»¬éƒ½ä¼šåƒå®å’›ä¸‡å˜±å’æ¼”è®²è€…æ…¢ä¸€ç‚¹å†æ…¢ä¸€ç‚¹ğŸ˜‚ï¼Œäº‹åå†åæ§½â€œä½ æ€ä¹ˆè¶Šè®²è¶Šå¿«å‘¢ï½ï½â€ã€‚å¾ˆå¤§çš„æ”¶è·æ˜¯æ„è¯†åˆ°äº†è‡ªå·±çš„è¯­è¨€æ˜¯æœ‰å¤šä¹ˆå·®ã€‚ã€‚ã€‚</p><p>è¿™æ¬¡æœ‰ä¸€ä¸ªå¾ˆç‰¹æ®Šçš„å¿—æ„¿è€…ï¼Œ80 å¤šå²äº†ä»ç„¶åœ¨å­¦ä¹ å†™ä»£ç ï¼Œæœ‰è‡ªå·±çš„ä¸»é¡µåŠä¸Šæ¶åº”ç”¨ï¼Œå¬è¯´ä¹‹åè§‰å¾—å”¯æœ‰æ•¬ä½©ï¼Œæ²¡èƒ½ç›´æ¥äº¤æµçœŸæ˜¯å¤ªé—æ†¾äº†ã€‚æœ‰æ—¶å€™ä¼‘ä¼šæ—¶é—´ä¼šçœ‹åˆ°ä¸€äº›äººç›’é¥­æ”¾ä¸€è¾¹ï¼Œååœ¨èµ°å»Šå’Œå¢™è¾¹å°±å™¼é‡Œå•ªå•¦å†™ä»£ç ï¼Œç”±è¡·çš„è§‰å¾—ï¼šèƒ½å¦‚æ­¤çƒ­çˆ±ä¸€ä»¶äº‹çœŸæ˜¯å¤ªå¥½äº†ï¼</p><p>æ—¥æœ¬å¾ˆå¤š iOS æ´»è·ƒçš„ä¼ä¸šéƒ½ä½œä¸º Sponsor æœ‰è‡ªå·±çš„å±•åŒºï¼Œï¼ˆä¸»è¦è¿˜æ˜¯ä¸ºäº†æ‹›è˜ï¼Œåˆ°å¤„çœ‹è¢«å¡äº†å¥½å‡ ä»½ä»‹ç»ï¼‰ã€‚åƒæ˜¯ Yahoo Japan çš„ live coding å¾—åˆ°äº†å¾ˆå¥½çš„åå“ã€‚äºä¼ä¸šäºä¸ªäººè¿™éƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„æœºä¼šã€‚</p><p>P.S. Party çš„è›‹ç³•çœŸçš„æ˜¯å¤ªå¯çˆ±äº†â€¦</p><p><img src="/images/tryswift2.jpg" alt="Cake"></p><h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>äºæˆ‘è€Œè¨€ï¼Œå¤§æ¦‚å°±æ˜¯æ„è¯†åˆ°äº†è‡ªå·±åœ¨å¾ˆå¤šæ–¹é¢éƒ½è¿˜å·®å¾ˆè¿œçš„äº‹å®ï¼Œä¸ç®¡æ˜¯æŠ€æœ¯è¿˜æ˜¯æ—¥è¯­è‹±è¯­ã€‚å‰è·¯æ¼«æ¼«ï¼Œç»§ç»­åŠ æ²¹ã€‚æ˜å¹´å†è§ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ‹–å»¶ç—‡å¾ˆå¯æ€•ï¼Œè¿‡äº†å¿«ä¸¤å‘¨ç»ˆäºå¼€å§‹ç€æ‰‹å†™ Try!Swift Tokyo 2018 çš„æ„Ÿæƒ³ã€‚å—åˆ°äº†å‰åŒäº‹çš„å½±å“ï¼Œä»Šå¹´çš„å¤§ä¼šæˆ‘æ˜¯åšä¸ºå¿—æ„¿è€…å‚åŠ çš„ï¼Œç©å¾—å¾ˆå¼€å¿ƒï¼Œç„¶è€Œåªå¬åˆ°äº†ä¸€åŠçš„æ¼”è®²T.Tã€‚æ‰€ä»¥ä¹‹åä¼šä»å¬ä¼—å’Œå¿—æ„¿è€…ä¸¤ä¸ªè§’åº¦æ¥ç®€çŸ­çš„å†™ä¸€å†™è®©æˆ‘å°è±¡æ·±åˆ»çš„ä¸€äº›äº‹å„¿ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/tryswift1.jpg&quot; alt=&quot;é›†åˆå†™çœŸ&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://www.tryswift.co/events/2018/tokyo/jp&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Try!Swift å®˜ç½‘&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¹…é—»ä¸å¦‚ä¸€è§ï¼Œå„ç§æœºç¼˜å·§åˆç»ˆäºå’Œ&lt;a href=&quot;https://onevcat.com&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å–µç¥&lt;/a&gt;ç¢°é¢äº†ï¼Œä¸€è·¯å­¦ä¹  iOS å¯èƒ½è¯»çš„æœ€å¤šçš„å°±æ˜¯å–µç¥å†™çš„æ–‡ç« äº†ï¼ŒçœŸçš„æ˜¯å—ç›ŠåŒªæµ…ã€‚è™½ç„¶å› ä¸ºæ¯”è¾ƒå¿™åªèŠäº†ä¸€ä¼šå„¿è¿˜éƒ½æ˜¯æ‚è°ˆwwwï¼Œä½†æ˜¯æœ‰ç§æˆå°±è¾¾æˆçš„æ¿€åŠ¨æ„Ÿ(`ï½¥âˆ€ï½¥)&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€å¤©æ—©æ™¨è¿˜é‡åˆ°äº† &lt;a href=&quot;http://smoozapp.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Smooz&lt;/a&gt; çš„åˆ›å§‹äºº Kato æ¡‘ï¼Œäººå¾ˆå’Œå–„ä¸”å¥è°ˆï¼Œå›å¿†èµ·ç¬¬ä¸€æ¬¡çŸ¥é“ Smooz æ˜¯ 16 å¹´çš„å¹´åˆï¼Œé‚£æ—¶å€™è¿˜åœ¨æµ‹è¯•é˜¶æ®µï¼Œåªæœ‰ iOS ç‰ˆæœ¬ï¼Œä¹Ÿè¿˜æ²¡æœ‰æˆç«‹å…¬å¸è¿è¥ï¼Œç±»ä¼¼äºç‹¬ç«‹å¼€å‘è€…é¡¹ç›®ã€‚Smooz æ‹¥æœ‰ç±»ä¼¼ web æµè§ˆå™¨çš„å¤š tab ç½®é¡¶è®©äººçœ¼å‰ä¸€äº®ï¼Œå„ç§æ‰‹åŠ¿çš„ä¾¿åˆ©æ€§ä¹Ÿå¢è‰²ä¸å°‘ï¼Œå¦å¤–é¢œè‰²è¿˜ç›¸å½“å¯çˆ±ã€‚å½“æ—¶ (å¾ˆå¤±ç¤¼åœ°) æš—è‡ªæƒ³ä¼šä¸ä¼šæ¸æ¸åˆæˆä¸ºä¸€ä¸ªæ¢è‚¤æµè§ˆå™¨ï¼Ÿäº‹å®èƒœäºä¸€åˆ‡ï¼Œåæ¥ Smooz è·å¾—äº† App Store Best of 2016ï¼Œç°åœ¨å¸¸å¸¸å¯ä»¥åœ¨ç”µè½¦ä¸Šçœ‹åˆ°ç”¨æˆ·ï¼Œæ€»ä¹‹æ˜¯ä¸€æ¬¾å¾ˆä¸ä¸€æ ·çš„ç§»åŠ¨ç«¯æµè§ˆå™¨ï¼Œå€¼å¾—ä¸€è¯•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>æƒ³è¦åšæŒä¸‹å»çš„2018</title>
    <link href="http://ckitakishi.com/2018/01/08/%E6%83%B3%E8%A6%81%E5%9D%9A%E6%8C%81%E4%B8%8B%E5%8E%BB%E7%9A%842018/"/>
    <id>http://ckitakishi.com/2018/01/08/æƒ³è¦åšæŒä¸‹å»çš„2018/</id>
    <published>2018-01-08T12:30:00.000Z</published>
    <updated>2018-01-08T14:03:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰ä¸¤å¤©ç»ˆäºçœ‹äº†ç”µè§†å‰§ç‰ˆã€Šç«èŠ±ã€‹ï¼Œä¹…ä¹…æ— æ³•é‡Šæ€€ã€‚å¾ˆå–œæ¬¢çš„ä¸€å¹•æ˜¯ sparks çš„è°¢å¹•æ¼”å‡ºï¼Œä¸å†ä¸ºäº†è¿åˆæ½®æµè€Œè®²æ®µå­ï¼Œæ³ªæµæ»¡é¢è¯´åè¯ï¼Œå“­ç€ç¬‘ï¼Œç¬‘ç€å“­ï¼Œæœ€åçš„ç»½æ”¾å•Šã€‚åšæŒä¸åŠªåŠ›æ˜¯å› ä¸ºè¿˜æœ‰æ¢¦æƒ³ï¼Œå¯å¦¥åä¸æ”¾å¼ƒå¹¶ä¸æ˜¯ç»“æŸï¼Œè¿˜èƒ½å¹³å‡¡çš„æ´»ç€ï¼Œå°±æ€»è¿˜ä¼šæœ‰å¹³å‡¡çš„å¥‡è¿¹ã€‚</p><a id="more"></a><h4 id="é¢˜å¤–è¯çš„åˆ†å‰²çº¿"><a href="#é¢˜å¤–è¯çš„åˆ†å‰²çº¿" class="headerlink" title="==== é¢˜å¤–è¯çš„åˆ†å‰²çº¿ ===="></a>==== é¢˜å¤–è¯çš„åˆ†å‰²çº¿ ====</h4><p>è¿‡å»è¿™ä¸€å¹´ï¼Œå¸¸å¸¸æ„Ÿè§‰å¥½æ— å¥ˆã€‚åšæŒè¿åŠ¨ï¼Œå¾ˆå¤§ç¨‹åº¦ä¿æŒå¥åº·é¥®é£Ÿï¼Œå¯èº«ä½“çŠ¶å†µå´æ„å¤–çš„å·®ã€‚å¯æ˜¯é™¤äº†åšæŒä¸‹å»è¿˜èƒ½æœ‰ä»€ä¹ˆåŠæ³•å‘¢ï¼Ÿå·¥ä½œå†…å®¹æ²¡æœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œä¾ç„¶æ‹…å½“ç€å‡ ä¸ªåº”ç”¨çš„å¼€å‘ï¼Œåªä¸è¿‡å¤šäº†å’Œå®¢æˆ·çš„æ¥æ´½ï¼Œç„¶é¹…æˆ‘è¿™æ ·çš„æ¸£æ—¥è¯­ä»€ä¹ˆæ—¶å€™æ‰èƒ½å’Œå®¢æˆ·è°ˆç¬‘é£ç”Ÿå•Šã€‚æ²¡æœ‰ä»€ä¹ˆæƒŠå–œï¼Œä¸è¿‡æ„Ÿæ€§çš„ç”¨å¿ƒæƒ…æ¥è¯„ä»·çš„è¯ï¼Œå…¶å®çœŸçš„ä¹Ÿä¸å¤ªåï¼Œè¿˜æ˜¯å¾ˆå®¹æ˜“æ„ŸåŠ¨å¾ˆå®¹æ˜“å¼€å¿ƒã€‚</p><p>2018 å¹´æœ€æƒ³è¦çš„åœ¨ä¸€äº›äº‹æƒ…ä¸ŠåšæŒä¸‹å»ï¼Œçºµç„¶ä¹Ÿè®¸ä»€ä¹ˆä¹Ÿæ”¹å˜ä¸äº†ï¼Œå“ˆå“ˆã€‚é¢¤æŠ–ç€ç«‹ä¸ª flag å§ï¼š</p><ul><li>æ—¥è¯­å’Œè‹±è¯­è¿›é˜¶</li><li>å’Œæ›´å¤šäººäº¤æµå’Œæ²Ÿé€š</li><li>åœ¨ test å’Œ project manage æ–¹é¢æœ‰è¿›æ­¥ï¼Œåˆ†äº«çŸ¥è¯†ï¼Œæ‹¥æŠ±å¼€æº</li><li>æ‹ä¸é”™çš„ç…§ç‰‡ï¼Œåšå¥½åƒçš„é¥­ï¼ŒåšæŒè¿åŠ¨ï¼Œå»æ—…è¡Œ</li><li>è¯» 24 æœ¬ä¹¦</li><li>ä¸Šæ¶ 2ï½3 ä¸ªå°åº”ç”¨</li><li>æ¢å·¥ä½œ</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ä¸¤å¤©ç»ˆäºçœ‹äº†ç”µè§†å‰§ç‰ˆã€Šç«èŠ±ã€‹ï¼Œä¹…ä¹…æ— æ³•é‡Šæ€€ã€‚å¾ˆå–œæ¬¢çš„ä¸€å¹•æ˜¯ sparks çš„è°¢å¹•æ¼”å‡ºï¼Œä¸å†ä¸ºäº†è¿åˆæ½®æµè€Œè®²æ®µå­ï¼Œæ³ªæµæ»¡é¢è¯´åè¯ï¼Œå“­ç€ç¬‘ï¼Œç¬‘ç€å“­ï¼Œæœ€åçš„ç»½æ”¾å•Šã€‚åšæŒä¸åŠªåŠ›æ˜¯å› ä¸ºè¿˜æœ‰æ¢¦æƒ³ï¼Œå¯å¦¥åä¸æ”¾å¼ƒå¹¶ä¸æ˜¯ç»“æŸï¼Œè¿˜èƒ½å¹³å‡¡çš„æ´»ç€ï¼Œå°±æ€»è¿˜ä¼šæœ‰å¹³å‡¡çš„å¥‡è¿¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="éšç¬”" scheme="http://ckitakishi.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>å®è·µï¼šObjective-Cçš„å®å®šä¹‰</title>
    <link href="http://ckitakishi.com/2017/11/30/%E5%AE%9E%E8%B7%B5%EF%BC%9AObjective-C%E7%9A%84%E5%AE%8F%E5%AE%9A%E4%B9%89/"/>
    <id>http://ckitakishi.com/2017/11/30/å®è·µï¼šObjective-Cçš„å®å®šä¹‰/</id>
    <published>2017-11-30T13:17:13.000Z</published>
    <updated>2018-05-06T08:59:38.889Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ä¹‹å‰æŸä¸€å‘¨çš„ LT è¯é¢˜ã€‚</p></blockquote><p>å®å®šä¹‰åœ¨ Objective-C ä¸­å¯ä»¥è¯´æ˜¯è¢«å¹¿æ³›ä½¿ç”¨ã€‚å°±å®é™…æ¥è¯´ï¼Œç›®å‰ç»„å†…å¯¹ Enum, Singeleton, Log ç­‰éƒ½ä½¿ç”¨äº†å®æ¥è¿›è¡Œå®šä¹‰ã€‚ç©¶å…¶åŸå› ï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†ä¸ºäº†å‡å°‘é‡å¤ä»£ç ï¼Œæå‡å¼€å‘ä½“éªŒï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ¥æºäºå¯¹æ¡ä»¶ç¼–è¯‘çš„éœ€æ±‚ã€‚</p><p>æœ€æ—©çŸ¥é“å®å®šä¹‰æ˜¯åœ¨ C è¯­è¨€è¯¾æœ¬ä¸Šï¼Œç„¶åå°±æ˜¯ç¬”è¯•æ—¶å€™çš„å„ç§å®å±•å¼€ã€‚ä½†æ˜¯ç›´åˆ°æŠ•å…¥é¡¹ç›®å¼€å‘ä¹‹åæ‰ç®—æ˜¯ç¨å¾®ç†è§£äº†ä¸€äº›å®çš„å¼ºå¤§ä¸è„†å¼±ã€‚æ‰€ä»¥å¾ˆæƒ³ç®€å•è°ˆä¸€è°ˆ Objective-C çš„å®å®šä¹‰å®è·µã€‚</p><h2 id="å…³äºå®"><a href="#å…³äºå®" class="headerlink" title="å…³äºå®"></a>å…³äºå®</h2><p>å®å±äº C é¢„å¤„ç†çš„ä¸€éƒ¨åˆ†ï¼ŒC++ï¼ŒObjective-C ä¹Ÿä¸€æ ·é€šç”¨ã€‚å®åˆ†ä¸ºä¸¤ç§ï¼Œå¯¹è±¡å® (<strong>Object-like</strong>) å’Œå‡½æ•°å® (<strong>Function-like</strong>)ã€‚é¡¾åæ€ä¹‰ï¼Œå¯¹è±¡å®ç±»ä¼¼äºæ•°æ®å¯¹è±¡ï¼Œå‡½æ•°å®ç±»ä¼¼äºå‡½æ•°è°ƒç”¨ã€‚</p><a id="more"></a><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Object-like</span></span><br><span class="line"><span class="meta">#define HEIGHT 60</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Function-like</span></span><br><span class="line"><span class="meta">#define MIN(a, b) a <span class="meta-string">&lt; b ? a : b</span></span></span><br></pre></td></tr></table></figure><p>å‡½æ•°å®çœ‹èµ·æ¥å¯ä»¥è¯´æ˜¯ç›¸å½“ä¾¿åˆ©ï¼Œè€Œä¸”æ‰§è¡Œæ•ˆç‡è¿˜éå¸¸é«˜ã€‚ä½†æ˜¯åœ¨å®é™…è¿ç”¨ä¸­å¾ˆå¤šæ—¶å€™å¹¶ä¸æ¨èä½¿ç”¨ï¼Œæ¯”å¦‚å½“å‡ºç°è‡ªå¢è‡ªå‡è¿ç®—æ—¶ï¼Œä¸Šé¢çš„æœ€å°å€¼å°±å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œä½ ä¸èƒ½è¯´å®ƒæ˜¯é™·é˜±ï¼Œæ¯•ç«Ÿå®çš„å¼ºé¡¹å¹¶ä¸æ˜¯å¤æ‚çš„é€»è¾‘è¿ç®—ã€‚ä½†æ˜¯è‰ºé«˜äººèƒ†å¤§ï¼Œå¦‚æœèƒ½ç©å¾—è½¬ç”¨ä¸€ç”¨ä¹Ÿæ— å¦¨~</p><p>æ‰©å±•é˜…è¯»ï¼š<a href="https://gcc.gnu.org/onlinedocs/cpp/index.html#SEC_Contents" target="_blank" rel="noopener">The C Preprocessor</a></p><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><h3 id="å•ä¾‹çš„å®å®šä¹‰ï¼š"><a href="#å•ä¾‹çš„å®å®šä¹‰ï¼š" class="headerlink" title="å•ä¾‹çš„å®å®šä¹‰ï¼š"></a>å•ä¾‹çš„å®å®šä¹‰ï¼š</h3><p>ä½¿ç”¨äº†æ¡ä»¶ç¼–è¯‘ <code>#ifndef</code>ï¼Œæ¨èè¿™ç§å†™æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å®šä¹‰ cell çš„é«˜åº¦æ—¶æœ€å¥½è¿™ä¹ˆåšï¼Œé˜²æ­¢å¤šé‡å®šä¹‰ã€‚<br>è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å®ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#ifndef Singleton_h</span></span><br><span class="line"><span class="meta">#define Singleton_h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define SINGLETON_IMPL( classname )\</span></span><br><span class="line">+ (classname *)sharedInstance\</span><br><span class="line">&#123;\</span><br><span class="line"><span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;\</span><br><span class="line"><span class="keyword">static</span> classname *_sharedInstance = <span class="literal">nil</span>;\</span><br><span class="line"><span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;\</span><br><span class="line">_sharedInstance = [[[<span class="keyword">self</span> <span class="keyword">class</span>] alloc] init];\</span><br><span class="line">&#125;);\</span><br><span class="line"><span class="keyword">return</span> _sharedInstance;\</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#define SINGLETON_DEFINE( classname )\</span></span><br><span class="line">+ (classname *)sharedInstance;</span><br><span class="line"></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ä¾‹ï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ClassName.h</span><br><span class="line"><span class="function"><span class="title">SINGLETON_DEFINE</span><span class="params">(ClassName)</span></span></span><br><span class="line"></span><br><span class="line">ClassName.m</span><br><span class="line"><span class="function"><span class="title">SINGLETON_IMPL</span><span class="params">(ClassName)</span></span></span><br><span class="line"></span><br><span class="line">OtherClass:</span><br><span class="line">[ClassName sharedInstance].property</span><br></pre></td></tr></table></figure><h3 id="2-enumçš„å®å®šä¹‰ï¼š"><a href="#2-enumçš„å®å®šä¹‰ï¼š" class="headerlink" title="2. enumçš„å®å®šä¹‰ï¼š"></a>2. enumçš„å®å®šä¹‰ï¼š</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#ifndef APP_ENUM</span></span><br><span class="line"><span class="meta">#define APP_ENUM( name_ ) \</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> name_ : <span class="built_in">NSInteger</span> name_; \</span><br><span class="line"><span class="keyword">enum</span> name_ : <span class="built_in">NSInteger</span></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ä¾‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">APP_ENUM( EnumName ) &#123;</span><br><span class="line">    EnumNameA,</span><br><span class="line">    EnumNameB</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="3-LOGçš„å®å®šä¹‰ï¼š"><a href="#3-LOGçš„å®å®šä¹‰ï¼š" class="headerlink" title="3. LOGçš„å®å®šä¹‰ï¼š"></a>3. LOGçš„å®å®šä¹‰ï¼š</h3><p>å½“ä¸”ä»…å½“ç‰ˆæœ¬ä¸ºå¼€å‘ç‰ˆæˆ–å†…éƒ¨æµ‹è¯•ç‰ˆæ—¶è¾“å‡º logã€‚è¿™é‡Œçš„ <code>__PRETTY_FUNCTION__</code>, <code>__LINE__</code> éƒ½æ˜¯ C ä¸­å·²å®šä¹‰çš„å‡½æ•°å®ï¼Œåˆ†åˆ«è¡¨ç¤ºå‡½æ•°å’Œè¡Œæ•°ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#ifdef DEBUG</span></span><br><span class="line"><span class="meta">#define LOG(A, ...) NSLog(@<span class="meta-string">"DEBUG: %s:%d:%@"</span>, __PRETTY_FUNCTION__,__LINE__,[NSString stringWithFormat:A, ## __VA_ARGS__]);</span></span><br><span class="line"><span class="meta">#elif defined ALPHA</span></span><br><span class="line"><span class="meta">#define LOG(A, ...) NSLog(@<span class="meta-string">"ALPHA: %s:%d:%@"</span>, __PRETTY_FUNCTION__,__LINE__,[NSString stringWithFormat:A, ## __VA_ARGS__]);</span></span><br><span class="line"><span class="meta">#else</span></span><br><span class="line"><span class="meta">#define LOG(...)</span></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ä¾‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LOG(<span class="string">@"test"</span>);</span><br></pre></td></tr></table></figure><p>å‡ºåŠ›ï¼š</p><p>[Time] [App Name] [Build Configuration] [File Name + Method] [Line Number] log </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2017-11-27 09:35:19.099 AppName[59272:2201737] DEBUG: -[ClassName method]:330: test</span><br></pre></td></tr></table></figure><h3 id="4-TODO-amp-FIX-çš„å®å®šä¹‰ï¼š"><a href="#4-TODO-amp-FIX-çš„å®å®šä¹‰ï¼š" class="headerlink" title="4. TODO&amp;FIX çš„å®å®šä¹‰ï¼š"></a>4. TODO&amp;FIX çš„å®å®šä¹‰ï¼š</h3><p>å‚è€ƒè‡ª <a href="http://blog.sunnyxx.com/2015/03/01/todo-macro/" target="_blank" rel="noopener">todo-macro</a>ï¼Œå¾ˆæœ‰æ„æ€çš„ä¸€ç¯‡æ–‡ç« ï¼Œé€šè¿‡å®å®šä¹‰å°† <code>#pragma message (&quot;msg&quot;)</code> è¿›è¡Œæ‰©å±•è€Œä½œä¸º TODO ä½¿ç”¨ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define STRINGIFY(S) #S</span></span><br><span class="line"><span class="meta">#define DEFER_STRINGIFY(S) STRINGIFY(S)</span></span><br><span class="line"><span class="meta">#define PRAGMA_MESSAGE(MSG) _Pragma(STRINGIFY(message(MSG)))</span></span><br><span class="line"><span class="meta">#define FORMATTED_MESSAGE(MSG) <span class="meta-string">"[TODO-"</span> DEFER_STRINGIFY(__COUNTER__) <span class="meta-string">"]"</span> MSG <span class="meta-string">" Line:"</span> DEFER_STRINGIFY(__LINE__)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define TODO(MSG) PRAGMA_MESSAGE(FORMATTED_MESSAGE(MSG))</span></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨ä¾‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@TODO(<span class="string">"test code 1"</span>)</span><br><span class="line">@TODO(<span class="string">"test code 2"</span>)</span><br></pre></td></tr></table></figure><h2 id="æ‚è°ˆ"><a href="#æ‚è°ˆ" class="headerlink" title="æ‚è°ˆ"></a>æ‚è°ˆ</h2><p>å½“è¦ä½¿ç”¨å®æ—¶ï¼ŒåŠ¡å¿…è¦è€ƒè™‘æœ‰æ²¡æœ‰å¿…è¦ï¼Œåˆä¸åˆç†ï¼Œä¼šä¸ä¼šæœ‰å‰¯ä½œç”¨ã€‚ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼šå½“éœ€è¦å®šä¹‰ä¸€ä¸ªå¸¸é‡æ—¶ï¼Œå®å®Œå…¨å¯ä»¥ï¼Œä½†æ˜¯æ›´å¥½çš„é€‰æ‹©æ˜¯ä½¿ç”¨ <code>const</code> å…³é”®å­—ã€‚å€ŸåŠ©å®æ¥å®šä¹‰å¸¸é‡æœ€å¤§çš„ç—›ç‚¹å°±æ˜¯ä¸åŒ…å«ç±»å‹ä¿¡æ¯ï¼Œ<code>const</code> ä¸ä»…å¼¥è¡¥äº†ç±»å‹ä¿¡æ¯ç¼ºå¤±çš„é—®é¢˜ï¼Œè€Œä¸”åœ¨è®¿é—®æ§åˆ¶æƒé™è¿™å—ä¹Ÿè¡¨ç°åœ°æ›´å¥½ã€‚</p><p>æœ€åè¿˜æƒ³æä¸€å¥ <code>typedef</code>ï¼Œäººä»¬å¸¸å¸¸ä¼šæ‹¿å®ƒå’Œ <code>#define</code> ç›¸æ¯”è¾ƒï¼Œçœ‹èµ·æ¥ç”¨æ³•å¾ˆç›¸ä¼¼ï¼Œå…¶å®æœ¬è´¨ä¸Šæœ‰è›®å¤§åŒºåˆ«ï¼Œ<code>typedef</code> æ˜¯åœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œå¤„ç†çš„å…³é”®å­—ã€‚ç”¨é€”ä¸Šæ¥è¯´ï¼Œ<code>typedef</code> æ›´å¤šæ˜¯ç”¨äºåˆ›å»ºç±»å‹åˆ«åï¼Œä¸Šè¿° Enum çš„å®å®šä¹‰ä¸­ä¸ºæšä¸¾æŒ‡å®šåˆ«åå°±ä¾èµ–äº <code>typedef</code>ã€‚</p><p>ä»¥ä¸Šã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;ä¹‹å‰æŸä¸€å‘¨çš„ LT è¯é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®å®šä¹‰åœ¨ Objective-C ä¸­å¯ä»¥è¯´æ˜¯è¢«å¹¿æ³›ä½¿ç”¨ã€‚å°±å®é™…æ¥è¯´ï¼Œç›®å‰ç»„å†…å¯¹ Enum, Singeleton, Log ç­‰éƒ½ä½¿ç”¨äº†å®æ¥è¿›è¡Œå®šä¹‰ã€‚ç©¶å…¶åŸå› ï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸ºäº†ä¸ºäº†å‡å°‘é‡å¤ä»£ç ï¼Œæå‡å¼€å‘ä½“éªŒï¼Œè¿˜æœ‰ä¸€éƒ¨åˆ†æ¥æºäºå¯¹æ¡ä»¶ç¼–è¯‘çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;æœ€æ—©çŸ¥é“å®å®šä¹‰æ˜¯åœ¨ C è¯­è¨€è¯¾æœ¬ä¸Šï¼Œç„¶åå°±æ˜¯ç¬”è¯•æ—¶å€™çš„å„ç§å®å±•å¼€ã€‚ä½†æ˜¯ç›´åˆ°æŠ•å…¥é¡¹ç›®å¼€å‘ä¹‹åæ‰ç®—æ˜¯ç¨å¾®ç†è§£äº†ä¸€äº›å®çš„å¼ºå¤§ä¸è„†å¼±ã€‚æ‰€ä»¥å¾ˆæƒ³ç®€å•è°ˆä¸€è°ˆ Objective-C çš„å®å®šä¹‰å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&quot;å…³äºå®&quot;&gt;&lt;a href=&quot;#å…³äºå®&quot; class=&quot;headerlink&quot; title=&quot;å…³äºå®&quot;&gt;&lt;/a&gt;å…³äºå®&lt;/h2&gt;&lt;p&gt;å®å±äº C é¢„å¤„ç†çš„ä¸€éƒ¨åˆ†ï¼ŒC++ï¼ŒObjective-C ä¹Ÿä¸€æ ·é€šç”¨ã€‚å®åˆ†ä¸ºä¸¤ç§ï¼Œå¯¹è±¡å® (&lt;strong&gt;Object-like&lt;/strong&gt;) å’Œå‡½æ•°å® (&lt;strong&gt;Function-like&lt;/strong&gt;)ã€‚é¡¾åæ€ä¹‰ï¼Œå¯¹è±¡å®ç±»ä¼¼äºæ•°æ®å¯¹è±¡ï¼Œå‡½æ•°å®ç±»ä¼¼äºå‡½æ•°è°ƒç”¨ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
      <category term="LT" scheme="http://ckitakishi.com/tags/LT/"/>
    
      <category term="Objective-C" scheme="http://ckitakishi.com/tags/Objective-C/"/>
    
  </entry>
  
  <entry>
    <title>Storyboard å’Œ Xib çš„â€œæŠ‰æ‹©â€</title>
    <link href="http://ckitakishi.com/2017/09/24/Storyboard-%E4%B8%8E-Xib-%E7%9A%84%E2%80%9C%E6%8A%89%E6%8B%A9%E2%80%9D/"/>
    <id>http://ckitakishi.com/2017/09/24/Storyboard-ä¸-Xib-çš„â€œæŠ‰æ‹©â€/</id>
    <published>2017-09-24T13:33:29.000Z</published>
    <updated>2017-10-23T15:37:04.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è¿‘æœŸå¼€å§‹è¿›è¡Œä¸€ä¸ªæ–°é¡¹ç›®çš„åŸå‹åˆ¶ä½œåŠå…¶ç»“æ„è®¾è®¡ï¼Œæ‰“ç®—æŠŠä¸€äº›å¿ƒè·¯å†ç¨‹è®°å½•ä¸‹æ¥ï¼Œéšä¾¿å…ˆç»™å®ƒå–ä¸ªåå­—å«åšï¼š<strong>P-OOP</strong>ã€‚</p></blockquote><p>æ¯”èµ·æ‰‹å†™ UIï¼Œâ€œæ‹–æ§ä»¶â€çš„ Storyboard å’Œ Xib ä¼¼ä¹ä¸€ç›´éƒ½æ›´æŠ•æˆ‘æ‰€å¥½ã€‚ä¸è¿‡å³ä½¿æ˜¯ Storyboard å’Œ Xib ä¹‹é—´ï¼Œä¼¼ä¹ä¹Ÿè¿˜æ˜¯å¤šå¤šå°‘å°‘æœ‰ä¸€äº›çº·äº‰ã€‚</p><h2 id="Storyboard-amp-Xib"><a href="#Storyboard-amp-Xib" class="headerlink" title="Storyboard &amp; Xib"></a>Storyboard &amp; Xib</h2><p>å…¬å¸ (å¹´ä¹…å¤±ä¿®) çš„ iOS Guidelines ä¸­å†™ç€ä¸€å¥è¯ï¼š</p><blockquote><p>è¿›è¡Œæºç ç®¡ç†æ—¶ Storyboard ææ˜“å¯¼è‡´å†²çªï¼Œå›¢é˜Ÿå¼€å‘æ—¶ï¼Œå„ç”»é¢ä¸å„ç»„ä»¶å°½å¯èƒ½ä½¿ç”¨ Xib è¿›è¡Œå®ç°ã€‚</p></blockquote><p>å¯¹æ­¤æˆ‘ä¸€ç›´æŠ±ç€èµå¦ä¸¤è®ºçš„è§‚ç‚¹ã€‚åœ¨å®é™…å·¥ä½œæ—¶ï¼ŒåŒä¸€ Storyboard ä¸­å­˜åœ¨å¤§é‡ ViewController ååˆ†å®¹æ˜“å†²çªæ˜¯ä¸€ä¸ªä¸äº‰çš„äº‹å®ï¼Œæ‰è¿›è¿™ä¸ªå‘çš„äººæœ‰å¯èƒ½è¿˜è¿›è¡Œè¿‡ xml ä¿®æ­£ã€‚ä½†æ˜¯è¿™ä¸ªé”… Storyboard ä¸èƒŒã€‚ä¸€éƒ¨åˆ†äººå¯èƒ½å› æ­¤é€‰æ‹©äº†å¼ƒ Storyboard ä» Xib ä¹‹è·¯ï¼Œæˆ‘ä¹Ÿä¸€åº¦å¾˜å¾Šæ˜¯å¦è¿™æ‰æ˜¯æ­£é“ã€‚ä½†æ˜¯å¾ˆæ˜¾ç„¶çš„æ˜¯ï¼ŒStoryboard ä»ä¸€å¼€å§‹å°±ä¸æ˜¯ä¸ºäº†ä»£æ›¿ Xib è€Œæ¥ã€‚</p><p>é™¤äº† UI è®¾ç½®çš„ç›¸ä¼¼éƒ¨åˆ†ä»¥å¤–ï¼ŒStoryboard æ›´é‡è§†ç”»é¢ä¹‹é—´çš„å…³è”å’Œè¿ç§»ï¼Œè€Œ Xib ä½œä¸ºé€šç”¨ç»„ä»¶çš„æ¨¡ç‰ˆåº”è¯¥æ˜¯ä¸äºŒçš„é€‰æ‹©ã€‚</p><a id="more"></a><p>åœ¨ P-OOP ä¸­ï¼Œå°†ä¼šå­˜åœ¨å¤§é‡çš„ dialogï¼Œå°½ç®¡å¯ä»¥å¾ˆå®¹æ˜“çš„ä½¿ç”¨ Present Modally æ¥å®ç°ï¼Œä¸è¿‡ä¸ºäº†ä¿æŒç³»åˆ—äº§å“çš„é£æ ¼ä¸€è‡´æ€§ï¼Œéœ€è¦è€ƒè™‘å¦‚ä½•ä»¥æ¯”è¾ƒå¥½çš„æ–¹å¼æ¥å®ç°å…±é€šçš„ header å’Œ footer æ ·å¼ã€‚è€ƒè™‘è¿‡å¾ˆå¤šæ–¹æ¡ˆï¼Œæ¯”å¦‚ï¼š</p><ol><li>å°† footer å’Œ header é›†æˆåœ¨åŒä¸€ä¸ª view ä¸­ï¼Œå¹¶æ·»åŠ ä¸€ä¸ª content viewï¼Œæœ€ç»ˆåœ¨æŸ controlelr view ä¸­å°†ä¸Šè¿° view ä¸å®é™…ä»å¦ä¸€ä¸ª xib ä¸­è½½å…¥çš„ content view ç»„åˆï¼Œå®Œæˆç»„è£…ã€‚ä½†æ˜¯å­˜åœ¨ä¸€ä¸ªæ¯”è¾ƒæ˜¾è‘—çš„ç¼ºç‚¹ï¼Œå®é™…å¯è§çš„ controller view æ‰€å‘ˆç°çš„å†…å®¹å¹¶ä¸æ˜¯å¾ˆç›´è§‚ï¼Œæœç„¶è¿˜æ˜¯å¿…é¡»çœ‹ä»£ç æ‰èƒ½æ¢³ç†æ¸…æ¥šã€‚ </li><li>å°† footer å’Œ header ä»¥åŠä¸€ä¸ª content view é›†æˆåœ¨åŒä¸€ä¸ª controller view ä¸­ã€‚åœ¨ä»£ç ä¸­æŒ‰ç…§è¦æ±‚è½½å…¥ contentï¼Œä»£ç†æ–¹æ³•ä¹‹ç±»å˜å¾—å®¹æ˜“ç®¡ç†äº†ä¸€äº›ï¼Œä½†æ˜¯æ›´ç³Ÿç³•çš„æ˜¯è¿™ä¸ª controller çš„ä»£ç ç»ˆå°†æˆä¸ºåƒåœ¾åœºçš„ã€‚ã€‚ã€‚é‚£åŠ å…¥ç»§æ‰¿å‘¢ï¼Ÿæœ‰äº›å°é¢˜å¤§åšï¼Ÿ</li></ol><p>æœç„¶ç®€æ´æ‰æ˜¯æœ€é«˜çš„ï¼Œå°† footer å’Œ header å®Œå…¨ç‹¬ç«‹ä¸ºä¸¤ä¸ª viewï¼ŒæŒ‰éœ€è½½å…¥ã€‚ç»“åˆ @IBInspectable å’Œ @IBDesignable å¯ä»¥è¯´æ˜¯æ¯”è¾ƒå®Œç¾äº†ï¼Œä»ç”»é¢è®¾è®¡åˆ°è¿ç§»ç­‰éƒ½å¾ˆæ¸…æ™°ã€‚ä¸è¶³ä¸€æçš„å°ç¼ºç‚¹æ˜¯ä½¿ç”¨æ—¶å€™çš„ auto layout çš„è®¾ç½®å¯èƒ½å­˜åœ¨ä¸€äº›é‡å¤æ“ä½œ (æ¯”å¦‚ Auto Layout ä¹‹ç±»çš„)ï¼Œè‹¥è€ƒè™‘ Model é™¤äº† form sheet ä»¥å¤–å¯ä»¥æ˜¯ full screenï¼Œåè€…éœ€è¦åœ¨é¡¶éƒ¨é¢å¤–é¢„ç•™ 20pxï¼Œè¿™æ ·ä¸€æ¥åè€Œå˜å¾—å·§å¦™äº†ã€‚</p><p>ä¹Ÿè®¸è¿‡å‡ å¤©è‡ªå·±çš„æƒ³æ³•åˆå‘ç”Ÿäº†ç»†å¾®å˜åŒ–ï¼Œä½†ç®€æ´æ¸…æ™°æ— è®ºä½•æ—¶éƒ½ä¸ä¼šå¤ªåã€‚</p><h2 id="å¿ƒå¾—"><a href="#å¿ƒå¾—" class="headerlink" title="å¿ƒå¾—"></a>å¿ƒå¾—</h2><h3 id="Storyboard-Reference"><a href="#Storyboard-Reference" class="headerlink" title="Storyboard Reference"></a>Storyboard Reference</h3><p>Storyboard å®¹æ˜“å¼•å‘å†²çªï¼Œè¿™å¥è¯åœ¨ Storyboard Reference é¢å‰æ˜¯ä¸æˆç«‹çš„ã€‚</p><p><strong>Storyboard Reference</strong> ç¬¬ä¸€æ¬¡å‡ºç°åœ¨ Xcode 7ï¼Œå¯ä»¥ä»ç»„ä»¶åº“ä¸­æ‰¾åˆ°å®ƒï¼Œå¹¶è‡ªè¡Œè¿›è¡Œé…ç½®å’Œå…³è”ï¼Œååˆ†ç®€å•ï¼Œæ— éœ€èµ˜è¿°ã€‚å³ä½¿æ˜¯ä¸€ä¸ªå·²ç»å®Œæˆä¸”ååˆ†ç¹æ‚çš„ Storyboardï¼Œä¹Ÿå¯ä»¥é€‰ä¸­æƒ³è¦åˆ†ç¦»çš„ Storyboardï¼Œé€šè¿‡ <strong>Editor -&gt; Refactor to Storyboard</strong> æ¥å®ç°ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨äº†ä¸¤ä¸ª Container Viewï¼Œé»˜è®¤æƒ…å†µä¸‹æ­¤æ—¶ç”»é¢ä¸­å­˜åœ¨ä¸‰ä¸ª controllerï¼Œå¯¹å…¶è¿›è¡Œåˆ†ç¦»ä¹‹åï¼Œå˜æˆäº†è¿™æ ·ï¼š</p><p><img src="/images/Storyboard_reference.png" alt="Storyboard Reference"></p><h3 id="Loadable-Nib"><a href="#Loadable-Nib" class="headerlink" title="Loadable Nib"></a>Loadable Nib</h3><p>å°† Xib ç»„ä»¶çš„è½½å…¥åè®®åŒ–ï¼Œå…¶ä¸­ä¸€ä¸ªç›®çš„æ˜¯ä¸ºäº†ç±»å‹å®‰å…¨ï¼Œå¦ä¸€ä¸ªç›®çš„æ˜¯ä¸ºäº†å‡å°‘é‡å¤ä»£ç ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Loadable</span>: <span class="title">class</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> nibName: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Loadable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> nibName: <span class="type">String</span> &#123; <span class="keyword">return</span> <span class="type">String</span>(describing: <span class="type">Self</span>.<span class="keyword">self</span>) &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹ <code>UIView</code> è¿›è¡Œæ‰©å±•ï¼Œè¦æ±‚è¢«è½½å…¥çš„ view éµå¾ª <code>Loadable</code> åè®®ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">instantiateFromNib</span>&lt;T: UIView&gt;<span class="params">(<span class="number">_</span>:T.<span class="keyword">Type</span>)</span></span> -&gt; <span class="type">T</span> <span class="keyword">where</span> <span class="type">T</span>: <span class="type">Loadable</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> nib = <span class="type">UINib</span>(nibName: <span class="type">T</span>.nibName, bundle: <span class="literal">nil</span>).instantiate(withOwner: <span class="literal">nil</span>, options: <span class="literal">nil</span>).first <span class="keyword">as</span>? <span class="type">T</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> nib</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">fatalError</span>(<span class="string">"Nib \(T.nibName) is not exist ?!"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">instantiateFromNibOwner</span>&lt;T: UIView&gt;<span class="params">(<span class="number">_</span>:T.<span class="keyword">Type</span>)</span></span> <span class="keyword">where</span> <span class="type">T</span>: <span class="type">Loadable</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> bundle = <span class="type">Bundle</span>(<span class="keyword">for</span>: type(of: <span class="keyword">self</span>))</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> nib = <span class="type">UINib</span>(nibName: <span class="type">T</span>.nibName, bundle: bundle).instantiate(withOwner: <span class="keyword">self</span>, options: <span class="literal">nil</span>).first <span class="keyword">as</span>? <span class="type">UIView</span> &#123;</span><br><span class="line">            nib.frame = <span class="keyword">self</span>.bounds</span><br><span class="line">            nib.autoresizingMask = [.flexibleWidth, .flexibleHeight]</span><br><span class="line">            <span class="keyword">self</span>.addSubview(nib)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">fatalError</span>(<span class="string">"Nib \(T.nibName) is not exist ?!"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®€æ´çš„åˆå§‹åŒ–ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> view:<span class="type">ClassName</span> = <span class="keyword">self</span>.instantiateFromNib(<span class="type">ClassName</span>.<span class="keyword">self</span>)</span><br><span class="line"><span class="keyword">self</span>.instantiateFromNibOwner(<span class="type">ClassName</span>.<span class="keyword">self</span>)</span><br></pre></td></tr></table></figure><p>åæ¥å‘ç°ä¸€ä¸ªåä¸º <a href="https://github.com/AliSoftware/Reusable" target="_blank" rel="noopener">Reusable</a> çš„åº“ï¼Œå…¶ä¸­é™¤äº†è¿™ä¸€éƒ¨åˆ†çš„å®ç°ä¹‹å¤–ï¼Œè¿˜æœ‰å¯¹ Cell ç”šè‡³æ˜¯ Storyboard å’Œ ViewController çš„é‡ç”¨ï¼Œååˆ†å¼ºå¤§ã€‚</p><p>å›åˆ°è¿™ä¸€éƒ¨åˆ†çš„å®ç°ï¼Œç•¥æœ‰åŒºåˆ«çš„åœ°æ–¹åœ¨äºï¼š</p><ol><li><em>Reusable</em> åœ¨åˆå§‹åŒ– nib çš„æ—¶å€™é€‰æ‹©äº†æ‰©å±•åè®®ã€‚</li><li>åœ¨ <em>Fileâ€™s Owner</em> çš„æƒ…å†µä¸‹ï¼Œ<em>Reusable</em> ä½¿ç”¨äº† Auto Layoutã€‚ç”±äºæˆ‘ä»¬çš„ <strong>P-OOP</strong> é¡¹ç›®å¯¹åº”çš„è®¾å¤‡å°ºå¯¸ä¸å¤šï¼Œæ‰€ä»¥åƒæ˜¯éƒ¨åˆ†å¼¹å‡ºæ¡†å°±æ²¡æœ‰å¯¹åº” Auto Layoutï¼Œæ‰€ä»¥å°±ç›´æ¥ä» frame çš„å°ºå¯¸ä¸‹æ‰‹äº†ã€‚ã€‚</li></ol><blockquote><p>è¿½è®°ï¼šæŠŠè¿™éƒ¨åˆ†å®ç°å’Œä¾‹å­æäº†å‡ºæ¥æ”¾åœ¨äº† <a href="https://github.com/Ckitakishi/LoadableNib" target="_blank" rel="noopener">Github</a> ä¸Šï½</p></blockquote><h3 id="IBDesignable-å’Œ-IBInspectable"><a href="#IBDesignable-å’Œ-IBInspectable" class="headerlink" title="@IBDesignable å’Œ @IBInspectable"></a>@IBDesignable å’Œ @IBInspectable</h3><p><strong>@IBDesignable</strong> å¯ä»¥ç”¨äºè§†å›¾çš„å®æ—¶æ¸²æŸ“ï¼Œ<strong>@IBInspectable</strong> å¯ä»¥ç”¨äºå®šä¹‰è¿è¡Œæ—¶å±æ€§ã€‚</p><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼šé¦–å…ˆåœ¨å®šä¹‰ä¸€ä¸ª <code>DialogHeaderView</code>ï¼Œæ ‡è®°ä¸º <code>@IBDesignable</code>ï¼Œå°†å®ƒçš„ <code>headerTitle</code> å±æ€§è®¾ç½®ä¸º <code>@IBInspectable</code>ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@IBDesignable</span> <span class="class"><span class="keyword">class</span> <span class="title">DialogHeaderView</span>: <span class="title">UIView</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> headerTitle: <span class="type">String</span> = <span class="string">""</span> &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            navigationBar.topItem?.title = <span class="keyword">self</span>.headerTitle</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç›®æ ‡è§†å›¾æ·»åŠ ä¸€ä¸ª UIViewï¼Œå¹¶å°†ç±»å®šä¹‰ä¸º <code>DialogHeaderView</code>ï¼Œæ­¤æ—¶åœ¨ <em>Attribuite Inspector</em> ä¸­å¯ä»¥ç›´æ¥è®¾ç½®å±æ€§ï¼š</p><p><img src="/images/IB1.png" alt="IB1"></p><p>ä¹‹åå³ä¼šåæ˜ åœ¨è¿è¡Œæ—¶å±æ€§æ ä¸­ï¼š</p><p><img src="/images/IB2.png" alt="IB2"></p><p>ä¸è¿‡æ„å»ºå¤±è´¥çš„æ—¶å€™è¿˜æ˜¯æŒºå¤šçš„ï¼Œä¸å¦¨é€šè¿‡ <strong>Editor -&gt; Debug Selected Views</strong> æ¥è°ƒè¯•ä¸€ä¸‹é€‰ä¸­çš„è§†å›¾ã€‚</p><h3 id="ç±»å‹å®‰å…¨"><a href="#ç±»å‹å®‰å…¨" class="headerlink" title="ç±»å‹å®‰å…¨"></a>ç±»å‹å®‰å…¨</h3><p>é™¤äº†å®šä¹‰ä¸Šé¢çš„ <code>Loadable</code> åè®®ï¼Œåœ¨ç±»å‹å®‰å…¨è¿™ä¸ªé—®é¢˜ä¸Šè¿˜å¯ä»¥è¿›ä¸€æ­¥å†åšä¸€äº›å·¥ä½œã€‚</p><p>å­˜åœ¨ Storyboardï¼ŒSegue çš„å®šä¹‰ä¹Ÿå°±ä¼šæœ‰å­˜åœ¨ï¼Œç”±äº identifier çš„å®šä¹‰æ˜¯å­—ç¬¦ä¸²ï¼Œé˜²ä¸èƒœé˜²ï¼Œä¸åŒ¹é…çš„æƒ…å†µè¿˜æ˜¯ä¼šæ—¶è€Œå‘ç”Ÿã€‚è¿™æ—¶å€™ä½¿ç”¨ <a href="https://github.com/mac-cain13/R.swift" target="_blank" rel="noopener">R.swift</a> å°±èƒ½å¤Ÿå®Œå…¨è§£æ¶ˆè¿™ä¸ªæ‹…å¿§äº†ã€‚</p><p><em>R.swift</em> è¢«å¹¿æ³›ä½¿ç”¨äºè§£å†³ç±»å‹å®‰å…¨çš„é—®é¢˜ï¼Œå›¾ç‰‡ã€å­—ä½“ã€æœ¬åœ°åŒ–ç­‰ç­‰éƒ½å—ç›Šäºæ­¤ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿‘æœŸå¼€å§‹è¿›è¡Œä¸€ä¸ªæ–°é¡¹ç›®çš„åŸå‹åˆ¶ä½œåŠå…¶ç»“æ„è®¾è®¡ï¼Œæ‰“ç®—æŠŠä¸€äº›å¿ƒè·¯å†ç¨‹è®°å½•ä¸‹æ¥ï¼Œéšä¾¿å…ˆç»™å®ƒå–ä¸ªåå­—å«åšï¼š&lt;strong&gt;P-OOP&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¯”èµ·æ‰‹å†™ UIï¼Œâ€œæ‹–æ§ä»¶â€çš„ Storyboard å’Œ Xib ä¼¼ä¹ä¸€ç›´éƒ½æ›´æŠ•æˆ‘æ‰€å¥½ã€‚ä¸è¿‡å³ä½¿æ˜¯ Storyboard å’Œ Xib ä¹‹é—´ï¼Œä¼¼ä¹ä¹Ÿè¿˜æ˜¯å¤šå¤šå°‘å°‘æœ‰ä¸€äº›çº·äº‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Storyboard-amp-Xib&quot;&gt;&lt;a href=&quot;#Storyboard-amp-Xib&quot; class=&quot;headerlink&quot; title=&quot;Storyboard &amp;amp; Xib&quot;&gt;&lt;/a&gt;Storyboard &amp;amp; Xib&lt;/h2&gt;&lt;p&gt;å…¬å¸ (å¹´ä¹…å¤±ä¿®) çš„ iOS Guidelines ä¸­å†™ç€ä¸€å¥è¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿›è¡Œæºç ç®¡ç†æ—¶ Storyboard ææ˜“å¯¼è‡´å†²çªï¼Œå›¢é˜Ÿå¼€å‘æ—¶ï¼Œå„ç”»é¢ä¸å„ç»„ä»¶å°½å¯èƒ½ä½¿ç”¨ Xib è¿›è¡Œå®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¯¹æ­¤æˆ‘ä¸€ç›´æŠ±ç€èµå¦ä¸¤è®ºçš„è§‚ç‚¹ã€‚åœ¨å®é™…å·¥ä½œæ—¶ï¼ŒåŒä¸€ Storyboard ä¸­å­˜åœ¨å¤§é‡ ViewController ååˆ†å®¹æ˜“å†²çªæ˜¯ä¸€ä¸ªä¸äº‰çš„äº‹å®ï¼Œæ‰è¿›è¿™ä¸ªå‘çš„äººæœ‰å¯èƒ½è¿˜è¿›è¡Œè¿‡ xml ä¿®æ­£ã€‚ä½†æ˜¯è¿™ä¸ªé”… Storyboard ä¸èƒŒã€‚ä¸€éƒ¨åˆ†äººå¯èƒ½å› æ­¤é€‰æ‹©äº†å¼ƒ Storyboard ä» Xib ä¹‹è·¯ï¼Œæˆ‘ä¹Ÿä¸€åº¦å¾˜å¾Šæ˜¯å¦è¿™æ‰æ˜¯æ­£é“ã€‚ä½†æ˜¯å¾ˆæ˜¾ç„¶çš„æ˜¯ï¼ŒStoryboard ä»ä¸€å¼€å§‹å°±ä¸æ˜¯ä¸ºäº†ä»£æ›¿ Xib è€Œæ¥ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº† UI è®¾ç½®çš„ç›¸ä¼¼éƒ¨åˆ†ä»¥å¤–ï¼ŒStoryboard æ›´é‡è§†ç”»é¢ä¹‹é—´çš„å…³è”å’Œè¿ç§»ï¼Œè€Œ Xib ä½œä¸ºé€šç”¨ç»„ä»¶çš„æ¨¡ç‰ˆåº”è¯¥æ˜¯ä¸äºŒçš„é€‰æ‹©ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
      <category term="Swift" scheme="http://ckitakishi.com/tags/Swift/"/>
    
      <category term="P-OOPè®°å½•" scheme="http://ckitakishi.com/tags/P-OOP%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>viewWillAppear æ‚è°ˆ</title>
    <link href="http://ckitakishi.com/2017/07/26/viewWillAppear-%E6%9D%82%E8%B0%88/"/>
    <id>http://ckitakishi.com/2017/07/26/viewWillAppear-æ‚è°ˆ/</id>
    <published>2017-07-26T14:48:22.000Z</published>
    <updated>2017-10-07T15:58:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä½œä¸º view çš„çŠ¶æ€ä¹‹ä¸€ï¼Œ<code>viewWillAppear</code> çš„å…³æ³¨ç‡æé«˜ï¼Œæ‰€ä»¥å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„â€¦æˆ‘ä»¬éƒ½çŸ¥é“å®ƒä¼šåœ¨ view æ¯ä¸€æ¬¡å°†è¦å‡†å¤‡å‡ºç°ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥å¸¸å¸¸å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ä¸€äº›åŸºæœ¬æ•°æ®ã€‚</p><p>å‰ä¸¤å‘¨èŠ±äº†ä¸€ç‚¹ç‚¹æ—¶é—´é‡æ„äº†ç»„é‡Œçš„æŸä¸ªå°åº”ç”¨ï¼Œå‰å¼€å‘è€…æ–°æ‰‹ä¸Šè·¯ï¼Œæ„Ÿè§‰ä¸å°‘ä»£ç å€¼å¾—æ¨æ•²ã€‚åœ¨ debug çš„æ—¶å€™å‘ç°åº”ç”¨ä¸€åˆ°åå°å°±è‡ªåŠ¨é€€å‡ºäº†ï¼Œæ ¹æœ¬æ— æ³•çœ‹å®ƒåœ¨åå°çš„æ´»åŠ¨ï¼Œéœ‡æƒŠä¹‹ä½™å‘ç° info.plist çš„ <code>Application does not run in background</code> è¢«è®¾ç½®ä¸ºäº† <code>YES</code>â€¦åå¤æ£æ‘©æ•´ä¸ªåº”ç”¨çš„åŠŸèƒ½ä¹Ÿä¸çŸ¥é“è¿™ä¹ˆåšç›®çš„ä½•åœ¨ï¼Œäºæ˜¯æœæ–­å°†å…¶æ”¹ä¸ºäº† <code>NO</code>ã€‚</p><p>ä¸è¿‡äº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€æ®µå…³äº viewWillAppear çš„æ‚è°ˆã€‚</p><a id="more"></a><p>åæ¥éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ€»ç®—å‘ç°ç¦æ­¢åå°è¿è¡Œçš„â€œç”¨å¤„â€äº†ã€‚æŸä¸ª view æœ‰ä¸€ä¸ªç›¸å¯¹ç‰¹æ®Šçš„éœ€æ±‚ï¼Œåº”ç”¨ä»åå°å›åˆ°å‰å°æ—¶éœ€è¦é‡æ–°åˆå§‹åŒ–å®ƒçš„æ•°æ®ï¼Œå°½ç®¡åœ¨ <code>viewWillAppear</code> ä¸­å‡†å¤‡äº†å®Œå¤‡çš„åˆå§‹åŒ–ä»£ç ï¼Œä½†æ˜¯è¿™ä¸ªçŠ¶æ€çš„è¿ç§»å¹¶ä¸èƒ½è®¤ä¸ºæ˜¯ view å³å°†å‡ºç°ï¼Œæ¯•ç«Ÿ view å¹¶æ²¡æœ‰æ¶ˆå¤±ï¼Œä¸€ç›´éƒ½æ˜¯æ˜¾ç¤ºçŠ¶æ€ã€‚æ‰€ä»¥è‡ªç„¶ <code>viewWillAppear</code> å°±ä¸ä¼šè¢«è°ƒç”¨ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯è¿™ä½åŒå­¦æƒ³äº†è¿™ä¸ªåŠæ³•ã€‚</p><p>ä¸å¾—ä¸æ‰¿è®¤è¿™ä¸ªæ€è·¯è¿˜æ˜¯å¾ˆæ¸…å¥‡çš„ï¼Œä½†æ˜¯ä¸ºäº†é¿å…ä¸€äº›ä¸å¿…è¦çš„éº»çƒ¦ï¼Œæˆ‘è¿˜æ˜¯å†³å®šæ”¹ç”¨å¸¸è§„è§£å†³æ–¹æ¡ˆã€‚åœ¨åº”ç”¨é‡å›å‰å°çš„æ—¶å€™å‘ä¸€ä¸ªé€šçŸ¥ï¼Œå‘Šè¯‰ view å¯ä»¥é‡æ–°åˆå§‹åŒ–æ•°æ®äº†ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ <code>viewWillAppear</code> ä¸­æ·»åŠ ä¸€ä¸ªå¯¹ <code>.UIApplicationWillEnterForeground</code> é€šçŸ¥çš„è§‚å¯Ÿåº”è¯¥æ˜¯ä¸€ä¸ªä¸äºŒçš„é€‰æ‹©ï¼Œå®ƒä¹Ÿå¸¸å¸¸è¢«ç”¨äºå¤„ç†åƒæ˜¯ç”µè¯å¼ºåˆ¶ä¸­æ–­ä¹‹ç±»çš„éœ€æ±‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NotificationCenter</span>.<span class="keyword">default</span>.addObserver(<span class="keyword">self</span>, selector: #selector(willEnterForeground), name: .<span class="type">UIApplicationWillEnterForeground</span>, object: <span class="literal">nil</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ¡ˆå¯æ˜¯è¯´æ˜¯æ¯”è¾ƒä¼˜é›…çš„ï¼Œä¸è¿‡ä¸å¯ä»¥å¿˜è®°ç§»é™¤é€šçŸ¥ã€‚å…³äºå£°æ˜å‘¨æœŸè¿™äº›äº‹å„¿ï¼Œæœ‰æ—¶å€™çœŸæ˜¯æ“ç¢äº†å¿ƒ~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½œä¸º view çš„çŠ¶æ€ä¹‹ä¸€ï¼Œ&lt;code&gt;viewWillAppear&lt;/code&gt; çš„å…³æ³¨ç‡æé«˜ï¼Œæ‰€ä»¥å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„â€¦æˆ‘ä»¬éƒ½çŸ¥é“å®ƒä¼šåœ¨ view æ¯ä¸€æ¬¡å°†è¦å‡†å¤‡å‡ºç°ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥å¸¸å¸¸å¯ä»¥ç”¨æ¥åˆå§‹åŒ–ä¸€äº›åŸºæœ¬æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å‰ä¸¤å‘¨èŠ±äº†ä¸€ç‚¹ç‚¹æ—¶é—´é‡æ„äº†ç»„é‡Œçš„æŸä¸ªå°åº”ç”¨ï¼Œå‰å¼€å‘è€…æ–°æ‰‹ä¸Šè·¯ï¼Œæ„Ÿè§‰ä¸å°‘ä»£ç å€¼å¾—æ¨æ•²ã€‚åœ¨ debug çš„æ—¶å€™å‘ç°åº”ç”¨ä¸€åˆ°åå°å°±è‡ªåŠ¨é€€å‡ºäº†ï¼Œæ ¹æœ¬æ— æ³•çœ‹å®ƒåœ¨åå°çš„æ´»åŠ¨ï¼Œéœ‡æƒŠä¹‹ä½™å‘ç° info.plist çš„ &lt;code&gt;Application does not run in background&lt;/code&gt; è¢«è®¾ç½®ä¸ºäº† &lt;code&gt;YES&lt;/code&gt;â€¦åå¤æ£æ‘©æ•´ä¸ªåº”ç”¨çš„åŠŸèƒ½ä¹Ÿä¸çŸ¥é“è¿™ä¹ˆåšç›®çš„ä½•åœ¨ï¼Œäºæ˜¯æœæ–­å°†å…¶æ”¹ä¸ºäº† &lt;code&gt;NO&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡äº‹æƒ…å¹¶æ²¡æœ‰é‚£ä¹ˆç®€å•ï¼Œæ¯•ç«Ÿè¿™æ˜¯ä¸€æ®µå…³äº viewWillAppear çš„æ‚è°ˆã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>Thread Sanitizer</title>
    <link href="http://ckitakishi.com/2017/05/13/Thread-Sanitizer/"/>
    <id>http://ckitakishi.com/2017/05/13/Thread-Sanitizer/</id>
    <published>2017-05-13T05:39:19.000Z</published>
    <updated>2017-10-07T15:58:51.000Z</updated>
    
    <content type="html"><![CDATA[<p><em>ä½œä¸ºä¸€é¡¹æƒ¯ä¾‹ï¼Œå‘¨äº”æ—©æ™¨ï¼Œç»„å†…æ¯ä¸ªäººéƒ½è¦è¿›è¡Œä¸‰åˆ†é’Ÿçš„ LTï¼Œå°†è‡ªå·±æ„Ÿå…´è¶£çš„è¯é¢˜åˆ†äº«ç»™å¤§å®¶ã€‚</em></p><p>ä¹‹å‰åœ¨ä¿®æ­£å¹¶ä¼˜åŒ–åº”ç”¨å†…çº¿ç¨‹ç®¡ç†çš„æ—¶å€™ç”¨äº† <strong>Thread Sanitizer</strong> åŠŸèƒ½ï¼Œäºæ˜¯ä»¥æ­¤ä¸ºæœºç»™å¤§å®¶ç®€å•ä»‹ç»äº†ä¸€ä¸‹ã€‚æ›´å¤šè¯¦ç»†çš„å†…å®¹ï¼Œå¯ä»¥çœ‹ä¸€çœ‹ 2016 WWDC çš„ <a href="https://developer.apple.com/videos/play/wwdc2016/412/" target="_blank" rel="noopener">Session 412</a>ã€‚çº¿ç¨‹é—®é¢˜å‘ç”Ÿçš„æ—¶å€™ä¸€èˆ¬è¿˜æ˜¯æŒºç„¦è™‘çš„ï¼Œå› ä¸ºæ—¶é—´æ•æ„Ÿï¼Œæœ‰æ—¶å€™å†ç°å¾ˆå›°éš¾ï¼Œè‡ªç„¶å°±ä¸æ˜“è°ƒé€‚ã€‚<strong>TSan</strong> èƒ½å¤Ÿå‘ç°ä¸€äº›é—®é¢˜ï¼Œè¯¸å¦‚ Keynote é‡Œæåˆ°çš„ï¼š</p><blockquote><p>Use of uninitialized mutexes<br>Thread leaks (missing pthred_join)<br>Unsafe calls in signal handlers (ex:malloc)<br>Unlock from wrong thread<br>Data races</p></blockquote><p>å› ä¸ºåœ¨å®é™…ä¸­é‡åˆ°è¿‡ï¼Œè€Œä¸”æ„Ÿè§‰å‘ç”Ÿæ¦‚ç‡ç›¸å¯¹è¾ƒé«˜ï¼Œæ‰€ä»¥åªå±•å¼€è¯´ä¸€ä¸‹æœ€åä¸€é¡¹ï¼šæ•°æ®ç«äº‰ã€‚æ•°æ®ç«äº‰å‘ç”Ÿçš„åŸºæœ¬æ¡ä»¶æ˜¯å¤šä¸ªçº¿ç¨‹åœ¨åŒæ—¶è®¿é—®åŒä¸€å—å†…å­˜ï¼Œå¹¶ä¸”å…¶ä¸­è‡³å°‘åˆä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿›è¡Œçš„æ˜¯å†™æ“ä½œã€‚å®é™…ä¸­å¸¸å¸¸è¡¨ç°ä¸ºæ•°æ®ä¸æ•´åˆï¼Œäº¦æˆ–æ˜¯åº”ç”¨å´©æºƒã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[context performBlock:^&#123;</span><br><span class="line">    if (result &amp;&amp; context) &#123;</span><br><span class="line">        result = [self persistentSaveContext:context]; // 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br><span class="line">return result; // 2</span><br></pre></td></tr></table></figure><p><code>result</code> åœ¨ 1 å’Œ 2 ä¸¤ä¸ªåœ°æ–¹å‘ç”Ÿäº†ç«äº‰ã€‚åœ¨ 1 è¿›è¡Œå†™æ“ä½œä¹‹å‰ï¼Œæœ‰å¯èƒ½å¤„äºä¸åŒçº¿ç¨‹çš„ 2 æ—©å·²ç»è¿”å›äº†ï¼Œè¿™æ ·æ•°æ®å°±å‘ç”Ÿäº†ä¸æ•´åˆã€‚</p><p>æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚è¯´ï¼šç”±å¼‚æ­¥æ“ä½œå˜ä¸ºåŒæ­¥æ“ä½œï¼Œæˆ–æ˜¯æ”¹å˜å†™æ“ä½œçš„æ—¶é—´ç‚¹ã€‚è¿™é‡Œé‡‡å–äº†ç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œä½¿ç”¨åŒæ ·ç”¨é€”çš„åŒæ­¥æ–¹æ³• <code>performBlockAndWait</code> æ¥å–ä»£ <code>performBlock</code>ï¼Œè¿™æ ·ä»¥æ¥ï¼Œæ•°æ®ç«äº‰çš„é—®é¢˜ä¹Ÿå°±è‡ªç„¶è€Œç„¶è§£å†³äº†ã€‚ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[context performBlockAndWait:^&#123;</span><br><span class="line">    if (result &amp;&amp; context) &#123;</span><br><span class="line">        result = [self persistentSaveContext:context]; // 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br><span class="line">return result; // 2</span><br></pre></td></tr></table></figure><p>ç”±äº <strong>TSan</strong> æ˜¯ç»Ÿåˆåœ¨ç¼–è¯‘å™¨ (Clang) å±‚é¢çš„ï¼Œæ‰€ä»¥å½“ä½¿ç”¨ Swift æ¥ç¼–å†™æœåŠ¡å™¨ä»£ç çš„æ—¶å€™ï¼Œå®Œå…¨å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨å®ƒï¼š</p><p><img src="/images/datarace.png" alt="Tsan command"></p><p>P.S.ç›®å‰ <strong>TSan</strong> åªæ”¯æŒ 64bit çš„æ¨¡æ‹Ÿå™¨åŠ macOS è‡ªèº«ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;ä½œä¸ºä¸€é¡¹æƒ¯ä¾‹ï¼Œå‘¨äº”æ—©æ™¨ï¼Œç»„å†…æ¯ä¸ªäººéƒ½è¦è¿›è¡Œä¸‰åˆ†é’Ÿçš„ LTï¼Œå°†è‡ªå·±æ„Ÿå…´è¶£çš„è¯é¢˜åˆ†äº«ç»™å¤§å®¶ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä¹‹å‰åœ¨ä¿®æ­£å¹¶ä¼˜åŒ–åº”ç”¨å†…çº¿ç¨‹ç®¡ç†çš„æ—¶å€™ç”¨äº† &lt;strong&gt;Thread Sanitizer&lt;/strong&gt; åŠŸèƒ½ï¼Œäºæ˜¯ä»¥æ­¤ä¸ºæœºç»™å¤§å®¶ç®€å•ä»‹ç»äº†ä¸€ä¸‹ã€‚æ›´å¤šè¯¦ç»†çš„å†…å®¹ï¼Œå¯ä»¥çœ‹ä¸€çœ‹ 2016 WWDC çš„ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2016/412/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Session 412&lt;/a&gt;ã€‚çº¿ç¨‹é—®é¢˜å‘ç”Ÿçš„æ—¶å€™ä¸€èˆ¬è¿˜æ˜¯æŒºç„¦è™‘çš„ï¼Œå› ä¸ºæ—¶é—´æ•æ„Ÿï¼Œæœ‰æ—¶å€™å†ç°å¾ˆå›°éš¾ï¼Œè‡ªç„¶å°±ä¸æ˜“è°ƒé€‚ã€‚&lt;strong&gt;TSan&lt;/strong&gt; èƒ½å¤Ÿå‘ç°ä¸€äº›é—®é¢˜ï¼Œè¯¸å¦‚ Keynote é‡Œæåˆ°çš„ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Use of uninitialized mutexes&lt;br&gt;Thread leaks (missing pthred_join)&lt;br&gt;Unsafe calls in signal handlers (ex:malloc)&lt;br&gt;Unlock from wrong thread&lt;br&gt;Data races&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å› ä¸ºåœ¨å®é™…ä¸­é‡åˆ°è¿‡ï¼Œè€Œä¸”æ„Ÿè§‰å‘ç”Ÿæ¦‚ç‡ç›¸å¯¹è¾ƒé«˜ï¼Œæ‰€ä»¥åªå±•å¼€è¯´ä¸€ä¸‹æœ€åä¸€é¡¹ï¼šæ•°æ®ç«äº‰ã€‚æ•°æ®ç«äº‰å‘ç”Ÿçš„åŸºæœ¬æ¡ä»¶æ˜¯å¤šä¸ªçº¿ç¨‹åœ¨åŒæ—¶è®¿é—®åŒä¸€å—å†…å­˜ï¼Œå¹¶ä¸”å…¶ä¸­è‡³å°‘åˆä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿›è¡Œçš„æ˜¯å†™æ“ä½œã€‚å®é™…ä¸­å¸¸å¸¸è¡¨ç°ä¸ºæ•°æ®ä¸æ•´åˆï¼Œäº¦æˆ–æ˜¯åº”ç”¨å´©æºƒã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
      <category term="LT" scheme="http://ckitakishi.com/tags/LT/"/>
    
  </entry>
  
  <entry>
    <title>Swift App:ä¸€ä¸ªæ„æ–™ä¹‹å¤–çš„å´©æºƒç†ç”±</title>
    <link href="http://ckitakishi.com/2017/02/13/Swift-App-%E4%B8%80%E4%B8%AA%E6%84%8F%E6%96%99%E4%B9%8B%E5%A4%96%E7%9A%84%E5%B4%A9%E6%BA%83%E7%90%86%E7%94%B1/"/>
    <id>http://ckitakishi.com/2017/02/13/Swift-App-ä¸€ä¸ªæ„æ–™ä¹‹å¤–çš„å´©æºƒç†ç”±/</id>
    <published>2017-02-13T14:10:51.000Z</published>
    <updated>2017-10-07T15:58:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ä¸€ä¸ªå‘ç”Ÿåœ¨å»å¹´å¹´åº•çš„æ•…äº‹ã€‚èƒŒæ™¯æ˜¯ä¸€ä¸ªæ–°è§„ Swift åº”ç”¨å¤„äºå‡†å¤‡å‘å¸ƒé˜¶æ®µï¼Œè¯ä¹¦ç”±å¼€å‘æµ‹è¯•ç”¨æ›´æ›¿ä¸ºå‘å¸ƒç”¨ï¼Œ è¿™æ˜¯ä¸¤ä»½ Team ä¸åŒçš„ä¼ä¸šç‰ˆè¯ä¹¦ã€‚</p><p>åº”ç”¨åŠŸèƒ½æœ¬èº«ååˆ†ç®€å•ï¼Œå¼€å‘æµ‹è¯•é˜¶æ®µä¹Ÿæ¯”è¾ƒé¡ºåˆ©ï¼Œå‡ ä¹æ²¡æœ‰å‘ç”Ÿå´©æºƒã€‚ç„¶è€Œåœ¨æ›´æ›¿è¯ä¹¦ä¹‹åï¼ŒçœŸæœºæµ‹è¯•åº”ç”¨æ—¶å´é™·å…¥äº†æ— é™å´©æºƒçš„å¢ƒåœ°ã€‚</p><a id="more"></a><p>Log ç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">dyld</span>: Library not <span class="attribute">loaded</span>: <span class="variable">@rpath</span>/libswiftCore.dylib</span><br><span class="line">  Referenced <span class="attribute">from</span>: ...</span><br><span class="line">  <span class="attribute">Reason</span>: no suitable image found.  Did <span class="attribute">find</span>:</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><p>æœ‰å¾ˆå¤šåŸå› ä¼šå¯¼è‡´æç¤ºè¿™ä¸ªé”™è¯¯ï¼Œä½œä¸º Trouble Shooting è®°å½•ä¸‹æ¥ï¼š</p><ul><li>å¯èƒ½å­˜åœ¨ç¼“å­˜ï¼Œ<strong>Clean</strong> å·¥ç¨‹</li><li>å¾ˆå¤šæ—¶å€™è¯¥é—®é¢˜å‘ç”Ÿåœ¨ Swift ä¸ Objective-C æ··ç¼–çš„æ—¶å€™ï¼Œæ‰€ä»¥éœ€è¦æ£€æŸ¥ <em>Building Setting</em> ä¸­ <em>Embeedded Content Contains Swift Code</em> çš„è®¾ç½®æ˜¯å¦å·²ç»ä¸º <strong>YES</strong>ã€‚</li><li>ä¾ç„¶æ˜¯é…ç½®ï¼Œæ£€æŸ¥ <em>Building Setting</em> ä¸­çš„ <em>Runpath Search Paths</em> æ˜¯å¦æ­£ç¡®ï¼Œé€šå¸¸æ˜¯ï¼š<strong>@executable_path/Frameworks</strong>ã€‚</li><li>é‡ç½®è¯ä¹¦ (æ³¨é”€å†æ–°å»º) ã€‚</li></ul><p>å®é™…çš„ç”Ÿäº§è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆ check äº†å‰ä¸‰é¡¹ï¼Œæœ€ç»ˆå¼ºçƒˆæ€€ç–‘æ˜¯è¯ä¹¦é—®é¢˜ã€‚å…³äº â€œlibswiftCore.dylib å´©æºƒâ€œè¿™ä¸ªè¯é¢˜ï¼Œå¾ˆå®¹æ˜“èƒ½çœ‹åˆ°è¿™ç¯‡ <a href="https://developer.apple.com/library/content/qa/qa1886/_index.html" target="_blank" rel="noopener">Q&amp;A</a>ï¼Œå…¶ä¸­æåˆ°è¦è¿è¡Œ Swift åº”ç”¨å¿…é¡»ä½¿ç”¨ iOS 8 Released ä¹‹ååˆ›å»ºçš„è¯ä¹¦ã€‚å¯¹æ¯”æ‰‹ä¸­çš„ä¸¤ä»½è¯ä¹¦ï¼Œé™¤äº† Team ä¸åŒä¹‹å¤–ï¼Œæœ€å¤§çš„å·®åˆ«åœ¨äºåˆ›å»ºæ—¶é—´ï¼Œåˆ†åˆ«ä¸º 2016 å¹´å¤å¤©ï¼Œå’Œ 2014 å¹´å¤å¤©ã€‚æ‰€ä»¥æ›´æ–°è¯ä¹¦ä¹‹åï¼Œé—®é¢˜ä¹Ÿå¹¸è¿åœ°è§£å†³äº†ã€‚</p><p>å…³äº libswiftCore.dylib æ–‡ä»¶è¿˜æƒ³å†å¤šæ‰¯å‡ å¥ï¼Œçœ‹åå­—å°±èƒ½å¤ŸçŒœåˆ°æ˜¯ Swift åŠ¨æ€åº“ï¼Œå…·ä½“è¯´æ¥å®ƒå…¶å®æ˜¯ Swift çš„è¿è¡Œæ—¶åº“ï¼Œä½†æ˜¯è¯¥æ–‡ä»¶å’Œè¯ä¹¦æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼ŸåŸå› åœ¨äºç›®å‰ Swift çš„ç‰ˆæœ¬å‡çº§è¿˜ä¸ç¨³å®šï¼Œå¦‚æœå°†è¿™äº›è¿è¡Œæ—¶åº“ç›´æ¥æ”¾åˆ°ç³»ç»Ÿä¸­ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´æ¯æ¬¡ Swift å‡çº§éƒ½å¯¼è‡´åº”ç”¨ä¸å†èƒ½å¤Ÿä½¿ç”¨ï¼Œè€Œä½œä¸ºè¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼ŒApple é€‰æ‹©å°†è¿è¡Œæ—¶åº“æ‰“åŒ…è¿›åº”ç”¨ä¸­ï¼Œè¿™æ ·å°±ä¿è¯äº†å¼€å‘ä¸åº”ç”¨çš„ Swift ç‰ˆæœ¬ä¸€è‡´ã€‚ç”±äº libswiftCore.dylib å±äºåº”ç”¨çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯éœ€è¦ç­¾åçš„ï¼Œè€Œåƒä¸Šä¸€æ®µæ‰€è¯´ï¼Œèƒ½å¤Ÿä¸º Swift çš„è¿è¡Œæ—¶åº“ç­¾åçš„è¯ä¹¦å¿…é¡»åˆ›å»ºäº iOS 8 Released ä¹‹åã€‚è¿™ä¸€åˆ‡ï¼Œéƒ½æ˜¯ä¸ºäº†æé«˜ Swift çš„å…¼å®¹æ€§ï¼Œå…³äºå…¼å®¹æ€§ï¼Œå¼ºçƒˆæ¨èè¿™æ¡ <a href="http://swifter.tips/compatibility/" target="_blank" rel="noopener">Tip</a>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå‘ç”Ÿåœ¨å»å¹´å¹´åº•çš„æ•…äº‹ã€‚èƒŒæ™¯æ˜¯ä¸€ä¸ªæ–°è§„ Swift åº”ç”¨å¤„äºå‡†å¤‡å‘å¸ƒé˜¶æ®µï¼Œè¯ä¹¦ç”±å¼€å‘æµ‹è¯•ç”¨æ›´æ›¿ä¸ºå‘å¸ƒç”¨ï¼Œ è¿™æ˜¯ä¸¤ä»½ Team ä¸åŒçš„ä¼ä¸šç‰ˆè¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;åº”ç”¨åŠŸèƒ½æœ¬èº«ååˆ†ç®€å•ï¼Œå¼€å‘æµ‹è¯•é˜¶æ®µä¹Ÿæ¯”è¾ƒé¡ºåˆ©ï¼Œå‡ ä¹æ²¡æœ‰å‘ç”Ÿå´©æºƒã€‚ç„¶è€Œåœ¨æ›´æ›¿è¯ä¹¦ä¹‹åï¼ŒçœŸæœºæµ‹è¯•åº”ç”¨æ—¶å´é™·å…¥äº†æ— é™å´©æºƒçš„å¢ƒåœ°ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>é‡æ–°å¯ç¨‹çš„ 2016</title>
    <link href="http://ckitakishi.com/2017/01/14/%E9%87%8D%E6%96%B0%E5%90%AF%E7%A8%8B%E7%9A%84-2016/"/>
    <id>http://ckitakishi.com/2017/01/14/é‡æ–°å¯ç¨‹çš„-2016/</id>
    <published>2017-01-14T10:23:17.000Z</published>
    <updated>2017-01-29T15:02:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>è½¬çœ¼ä¸€æœˆéƒ½å·²è¿‡åŠâ€¦å¦‚æœè¯´ 2015 äºæˆ‘è€Œè¨€æ˜¯æ‰¿å‰å¯åçš„ä¸€å¹´ï¼Œé‚£ 2016 å¤§æ¦‚ç®—æ˜¯é‡æ–°å¯ç¨‹çš„ä¸€å¹´ã€‚</p><h2 id="ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´"><a href="#ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´" class="headerlink" title="ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´"></a>ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´</h2><p>2016 æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªå®Œæ•´å·¥ä½œå¹´ï¼Œæœ‰åä¸å®Œçš„æ§½ï¼Œä¹Ÿæœ‰è¯´ä¸å°½çš„æ„Ÿè°¢ã€‚</p><a id="more"></a><p>è¿œç¦»å®¶ä¹¡ï¼Œè–ªæ°´ä¸å¯è§‚ï¼Œäº‹å¤šï¼Œè´£ä»»é‡ï¼Œæ²¡æœ‰é è°±çš„å·¥ä½œæ­æ¡£ï¼Œæ— æ•°æ¬¡è´¨ç–‘è‡ªå·±ä¸ºä»€ä¹ˆä¸æ—©ç‚¹åšä¸ªäº†æ–­ï¼Œä½†æ˜¯æ— æ³•å¦è®¤è‡ªå·±åœ¨æˆé•¿ï¼Œä¹Ÿå¾—åˆ°äº†ä¸€å®šç¨‹åº¦ä¸Šçš„å›æŠ¥ã€‚æ›¾ä¸€å¤œæ— çœ çš„æƒ³è¿‡ï¼Œå¥½å¤šäº‹ï¼Œæ—¶å€™æœªåˆ°ã€‚</p><p>å¹´åˆï¼Œå·¥ä½œé‡å¿ƒæ­£å¼ä»å‰ç«¯è½¬å› iOSï¼Œå……æ»¡äº†æœŸå¾…ã€‚ç„¶è€Œå¦‚æœçŸ¥é“æ³¨å®šæˆ‘ä¼šä¸€ä¸ªäººå­¤ç‹¬å¥‹æ–—ä¸€æ•´å¹´ï¼Œæˆ‘è¿˜ä¼šè¿™ä¹ˆæƒ³ä¹ˆï½æ²¡æœ‰ç­”æ¡ˆã€‚ä»æ¯” 0 å¤šä¸€ç‚¹çš„åŸºç¡€å¼€å§‹ï¼Œæäº†å¥½å¤šäº‹å„¿ï¼Œè¢«å˜²ç¬‘è¿‡æ—¥è¯­è¯´çš„çƒ‚ï¼Œè¢«ä»¥ç»éªŒä¸è¶³ä¸ºç”±ç”©è¿‡é”…â€¦å¾ˆå–œæ¬¢ä¸€ä¸ªè¯ï¼Œã€Œè³›å¦ä¸¡è«–ã€ï¼Œæœ¬æ„æ˜¯èµæˆä¸åå¯¹å¹¶å­˜ï¼Œä¸åˆ†ä¼˜åŠ£ã€‚æˆ‘å¹¶ä¸å®³æ€•è¢«åå¯¹ï¼Œè¢«å˜²ç¬‘ï¼ˆåæ­£æ²¡äººèƒ½åœ¨æˆ‘çš„ bgm é‡Œæ‰“è´¥æˆ‘å“ˆå“ˆå“ˆï¼Œåªæ€• 10 å¹´åè¿˜åƒæŸäº›äººä¸€æ ·æ´»åœ¨è‡ªå·±çš„å˜´é‡Œï¼Œæ´»åœ¨è‡ªå·±çš„ yy ä¸­ï¼ˆæ‘Šæ‰‹ã€‚</p><p>ä¸€å¹´çš„å‹¤å‹‰å·¥ä½œæ¢æ¥äº†ã€Œå¥¨åŠ±è³ã€ï¼Œå¼€å¿ƒï¼Œä½†æ˜¯æ›´æœŸå¾…ä¼˜ç§€çš„å›¢é˜Ÿï¼Œä¼˜ç§€çš„è‡ªå·±ã€‚</p><h2 id="è®¤çœŸçš„ç”Ÿæ´»"><a href="#è®¤çœŸçš„ç”Ÿæ´»" class="headerlink" title="è®¤çœŸçš„ç”Ÿæ´»"></a>è®¤çœŸçš„ç”Ÿæ´»</h2><p>è¿™ä¸€å¹´æ¥å¯¹æ—¶é—´ç®¡ç†è¿˜æ˜¯æ²¡æœ‰ä»€ä¹ˆæ¸…æ™°çš„æ¦‚å¿µï¼Œå¾ˆé—æ†¾ï¼Œå¾ˆé—æ†¾ã€‚</p><p>åšäº†ä¸€äº›æ—¶é—´æŠ•å…¥ä¸é‡‘é’±å›æŠ¥å¹¶ä¸æ˜¯é‚£ä¹ˆæˆæ­£æ¯”äº‹ï¼Œä½†æ˜¯äºæˆ‘è€Œè¨€ç»å¯¹æ˜¯è¿™ä¸€å¹´æœ€æ£’çš„äº‹æƒ…ä¹‹ä¸€ã€‚èƒ½å¤Ÿæœ‰å¹¸å‚ä¸ã€Šå‡½æ•°å¼ Swiftã€‹çš„ç¿»è¯‘ï¼Œäºæˆ‘è€Œè¨€ç»ä¸æ˜¯èƒ½å¤Ÿè¡¡é‡çš„è´¢å¯Œï¼Œå’Œä¼˜ç§€çš„äººä¸€èµ·ï¼Œæ€»ä¼šæƒ³æŠŠäº‹æƒ…åšçš„æ›´å¥½ä¸€ç‚¹ã€‚</p><p>è®¤è¯†äº†ä¸€ç¾¤çˆ±è¯»ä¹¦çš„äººï¼Œæ–‡å­¦ç´ å…»æµ…è–„çš„æˆ‘ï¼Œä¹Ÿç®—æ˜¯è¯»äº†ä¸€äº›ä¹¦ã€‚</p><p>ç”Ÿæ´»è¿‡å¾—æŒºä¸é”™ï¼Œï¼ˆè§‰å¾—ï¼‰åšé¥­è¿›é˜¶å•¦ï¼Œæ¸¸æ³³è¿›é˜¶å•¦ï¼Œæ‹ç…§ä¹Ÿè¿›é˜¶å•¦ï½</p><h2 id="æ–°å¹´æ„¿æœ›"><a href="#æ–°å¹´æ„¿æœ›" class="headerlink" title="æ–°å¹´æ„¿æœ›"></a>æ–°å¹´æ„¿æœ›</h2><p>ä¸ºå¼€æºç¤¾åŒºè´¡çŒ®åŠ›é‡<br>åˆé€‚çš„æ—¶æœºæ¢å·¥ä½œ</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è½¬çœ¼ä¸€æœˆéƒ½å·²è¿‡åŠâ€¦å¦‚æœè¯´ 2015 äºæˆ‘è€Œè¨€æ˜¯æ‰¿å‰å¯åçš„ä¸€å¹´ï¼Œé‚£ 2016 å¤§æ¦‚ç®—æ˜¯é‡æ–°å¯ç¨‹çš„ä¸€å¹´ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´&quot;&gt;&lt;/a&gt;ç¬¬ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œå¹´&lt;/h2&gt;&lt;p&gt;2016 æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªå®Œæ•´å·¥ä½œå¹´ï¼Œæœ‰åä¸å®Œçš„æ§½ï¼Œä¹Ÿæœ‰è¯´ä¸å°½çš„æ„Ÿè°¢ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="éšç¬”" scheme="http://ckitakishi.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Swift çš„å­—ç¬¦ä¸²å‰åç¼€åŒ¹é…</title>
    <link href="http://ckitakishi.com/2016/11/09/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%89%8D%E5%90%8E%E7%BC%80%E5%8C%B9%E9%85%8D/"/>
    <id>http://ckitakishi.com/2016/11/09/Swiftå­—ç¬¦ä¸²å‰åç¼€åŒ¹é…/</id>
    <published>2016-11-08T15:18:32.000Z</published>
    <updated>2017-10-07T15:58:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰ä¿®æ”¹äº†é¡¹ç›®ä¸­ä¸€ä¸ª increment search çš„ç»„ä»¶ï¼Œæœ€è¿‘åˆšå¥½åˆçœ‹åˆ°ä¸‹é¢˜ï¼Œäºæ˜¯æƒ³è¯´ä¸€è¯´å‰åç¼€åŒ¹é…çš„äº‹å„¿ï½</p><p><a href="https://leetcode.com/problems/longest-common-prefix/" target="_blank" rel="noopener">14. Longest Common Prefix</a></p><p>è¿™æ˜¯ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸²æ•°ç»„ï¼Œæ±‚æ‰€æœ‰å­—ç¬¦ä¸²æœ€é•¿å…¬æœ‰å‰ç¼€çš„é—®é¢˜ã€‚</p><p>ç›´æ¥ç”¨ <code>O(1)</code> çš„é¢å¤–ç©ºé—´æ¥å­˜å‚¨ä¸€ä¸ªæœ€é•¿å…¬æœ‰å‰ç¼€ï¼Œä¸€æ¬¡éå†åè¿”å›å‰ç¼€å­—ç¬¦ä¸²ã€‚è¿™ä¸ªæƒ³æ³•è‡ªç„¶åˆ°ä¸éœ€è¦å¤šåŠ è§£é‡Šï¼Œç„¶è€Œè¿™ä¹ˆä¸€å†™ç«Ÿç„¶å‡»è´¥äº† 100% çš„ Swift æäº¤ç»“æœâ€¦</p><p>æ‰€ä»¥ä¸å¾—ä¸æä¸€ä¸‹ååˆ†é«˜æ•ˆçš„ <code>hasPrefix(_:)</code> æ–¹æ³•ï¼Œå®ƒæ¥å—ä¸€ä¸ª <code>String</code> ç±»å‹çš„å‚æ•°å¹¶è¿”å› <code>Bool</code> å€¼ï¼Œè¿™é‡Œå­—ç¬¦ä¸²å¤§å°å†™æ•æ„Ÿï¼Œä¸”åŸºäº Unicode æ ‡å‡†ç­‰ä»·ã€‚æ­¤å¤–ï¼Œä¸ä¹‹å¯¹åº”ç”¨äºæ¯”è¾ƒåç¼€å­—ç¬¦ä¸²çš„æ–¹æ³•æ˜¯ <code>hasSuffix(_:)</code>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Unicode æ ‡å‡†ç­‰ä»·</span></span><br><span class="line"><span class="keyword">let</span> composedCafe = <span class="string">"CafÃ©"</span></span><br><span class="line"><span class="keyword">let</span> decomposedCafe = <span class="string">"Cafe\u&#123;0301&#125;"</span></span><br><span class="line"><span class="built_in">print</span>(cafe.hasPrefix(composedCafe))</span><br><span class="line"><span class="comment">// Prints "true"</span></span><br><span class="line"><span class="built_in">print</span>(cafe.hasPrefix(decomposedCafe))</span><br><span class="line"><span class="comment">// Prints "true"</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/Ckitakishi/Daily/blob/master/LeetCode14_LongestCommonPrefix.swift" target="_blank" rel="noopener"></a>                                                           </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¹‹å‰ä¿®æ”¹äº†é¡¹ç›®ä¸­ä¸€ä¸ª increment search çš„ç»„ä»¶ï¼Œæœ€è¿‘åˆšå¥½åˆçœ‹åˆ°ä¸‹é¢˜ï¼Œäºæ˜¯æƒ³è¯´ä¸€è¯´å‰åç¼€åŒ¹é…çš„äº‹å„¿ï½&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://leetcode.com/problems/longest-common-prefix/&quot; target=&quot;_
      
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="LeetCode" scheme="http://ckitakishi.com/tags/LeetCode/"/>
    
      <category term="è¦šæ›¸" scheme="http://ckitakishi.com/tags/%E8%A6%9A%E6%9B%B8/"/>
    
  </entry>
  
  <entry>
    <title>iOS çš„çœ‹é—¨ç‹—æœºåˆ¶</title>
    <link href="http://ckitakishi.com/2016/08/17/WatchDog-%E6%9C%BA%E5%88%B6/"/>
    <id>http://ckitakishi.com/2016/08/17/WatchDog-æœºåˆ¶/</id>
    <published>2016-08-17T14:34:09.000Z</published>
    <updated>2017-10-07T15:58:17.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><p>åº”ç”¨ 100% Loss æ—¶å®Œå…¨æ— æ³•å¯åŠ¨ï¼Œä¸€ç›´å´©æºƒã€‚å½»åº•åˆ‡æ–­ç½‘ç»œè¿æ¥æ­£å¸¸å¯åŠ¨ï¼Œè°ƒè¯•æ¨¡å¼çŠ¶æ€ä¸‹ç­‰å¾…æ—¶é—´éå¸¸ä¹…ï¼Œä½†å¯ä»¥å¯åŠ¨ï¼Œå¹¶ä¼´éš UI å¾®å¡ã€‚å¼ºçƒˆçš„é¢„æ„Ÿè¿™æ˜¯çº¿ç¨‹é˜»å¡ã€‚å‰ä¸€æ®µæ—¶é—´è¢« Core Data Concurrency æŠ˜è…¾çš„å¤Ÿå‘›ï¼Œçœ‹è§çº¿ç¨‹é—®é¢˜å°±ç•¥æœ‰äº›å¿ƒæ…Œã€‚</p><a id="more"></a><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>é¦–å…ˆçœ‹äº† crash logï¼Œä¸€å¦‚çŒœæµ‹ï¼Œçš„ç¡®æ˜¯å¡åœ¨äº†ä¸»çº¿ç¨‹ï¼›æ„æ–™ä¹‹å¤–çš„æ˜¯ï¼Œæ— æ•°æ¬¡é—ªé€€åªç•™ä¸‹äº†ä¸€ä»½å´©æºƒæ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/images/watchdog.png" alt="WatchDog"></p><p>ç¬¬ä¸€æ¬¡è§ï¼Œè¯»äº†ä¸€äº›èµ„æ–™å¤§æ¦‚æ‰ç®—æ˜¯æ˜ç™½äº†è¿™æ˜¯æ€ä¹ˆä¸€å›äº‹ã€‚ä¸ºäº†é¿å…åº”ç”¨é™·å…¥é”™è¯¯çŠ¶æ€å¯¼è‡´ç•Œé¢æ— å“åº”ï¼ŒApple è®¾è®¡äº†çœ‹é—¨ç‹— (WatchDog) æœºåˆ¶ã€‚ä¸€æ—¦è¶…æ—¶ï¼Œå¼ºåˆ¶æ€æ­»è¿›ç¨‹ã€‚åœ¨ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼Œè§¦å‘çœ‹é—¨ç‹—æœºåˆ¶çš„è¶…æ—¶æ—¶é—´æœ‰æ‰€ä¸åŒï¼š</p><table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸ</th><th>è¶…æ—¶æ—¶é—´</th></tr></thead><tbody><tr><td>å¯åŠ¨ Launch</td><td>20 s</td></tr><tr><td>æ¢å¤ Resume</td><td>10 s</td></tr><tr><td>æ‚¬æŒ‚ Suspend</td><td>10 s</td></tr><tr><td>é€€å‡º Quit</td><td>6 s</td></tr><tr><td>åå° Background</td><td>10 min</td></tr></tbody></table><p>é¦–å…ˆè¯´ä¸€è¯´å¼‚å¸¸ç¼–ç ï¼Œä¹Ÿæ˜¯å¯“æ„é¢‡æ·±ã€‚8badf00d = ate bad foodï¼Œå¤§æ¦‚æ˜¯åœ¨è¯´çœ‹é—¨ç‹—åƒäº†åçš„é£Ÿç‰©æ‰€ä»¥æš´èµ°äº†ï¼Ÿï¼å¼‚å¸¸è®°å½•åˆ™è¡¨ç¤ºè¿™å¹¶ä¸æ˜¯ä¸€æ¬¡å´©æºƒï¼ˆé‚ªé­…ä¸€ç¬‘ï¼šå¼ºåˆ¶é€€å‡ºè€Œå·²ï¼‰ã€‚ä¿¡æ¯ä¸€æ æŒ‡å‡ºæ—¶é—´é™åˆ¶ä¸º 20 sã€‚ç»“åˆåº”ç”¨ä¸šåŠ¡æ¥çœ‹ï¼Œè¡¨å±‚åŸå› åœ¨äºï¼šæ¯æ¬¡å¯åŠ¨åº”ç”¨ï¼Œé¦–å…ˆè¿›è¡Œä¸€æ¬¡æ¨¡ç‰ˆåŒæ­¥ï¼Œåœ¨æ­¤ä¹‹å‰éœ€è¦æ£€æµ‹ç™»å½•çŠ¶å†µï¼Œé€šè¿‡ RunLoop åå¤å°è¯•ç›´åˆ°æ”¶åˆ°å“åº”ä¸ºæ­¢ã€‚ç„¶è€Œä¸å¹¸çš„æ˜¯ï¼Œè¿™ä¸€äº›éƒ½å‘ç”Ÿåœ¨ä¸»çº¿ç¨‹ã€‚</p><p>åŒæ­¥ç½‘ç»œè¯·æ±‚ï¼Œä¸»çº¿ç¨‹ï¼Œè¶…é•¿è¶…æ—¶æ—¶é—´ï¼Œæ»¡è¶³è¿™ä¸‰ç‚¹ï¼Œä¸€å®šåœºæ™¯ä¸‹å‡ ä¹å¿…ç„¶ä¼šè§¦å‘çœ‹é—¨ç‹—æœºåˆ¶ã€‚</p><h3 id="å¯¹ç­–"><a href="#å¯¹ç­–" class="headerlink" title="å¯¹ç­–"></a>å¯¹ç­–</h3><p>åˆç†è§£å†³æ–¹æ¡ˆï¼š</p><ol><li>å¼‚æ­¥ç½‘ç»œè¯·æ±‚ï¼šä¼˜ç‚¹å¾ˆå¤šï¼Œæœ€é‡è¦çš„æ˜¯å¯ä»¥è®©ä½ æ— å¿§æ— è™‘å®‰å…¨åœ°è®¿é—®ç½‘ç»œï¼Œè€Œæ— éœ€æ‹…å¿ƒçº¿ç¨‹ã€‚</li><li>åœ¨éä¸»çº¿ç¨‹ä¸­ä½¿ç”¨åŒæ­¥ç½‘ç»œè¯·æ±‚ï¼šå¦‚æœå¼‚æ­¥è¿è¡Œä½ çš„ç½‘ç»œä»£ç æ¯”ç™»å¤©è¿˜éš¾çš„è¯(ä¹Ÿè®¸ä½ çš„åº”ç”¨æ˜¯ä¸€ä¸ªåŸºäºåŒæ­¥ç½‘ç»œè¯·æ±‚çš„å¤§å‹ç§»æ¤é¡¹ç›®)ï¼Œé€€è€Œæ±‚æ¬¡ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æ¬¡çº§çº¿ç¨‹ä¸­è¿è¡ŒåŒæ­¥ä»£ç ï¼Œä¹Ÿå¯ä»¥é¿å…è§¦å‘çœ‹é—¨ç‹—æœºåˆ¶ã€‚</li></ol><p>æ­¤å¤–ï¼Œä¸€éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¾‹å¦‚è¿™æ¬¡é‡åˆ°ç™»å½•å’Œæ¨¡ç‰ˆåŒæ­¥æ—¶è§¦å‘çœ‹é—¨ç‹—ï¼Œäº‹å®ä¸Šï¼Œå³ä½¿åœ¨è¿ç”¨åˆ°æ¨¡ç‰ˆæ—¶å†æ¬¡è¯·æ±‚ä¹Ÿæ˜¯å‹‰å¼ºå¯è¡Œçš„ï¼Œå› æ­¤å§‘ä¸”å…ˆè·³è¿‡ç½‘ç»œè¯·æ±‚ä¹Ÿå¯ä»¥ã€‚æ­¤æ—¶ï¼Œè¿˜ä»¥ä½¿ç”¨ä¸€ç§æˆ‘è®¤ä¸ºæ˜¯ç›¸å¯¹æ¯”è¾ƒå·®çš„æ–¹æ¡ˆï¼š</p><ol start="3"><li>é€šè¿‡ RunLoop æ¥æ“æ§ä¸€åˆ‡ï¼Œä¸€æ—¦è¶…è¿‡æ—¢å®šçš„è¶…æ—¶æ—¶é—´ï¼Œå°±æç¤ºç”¨æˆ·é‡è¯•æˆ–è€…æš‚æ—¶å…ˆè·³è¿‡ç½‘ç»œè¯·æ±‚ã€‚</li></ol><p>åº”ç”¨çš„ç½‘ç»œéƒ¨åˆ†åŸºäºå…¬å¸çš„é€šç”¨æ¡†æ¶ï¼Œå› æ­¤ä¼˜å…ˆè€ƒè™‘åœ¨éä¸»çº¿ç¨‹ä¸­è¿›è¡Œç½‘ç»œè¯·æ±‚æ¥é¿å…è§¦å‘çœ‹é—¨ç‹—ã€‚</p><p>è‡³äºè°ƒè¯•æ¨¡å¼ä¸‹ä¸ºä»€ä¹ˆå¯ä»¥æ­£å¸¸å¯åŠ¨åº”ç”¨ï¼Œå®Œå…¨æ˜¯å› ä¸ºè¯¥æ¨¡å¼ä¸‹çœ‹é—¨ç‹—æœºåˆ¶å¤„äºç¦ç”¨çŠ¶æ€ã€‚</p><p>æ­¤å¤–ï¼Œé™¤äº†ç½‘ç»œæ“ä½œï¼ŒI/O è¯»å†™æ–‡ä»¶å’Œå¤§è§„æ¨¡è¿ç®—ç­‰è€—æ—¶ä»»åŠ¡ä¹Ÿææœ‰å¯èƒ½è§¦å‘çœ‹é—¨ç‹—æœºåˆ¶ã€‚åˆç†å¤„ç†çº¿ç¨‹ï¼Œä¼˜åŒ–è€—æ—¶ä»»åŠ¡ï¼Œå¾ˆå¤§ç¨‹åº¦èƒ½é¿å…ä¸ä½³ç”¨æˆ·ä½“éªŒã€‚</p><h4 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h4><ol><li><a href="https://developer.apple.com/library/ios/qa/qa1693/_index.html" target="_blank" rel="noopener">ä¸»çº¿ç¨‹ä¸Šçš„åŒæ­¥ç½‘ç»œè¯·æ±‚</a></li><li><a href="https://developer.apple.com/library/ios/qa/qa1592/_index.html" target="_blank" rel="noopener">è°ƒè¯•æ¨¡å¼ä¸å‘ç”Ÿå´©æºƒ</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;åº”ç”¨ 100% Loss æ—¶å®Œå…¨æ— æ³•å¯åŠ¨ï¼Œä¸€ç›´å´©æºƒã€‚å½»åº•åˆ‡æ–­ç½‘ç»œè¿æ¥æ­£å¸¸å¯åŠ¨ï¼Œè°ƒè¯•æ¨¡å¼çŠ¶æ€ä¸‹ç­‰å¾…æ—¶é—´éå¸¸ä¹…ï¼Œä½†å¯ä»¥å¯åŠ¨ï¼Œå¹¶ä¼´éš UI å¾®å¡ã€‚å¼ºçƒˆçš„é¢„æ„Ÿè¿™æ˜¯çº¿ç¨‹é˜»å¡ã€‚å‰ä¸€æ®µæ—¶é—´è¢« Core Data Concurrency æŠ˜è…¾çš„å¤Ÿå‘›ï¼Œçœ‹è§çº¿ç¨‹é—®é¢˜å°±ç•¥æœ‰äº›å¿ƒæ…Œã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="iOS" scheme="http://ckitakishi.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>æ²–ç¸„ä¸‰æ—¥</title>
    <link href="http://ckitakishi.com/2015/12/08/%E6%B2%96%E7%B8%84%E4%B8%89%E6%97%A5/"/>
    <id>http://ckitakishi.com/2015/12/08/æ²–ç¸„ä¸‰æ—¥/</id>
    <published>2015-12-08T13:56:53.000Z</published>
    <updated>2016-02-28T13:36:23.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœŸå¾…å·²ä¹…çš„å†²ç»³ä¹‹è¡Œå’Œä¸é‚£ä¹ˆæœŸå¾…çš„é©¬æ‹‰æ¾å¦‚æ­¤è€Œè‡³ã€‚å‡ºå‘çš„æ—©æ™¨é˜³å…‰ç‰¹åˆ«æ¸©æš–ï¼Œãƒ¢ãƒãƒ¬ãƒ¼ãƒ«çª—å­ä¸Šæ˜ å‡ºèº«å½±ï¼Œå¥½æš–ï½</p><a id="more"></a><p>åˆ°è¾¾å½“æ™šå’Œæ™´å„¿ä¸€èµ·åƒäº†å†²ç»³ãã°ï¼Œç»ˆäºåƒåˆ°æœ¬åœŸçš„äº†ï¼ˆç¬‘â€¦</p><p><img src="/images/soba.jpg" alt="æ²–ç¸„ãã°"></p><p>ä¸ºäº†è¿™æ¬¡çš„é©¬æ‹‰æ¾çš„å¹³å®‰..ä» 7 æœˆæ¸æ¸å¼€å§‹äº†ä¸ç§‘å­¦çš„ç»ƒä¹ ï¼Œç¬¬ä¸€æ¬¡æ—©æ™¨å‡ºå»è·‘äº† 2km<br>å°±ç´¯æˆç‹—ï¼Œæ¢å¤äº†å¥½å‡ å¤©ã€‚8 æœˆåº•å‚åŠ äº†æ˜†é©¬ 10kmï¼Œå¹¸è¿çš„è¾¾æˆï¼æ¥æ—¥åï¼Œè·‘è¿‡å°é“ï¼Œè·‘è¿‡è’å·æ²¿å²¸ï¼Œè·‘è¿‡çš‡å±…ï¼Œæ…¢æ…¢å–œæ¬¢ä¸Šäº†è·‘æ­¥çš„æ„Ÿè§‰ã€‚</p><p>æ¯ä¸€æ¬¡è·‘éƒ½æ˜¯åšæŒå†åšæŒï¼Œä¹Ÿè®¸è·Ÿè‡ªå·±è¯´è¿‡ä¸€ä¸‡éå†ï¼Œæ²¡æœ‰å®Œèµ›å¥½é—æ†¾â€¦ä¹Ÿè®¸æ˜¯ç»ƒä¹ ä¸è¶³ï¼Œä¹Ÿè®¸æ˜¯ FREE 4.0 FLYKNIT å¹¶ä¸å¤ªé€‚åˆè¶…é•¿è·ç¦»â€¦ä¸ç®¡æ€ä¹ˆè¯´ï¼Œå¯¹å¾—èµ·è‡ªå·±äº†ã€‚</p><p>å½“æ—¥ï¼Œèµ·åˆå¤©é«˜æ°”çˆ½ï¼Œåæ¥é£é›¨å¤§ä½œã€‚ä¸€è·¯ä¸Šåƒï¼Œè·‘ï¼Œåƒï¼Œè·‘ï¼Œå†²ç»³é»‘ç³–æ˜¯çœŸçš„å¾ˆå¥½åƒã€‚èµ›ç¨‹æœ€åé˜¶æ®µï¼Œé‡åˆ°çƒ­å¿ƒçš„å¤§å”å¸¦æˆ‘è·‘äº†ä¸€æ®µï¼Œä¸€ç›´è·Ÿæˆ‘è¯´åšæŒè·‘è¿˜èƒ½èµ¶å¾—ä¸Šå“Ÿï½ç„¶è€Œå¼±çˆ†äº†çš„æˆ‘è¿˜æ˜¯åœ¨æœ€ç»ˆï¼»è¿˜å‰© 1kmï¼½çš„åœ°æ–¹å¬åˆ°äº†ç»“æŸçš„ä¿¡å·ã€‚è¿åŠ¨åœºå…¥å£çš„çš„å¿—æ„¿è€…ä»¬å¤¹é“ç»™äº†æˆ‘ä»¬ï¼»æœ€åçš„å‡»æŒï¼½ï¼Œ6:15ï¼Œä»Šå¤©è·‘äº†è¿™ä¹ˆä¹…ï½</p><p><img src="/images/marathon.jpg" alt="é‚£è¦‡ãƒãƒ©ã‚½ãƒ³"></p><p>èµ›åç¬¬äºŒå¤©ï¼Œé€›æ°´æ—é¦†ï¼Œçœ‹æµ·ã€‚è¯ç©·çš„æˆ‘åªè¯´å¾—å‡ºä¸€ä¸ªå½¢å®¹è¯ï¼šç¾ã€‚</p><p>æ¥é¦†å¿…çœ‹çš„ã‚¸ãƒ³ãƒ™ã‚¨ã‚¶ãƒ¡ï¼Œåæ¥æ‰çŸ¥æ˜¯é²¸é²¨ã€‚ä¸€ç¬é—´æ„Ÿåˆ°è‡ªå·±çš„æ¸ºå°ã€‚</p><p><img src="/images/aquarium.jpg" alt="ç¾ã‚‰æµ·æ°´æ—é¤¨"></p><p>ä¸‰é¢ç¯æµ·çš„å²›ä¸Šï¼Œè‡ªå·±æ‹å©šçº±ç…§çš„æƒ…ä¾£ã€‚</p><p><img src="/images/sea.jpg" alt="æµ·"></p><p>æ›¾ç»çš„å‚å¤©å¤§æ ‘ï¼Œå¦‚ä»Šåˆæ˜¯å¦ä¸€ç§é£éŸµã€‚ä¸€èµ·ï¼Œä»»æµ·é£å¹ï½</p><p><img src="/images/sea2.jpg" alt="æµ·"></p><p>äºæˆ‘è€Œè¨€ï¼Œè¿™ä¸‰å¤©åˆæ˜¯ä¸€åœºæ´—ç¤¼ï¼Œåªæƒ³ä¸€ç”ŸåŠªåŠ›ï¼Œä¸€ç”Ÿè¢«çˆ±ã€‚ç”¨ä¸€å¥å¹¿å‘Šè¯­ä½œç»“å§ï¼Œ<strong>ã€Œè‹¦ã—ã„ã‘ã©ã€å¹¸ã›ã€</strong>ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœŸå¾…å·²ä¹…çš„å†²ç»³ä¹‹è¡Œå’Œä¸é‚£ä¹ˆæœŸå¾…çš„é©¬æ‹‰æ¾å¦‚æ­¤è€Œè‡³ã€‚å‡ºå‘çš„æ—©æ™¨é˜³å…‰ç‰¹åˆ«æ¸©æš–ï¼Œãƒ¢ãƒãƒ¬ãƒ¼ãƒ«çª—å­ä¸Šæ˜ å‡ºèº«å½±ï¼Œå¥½æš–ï½&lt;/p&gt;
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="è·‘æ­¥" scheme="http://ckitakishi.com/tags/%E8%B7%91%E6%AD%A5/"/>
    
      <category term="æ—…è¡Œ" scheme="http://ckitakishi.com/tags/%E6%97%85%E8%A1%8C/"/>
    
      <category term="ç¾é£Ÿ" scheme="http://ckitakishi.com/tags/%E7%BE%8E%E9%A3%9F/"/>
    
  </entry>
  
  <entry>
    <title>å‰å‘ã</title>
    <link href="http://ckitakishi.com/2015/11/04/%E5%89%8D%E5%90%91%E3%81%8D/"/>
    <id>http://ckitakishi.com/2015/11/04/å‰å‘ã/</id>
    <published>2015-11-04T13:54:49.000Z</published>
    <updated>2015-11-04T15:27:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´å¾ˆå¾ˆå–œæ¬¢ CIH åœ¨çŸ¥ä¹è¯´çš„ä¸€å¥è¯ï¼šè¿™ä¸ªä¸–ç•Œä¸Šï¼Œæ€»æ˜¯æœ‰äººï¼Œä¸ºæ¢¦æƒ³è€Œæ´»ã€‚</p><p>æ·±ä»¥ä¸ºï¼Œæˆ‘æ˜¯è¿™æ ·çš„äººï¼Œå› ä¸ºè¿˜æœ‰æ¢¦æƒ³ï¼Œæ‰€ä»¥æ— è®ºå¤šä¹ˆå¤±è½ï¼Œå¤šä¹ˆæ‚²ä¼¤ï¼Œéƒ½å¿è€ã€‚</p><a id="more"></a><p>ï¼ï¼ï¼ï¼ åˆ†å‰²çº¿åçš„åæ§½ ï¼ï¼ï¼ï¼</p><p>äºŒåå¤šå¤©çš„åŠªåŠ›ï¼Œæ— è®ºå¦‚ä½•ä¹Ÿæ²¡æƒ³åˆ°åœ¨ä¸­æœŸå‘è¡¨ä¸­åªæœ‰æ‚²å‰§ã€‚æ— è®ºé¡¹ç›®åšçš„å¥½æˆ–è€…åï¼Œwho careï¼Ÿå°½ç®¡ä¼¼ä¹æ•´ä¸ªå‘è¡¨åªæœ‰é¡¹ç›®è¿˜okã€‚<br>å…¶ä»–æ–¹é¢å°±çœŸæ˜¯å·®åˆ°çˆ†äº†ï¼Œè¿™ä¹ˆå¤šå¤©æ—¥è¯­è¿˜æ˜¯è¿™ä¹ˆçƒ‚ã€‚<br>å¼€ç©ç¬‘è¯´ä¸ºäº†ä»¥åèƒ½ç»§ç»­è£…é€¼ï¼Œä¸€å®šè¦å¥½å¥½å‘†åœ¨è¿™å„¿å¥½å¥½å­¦æ—¥è¯­ã€‚ã€‚ã€‚<br>å…³äºæ—¥è¯­ï¼Œç«Ÿç„¶æœ‰ç§å¿ƒæœ‰ä½™è€ŒåŠ›ä¸è¶³çš„æ„Ÿè§‰ï¼Œ<br>ä»¥åŠï¼Œå‘è¡¨å†…å®¹éƒ½æ˜¯äº›ä»€ä¹ˆé¬¼ï¼Ÿæ²¡æœ‰ä»ç”¨æˆ·è§’åº¦å‡ºå‘çš„é¡¹ç›®ä»‹ç»éƒ½æ˜¯è€æµæ°“ã€‚</p><p>èº«è¾¹å¥½å¤šäººï¼Œä»æ–¹æ–¹é¢é¢ç…§é¡¾ç€æˆ‘ä»¬ï¼Œè¯¥åŠæ‰“æ—¶åŠæ‰“ï¼Œå¤±è½æ—¶è¿˜æœ‰å®‰æ…°å’Œé¼“åŠ±ï¼Œæ„Ÿè°¢ã€‚</p><p>ç”¨ä¸€ä¸ªå–œæ¬¢çš„è¯åšä¸ºç»“å°¾å§ï¼Œå‰å‘ãï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç›´å¾ˆå¾ˆå–œæ¬¢ CIH åœ¨çŸ¥ä¹è¯´çš„ä¸€å¥è¯ï¼šè¿™ä¸ªä¸–ç•Œä¸Šï¼Œæ€»æ˜¯æœ‰äººï¼Œä¸ºæ¢¦æƒ³è€Œæ´»ã€‚&lt;/p&gt;
&lt;p&gt;æ·±ä»¥ä¸ºï¼Œæˆ‘æ˜¯è¿™æ ·çš„äººï¼Œå› ä¸ºè¿˜æœ‰æ¢¦æƒ³ï¼Œæ‰€ä»¥æ— è®ºå¤šä¹ˆå¤±è½ï¼Œå¤šä¹ˆæ‚²ä¼¤ï¼Œéƒ½å¿è€ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="éšç¬”" scheme="http://ckitakishi.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>è½»å›¾åƒå·¥å…·ï¼LightImage</title>
    <link href="http://ckitakishi.com/2015/08/01/%E8%BD%BB%E5%9B%BE%E5%83%8F%E5%B7%A5%E5%85%B7%EF%BC%8DLightImage/"/>
    <id>http://ckitakishi.com/2015/08/01/è½»å›¾åƒå·¥å…·ï¼LightImage/</id>
    <published>2015-08-01T07:58:35.000Z</published>
    <updated>2017-10-07T15:58:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>LightImage æ˜¯æˆ‘çš„æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä½†æ˜¯è‡³ä»Šæš‚æ—¶è¿˜æ˜¯ä¸€ä¸ªæ®‹æ¬¡æˆå“ï¼Œä»éœ€å¤§åŠ›çš„æ”¹å–„ã€‚åˆè¡·æ˜¯å¼€å‘ä¸€æ¬¾è½»é‡çº§çš„å›¾åƒå¤„ç†å·¥å…·ï¼Œåç»­åˆæ‰©å±•äº†ç®€æ˜“çš„å›¾åƒåˆ†æå’Œåƒç´ ç”»ç»˜åˆ¶ç­‰åŠŸèƒ½ã€‚</p><p>é¡¹ç›®ä¸»è¦åŸºäº HTML5 ä¸­çš„ Canvas å¼€å‘ï¼Œå½“æåŠ Canvas çš„æ—¶å€™ï¼Œå¸¸å¸¸è¿˜ä¼šæåˆ° SVGã€‚Canvas åªèƒ½é€šè¿‡è„šæœ¬é©±åŠ¨ï¼Œé€‚åˆåƒç´ çº§çš„å›¾å½¢é—®é¢˜å¤„ç†ï¼›ç›¸æ¯”è¾ƒè€Œè¨€ SVG çš„é©±åŠ¨æ–¹å¼æ›´åŠ çµæ´»ï¼ŒXMLã€CSSç­‰éƒ½å¯ï¼Œæ‰€ä»¥å¤„ç†å›¾å½¢æ˜¯é€šè¿‡å…ƒç´ ã€‚å¯¹äºæœ¬é¡¹ç›®è€Œè¨€ï¼ŒCanvas æ˜¯ä¸äºŒçš„é€‰æ‹©ã€‚</p><a id="more"></a><p>é¡¹ç›®ä½¿ç”¨äº†æ¡†æ¶ Vue.jsï¼Œç»“åˆæ›¾ç»å®Œæˆçš„ä¸€ä¸ªæ•°æ®é‡è¾ƒå¤§çš„åº”ç”¨æ¥çœ‹ï¼Œå¾ˆä¼˜é›…ï¼Œå¾ˆè½»é‡ï¼Œå¾ˆçµæ´»ï¼Œè°ƒè¯•ä¹Ÿå¾ˆæ£’ï¼Œä¸è¿‡ä¹Ÿé‡åˆ°ä¸€äº›éœ€è¦ä»”ç»†æ€è€ƒçš„é—®é¢˜ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œè·¯ç”±ï¼Œé¡µé¢é‡è½½ç­‰ç­‰ã€‚</p><p>ç­”è¾©å®Œåå°±ä¸€ç›´æƒ³æŠŠä¸€ä¸ªå¤šæœˆå¼€å‘è¿‡ç¨‹ä¸­çš„å¿ƒå¾—å’Œé‡åˆ°çš„æœ‰æ„æ€çš„é—®é¢˜æ€»ç»“ä¸€ä¸‹ï¼Œè¿˜å¥½ä¹‹å‰æœ‰åœ¨ trello ä¸Šè®°å½•ã€‚ä¸‹é¢æƒ³ä»ä¸‰ä¸ªéƒ¨åˆ†æ¥è¯´ä¸€è¯´ï½</p><h2 id="ç»˜ç”»"><a href="#ç»˜ç”»" class="headerlink" title="ç»˜ç”»"></a>ç»˜ç”»</h2><p>å…³äºè¿™ä¸ªéƒ¨åˆ†ï¼Œç»†èŠ‚çš„éƒ¨åˆ†é›†ä¸­äºäº‹ä»¶å¤„ç†ï¼Œä¾‹å¦‚ç¬”è¿¹ç¦»å¼€å’Œè¿›å…¥ç”»å¸ƒéœ€è¦ç»‘å®š mouseleave å’Œ mouseenter äº‹ä»¶ã€‚æƒ³è¦è¯´ä¸€è¯´çš„æ˜¯ï¼Œè¿™é‡Œæ·»åŠ äº†æˆ‘å¾ˆå–œæ¬¢çš„åƒç´ ç”»ç»˜åˆ¶ï¼Œé€šè¿‡å€ç‡æ¥æ¨¡æ‹Ÿä¸åŒæ ¼å­æ•°çš„åƒç´ ç”»å¸ƒï¼Œå°è¯•è¿‡ä½¿ç”¨å•ä¸ªåƒç´ æ”¾å¤§ä½†å¹¶é€‚ç”¨ã€‚åœ¨è¿™é‡Œä¸å¾—ä¸æç»™æˆ‘å¸¦æ¥æ·±åˆ»å½±å“çš„åƒç´ åŠ¨ç”»ä½œå“ä»¬ <a href="http://1041uuu.tumblr.com/" target="_blank" rel="noopener">1041uuu</a>ã€‚</p><p>æœªæ¥å±•æœ›ï¼šä½¿ç”¨æ ˆä¿å­˜ç¬”ç”»ï¼Œå®Œæˆæ’¤é”€å‰è¿›ï¼›æä¾›è‡ªå®šä¹‰åƒç´ æ•°é‡ï¼›ä»¥åŠå…è®¸æ·»åŠ å¤šå¼ ç”»å¸ƒç»„æˆåŠ¨ç”»ã€‚</p><h2 id="å›¾åƒåˆ†æ"><a href="#å›¾åƒåˆ†æ" class="headerlink" title="å›¾åƒåˆ†æ"></a>å›¾åƒåˆ†æ</h2><p>è¿™ä¸ªéƒ¨åˆ†ä¹Ÿè®¸åä¸å‰¯å®ï¼Ÿï¼ˆç¬‘ã€‚èµ·åˆåªæ˜¯æƒ³åšä¸€ä¸ªå›¾åƒçš„è‰²å½©åˆ†æï¼Œç»Ÿè®¡è‰²å½©çš„å‡ºç°é¢‘ç‡ã€‚ä¾æ® rgb è‰²å½©æ¨¡å‹ï¼Œåˆ™æœ‰256^3ç§è‰²å½©ï¼Œéå¸¸å¤§çš„æ•°å­—ï¼Œäºæ˜¯å°†ç›¸è¿‘çš„è‰²å½©å½’ä½ä¸€ç±»ï¼Œç”±å¤§åŠå°æœ€ç»ˆé€‰å®šäº† 6^3 ç§è‰²å½©ã€‚ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º 256 çš„æ•°ç»„å­˜å‚¨å‡ºç°æ¬¡æ•°ï¼Œè‰²å½©ä¸€ä¸€å¯¹åº”ä¸‹æ ‡ 0-255ï¼Œå¹¶å¯åå‘ç”±ä¸‹æ ‡æ¨å¯¼é¢œè‰²ä»¥ä¾¿åœ¨é¡µé¢æ¸²æŸ“ã€‚</p><p>åæ¥å¢æ·»äº†ç°åº¦ç›´æ–¹å›¾åŠå‡è¡¡åŒ–çš„ç›´æ–¹å›¾æ¥è¡¨ç°å›¾åƒçš„å¤§ä½“ç‰¹å¾ã€‚è¿™ä¸ªéƒ¨åˆ†æ•ˆç‡å—å›¾åƒå¤§å°å½±å“å¹¶ä¸æ˜æ˜¾ã€‚</p><p>æœªæ¥å±•æœ›ï¼šå¯å¯¼å‡ºåˆ†æç»“æœï¼›ä¿æŒæ•ˆç‡å¾—åˆ°æ›´ç²¾ç¡®çš„ç»“æœã€‚</p><h2 id="å›¾åƒå¤„ç†"><a href="#å›¾åƒå¤„ç†" class="headerlink" title="å›¾åƒå¤„ç†"></a>å›¾åƒå¤„ç†</h2><p>åšæ¯•è®¾çš„ä¸¤ä¸ªæœˆä¸­ï¼Œç”¨äºå­¦ä¹ å›¾åƒå¤„ç†å’Œä½¿ç”¨ JavaScript å®ç°èŠ±äº†ä¸å°‘æ—¶é—´ã€‚èµ·åˆå¤§æ¦‚çœ‹äº†çœ‹ã€Šæ•°å­—å›¾åƒå¤„ç†ã€‹..çš„ç›®å½•ã€åŸºç¡€å’Œè‰²å½©ç›¸å…³ç« èŠ‚ï¼Œæœ‰äº†ä¸€ç‚¹ç‚¹å®è§‚çš„ç†è§£ï¼ŒåæœŸæ›´å…·ä½“çš„ç†è§£å¤§å¤šæ¥è‡ªäºä»–äººæ–‡ç« å’Œã€Šæ•°å­—å›¾åƒå¤„ç†åŸç†ä¸å®è·µï¼šåŸºäºVisual C++å¼€å‘ã€‹ã€‚å®ç°ä¸­ï¼Œæ¯”è¾ƒæ·±åˆ»çš„æ˜¯å›¾åƒå‰ªåˆ‡ï¼Œæœ‰å‡ ä¸ª jQuery å®ç°çš„æ’ä»¶ï¼Œç„¶è€Œè¿˜æ˜¯å¼ºè¿«è‡ªå·±å†™äº†ä¸€ä¸ªçº¯ JavaScript çš„ï¼Œä½†è‡³ä»Šä»ä¸å®Œå–„ï¼Œå°†æ¥å¦‚è‹¥æœ‰ä¸€æ—¥èƒ½å¤Ÿè§äººï¼Œæ‰“ç®—è®©å…¶ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶å­˜åœ¨ã€‚</p><p>å›¾åƒå¤„ç†çš„æ•ˆç‡éšç€å›¾åƒå¢å¤§è€Œå‰§é™ï¼Œå¾ˆ sadï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ”¹å–„çš„é‡ç‚¹ã€‚</p><p>æœªæ¥å±•æœ›ï¼šç»“åˆç›´æ–¹å›¾ï¼Œæ·»åŠ æ›²çº¿ï¼›å¯è°ƒèŠ‚äº®åº¦ï¼Œå¯¹æ¯”åº¦ç­‰ã€‚</p><h2 id="æœ‰è¯è¯´"><a href="#æœ‰è¯è¯´" class="headerlink" title="æœ‰è¯è¯´"></a>æœ‰è¯è¯´</h2><p>æºç å®Œå…¨åœ¨ <a href="https://github.com/Ckitakishi/LightImage" target="_blank" rel="noopener">Github</a></p><p>å¯ä»¥åœ¨ heroku ä¸Š <a href="https://lightimage.herokuapp.com" target="_blank" rel="noopener">Tye it</a> </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;LightImage æ˜¯æˆ‘çš„æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä½†æ˜¯è‡³ä»Šæš‚æ—¶è¿˜æ˜¯ä¸€ä¸ªæ®‹æ¬¡æˆå“ï¼Œä»éœ€å¤§åŠ›çš„æ”¹å–„ã€‚åˆè¡·æ˜¯å¼€å‘ä¸€æ¬¾è½»é‡çº§çš„å›¾åƒå¤„ç†å·¥å…·ï¼Œåç»­åˆæ‰©å±•äº†ç®€æ˜“çš„å›¾åƒåˆ†æå’Œåƒç´ ç”»ç»˜åˆ¶ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;é¡¹ç›®ä¸»è¦åŸºäº HTML5 ä¸­çš„ Canvas å¼€å‘ï¼Œå½“æåŠ Canvas çš„æ—¶å€™ï¼Œå¸¸å¸¸è¿˜ä¼šæåˆ° SVGã€‚Canvas åªèƒ½é€šè¿‡è„šæœ¬é©±åŠ¨ï¼Œé€‚åˆåƒç´ çº§çš„å›¾å½¢é—®é¢˜å¤„ç†ï¼›ç›¸æ¯”è¾ƒè€Œè¨€ SVG çš„é©±åŠ¨æ–¹å¼æ›´åŠ çµæ´»ï¼ŒXMLã€CSSç­‰éƒ½å¯ï¼Œæ‰€ä»¥å¤„ç†å›¾å½¢æ˜¯é€šè¿‡å…ƒç´ ã€‚å¯¹äºæœ¬é¡¹ç›®è€Œè¨€ï¼ŒCanvas æ˜¯ä¸äºŒçš„é€‰æ‹©ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ±‚ç´¢é›†" scheme="http://ckitakishi.com/categories/%E6%B1%82%E7%B4%A2%E9%9B%86/"/>
    
    
      <category term="ç¼–ç¨‹" scheme="http://ckitakishi.com/tags/%E7%BC%96%E7%A8%8B/"/>
    
      <category term="web" scheme="http://ckitakishi.com/tags/web/"/>
    
      <category term="å›¾åƒ" scheme="http://ckitakishi.com/tags/%E5%9B%BE%E5%83%8F/"/>
    
  </entry>
  
  <entry>
    <title>è¯´è¯´è¿‡å»è¿™åŠå¹´</title>
    <link href="http://ckitakishi.com/2015/07/31/%E8%AF%B4%E8%AF%B4%E8%BF%87%E5%8E%BB%E8%BF%99%E5%8D%8A%E5%B9%B4/"/>
    <id>http://ckitakishi.com/2015/07/31/è¯´è¯´è¿‡å»è¿™åŠå¹´/</id>
    <published>2015-07-31T14:58:17.000Z</published>
    <updated>2017-10-07T15:56:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿‡å»è¿™åŠå¹´ï¼Œè¯´å®è¯è¿‡çš„è›®ä¸é”™ã€‚ç¡®å®šäº†å·¥ä½œï¼Œç»“æŸäº†å®ä¹ ï¼Œå¸¦ç€ä¸èˆé¡ºåˆ©æ¯•ä¸šï¼Œæ¯•ä¸šæ—…è¡Œã€‚æ¯ä¸€ä»¶äº‹éƒ½é‚£ä¹ˆéš¾å¿˜ã€‚</p><a id="more"></a><p>å¹´åˆï¼ŒçŠ¹è±«å’Œçº ç»“æœ€ç»ˆè¿˜æ˜¯æ²¡èƒ½é˜»æŒ¡ä¸€ä¸ªå°å°çš„æ¢¦æƒ³ï¼Œå†³å®šå»éœ“è™¹å·¥ä½œã€‚å¤§ä¸‰ä»¥å‰è¿˜ä¿¡èª“æ—¦æ—¦çš„è¯´è¿‡å°±ç®—å»æ—¥æœ¬ä¹Ÿåªå¯èƒ½æ˜¯æ—…è¡Œï¼Œäº²çˆ±çš„æ—¥è¯­è€å¸ˆä»¬ä¼°è®¡æ€ä¹ˆä¹Ÿæƒ³ä¸åˆ°å½“å¹´é‚£ä¸ªæ—¥è¯­ä¸‹æ‰‹çš„å­¦ç”Ÿå°½ç„¶è¦å»å·¥ä½œäº†ï½</p><p>å››æœˆåº•ï¼Œç»“æŸäº†å…«ä¸ªæœˆçš„å®ä¹ ï¼Œæœ€æƒ³è¯´çš„æ˜¯æ„Ÿè°¢ï¼Œèº«è¾¹çš„äººéƒ½å……æ»¡äº†æ­£èƒ½é‡ã€‚æœ€å¹¸ç¦çš„æ˜¯å¼€å‘ä¸»çº¿ç”± iOS é‡æ–°å›åˆ°äº† web å‰ç«¯å¼€å‘ï¼Œæ¡†æ¶å¼€å‘ï¼Œæ–°äº§å“ç ”å‘ï¼Œæ¡ˆä»¶å¯¹åº”â€¦ã€‚</p><p>å…­æœˆåº•ï¼Œæ¯•ä¸šè®¾è®¡ [<a href="https://lightimage.herokuapp.com" target="_blank" rel="noopener">lightimage</a>] å’Œå­¦ä½æˆäºˆä¸ºå¤§å­¦åˆ’ä¸Šäº†å¥å·ï¼Œå¸¦ç€æ»¡æ»¡çš„ç¥ç¦å’Œå¥½å‡ åGçš„æ¯•ä¸šç…§è·Ÿæœ€çˆ±çš„ DUT è¯´å†è§äº†ã€‚</p><p>ä¸ƒæœˆï¼Œä¼´éšç€æ±Ÿå—çƒŸé›¨çš„æ¯•ä¸šæ—…è¡Œï¼Œæ¯å¤©æ—©æ™¨é†’æ¥éƒ½ä¼šæƒ³åˆå°‘äº†ä¸€å¤©ç›¸ä¼´ï¼ŒçœŸçš„èˆä¸å¾—ã€‚åŒä¸€ä¸ªå±‹æªä¸‹ç”Ÿæ´»äº†å››å¹´ï¼Œä½ ä»¬ç»™æˆ‘å¸¦æ¥äº†å¤ªå¤šï¼Œä¸€èµ·åŠªåŠ›ä¸€èµ·ç©è€äº’ç›¸åæ§½äº’ç›¸æ‰“å‡»â€¦</p><p>çª—å¤–å¤§é›¨æ»‚æ²±ï¼Œèµ¶åœ¨ä¸ƒæœˆçš„å°¾å·´ï¼Œæµæ°´è´¦ä¸€æ ·çš„æ¢³ç†äº†è¿™åŠå¹´æ¥çš„å‘ç”Ÿçš„äº‹æƒ…å’Œå¿ƒæƒ…ã€‚æˆ‘å°±è¦å¸¦ç€æ¢¦æƒ³é‡æ–°èµ·èˆªå•¦ï½</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿‡å»è¿™åŠå¹´ï¼Œè¯´å®è¯è¿‡çš„è›®ä¸é”™ã€‚ç¡®å®šäº†å·¥ä½œï¼Œç»“æŸäº†å®ä¹ ï¼Œå¸¦ç€ä¸èˆé¡ºåˆ©æ¯•ä¸šï¼Œæ¯•ä¸šæ—…è¡Œã€‚æ¯ä¸€ä»¶äº‹éƒ½é‚£ä¹ˆéš¾å¿˜ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="éšç¬”" scheme="http://ckitakishi.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>å¿µå¿µä¸å¿˜</title>
    <link href="http://ckitakishi.com/2014/10/28/%E5%BF%B5%E5%BF%B5%E4%B8%8D%E5%BF%98/"/>
    <id>http://ckitakishi.com/2014/10/28/å¿µå¿µä¸å¿˜/</id>
    <published>2014-10-28T11:19:18.000Z</published>
    <updated>2015-08-01T09:11:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§è¿çš„å†¬å¤©å¦‚æœŸè€Œè‡³ï¼Œæ—¶å…‰åŒ†åŒ†â€¦å®ä¹ ä¹Ÿé©¬ä¸Šå°±è¦è¿›å…¥ç¬¬ä¸‰ä¸ªæœˆï¼Œä¾ç„¶æƒ³è¦å»å—æ–¹â€¦<br>è¿‡å»çš„ä¸¤ä¸ªæœˆï¼Œé‡æ–°æŠ•å…¥åˆ° web å‰ç«¯å¼€å‘çš„æ€€æŠ±ï¼Œæœ‰ç§å¥½ä¹…ä¸è§ï¼Œä½ ä¾ç„¶ç¾ä¸½çš„æ„Ÿè§‰ã€‚ä½†æ˜¯é—®é¢˜ä¾æ—§æ˜¯æœ‰çš„ï¼Œå¹¸å¥½ä¹Ÿä¼šæ„Ÿè§‰åˆ°è‡ªå·±ç¡®ç¡®å®å®åœ¨è¿›æ­¥ã€‚å·¥ä½œä¹‹ä½™çš„ç”Ÿæ´»ç‰¹åˆ«è§„å¾‹ï¼Œæ¯å¤©å’Œ Q ä¸€èµ·æˆ–è¹­ç½‘ï¼Œæˆ–ä¹±é€›ï¼Œæˆ–è´­ç‰©ï¼Œå¶å°”ä¹Ÿçº¦ä¸Šè¿ªè¿ªä¸€èµ·åƒå–ç©ä¹ã€‚<br>ä»Šå¤©å¼€å§‹äº†å†™ jQuery æ’ä»¶çš„å¾é€”ï¼Œè¿™ä¸ªè¿˜æ˜¯ä¸‹ä¸€ç¯‡å†è¯´å§ã€‚ï¼»ï¼šï¼‰â€¦ï¼½</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¤§è¿çš„å†¬å¤©å¦‚æœŸè€Œè‡³ï¼Œæ—¶å…‰åŒ†åŒ†â€¦å®ä¹ ä¹Ÿé©¬ä¸Šå°±è¦è¿›å…¥ç¬¬ä¸‰ä¸ªæœˆï¼Œä¾ç„¶æƒ³è¦å»å—æ–¹â€¦&lt;br&gt;è¿‡å»çš„ä¸¤ä¸ªæœˆï¼Œé‡æ–°æŠ•å…¥åˆ° web å‰ç«¯å¼€å‘çš„æ€€æŠ±ï¼Œæœ‰ç§å¥½ä¹…ä¸è§ï¼Œä½ ä¾ç„¶ç¾ä¸½çš„æ„Ÿè§‰ã€‚ä½†æ˜¯é—®é¢˜ä¾æ—§æ˜¯æœ‰çš„ï¼Œå¹¸å¥½ä¹Ÿä¼šæ„Ÿè§‰åˆ°è‡ªå·±ç¡®ç¡®å®å®åœ¨è¿›æ­¥ã€‚å·¥ä½œä¹‹ä½™çš„ç”Ÿæ´»ç‰¹åˆ«è§„å¾‹ï¼Œæ¯å¤©å’Œ Q ä¸€èµ·æˆ–è¹­ç½‘ï¼Œæˆ–ä¹±é€›ï¼Œ
      
    
    </summary>
    
      <category term="æµ®ç”Ÿè®°" scheme="http://ckitakishi.com/categories/%E6%B5%AE%E7%94%9F%E8%AE%B0/"/>
    
    
      <category term="æ€è€ƒ" scheme="http://ckitakishi.com/tags/%E6%80%9D%E8%80%83/"/>
    
      <category term="ç”Ÿæ´»" scheme="http://ckitakishi.com/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
</feed>
