<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Ckitakishi.playground"/><link rel="canonical" href="ckitakishi.com/posts/%E5%AE%89%E5%85%A8%E4%B8%94%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8-NSAttributedString-Part-1"/><meta name="twitter:url" content="ckitakishi.com/posts/%E5%AE%89%E5%85%A8%E4%B8%94%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8-NSAttributedString-Part-1"/><meta name="og:url" content="ckitakishi.com/posts/%E5%AE%89%E5%85%A8%E4%B8%94%E4%BC%98%E9%9B%85%E5%9C%B0%E4%BD%BF%E7%94%A8-NSAttributedString-Part-1"/><title>å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨ NSAttributedString - Part.1 | Ckitakishi.playground</title><meta name="twitter:title" content="å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨ NSAttributedString - Part.1 | Ckitakishi.playground"/><meta name="og:title" content="å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨ NSAttributedString - Part.1 | Ckitakishi.playground"/><meta name="description" content="Swift æ‹¥æœ‰å¯é€‰ç±»å‹ä¸”ç±»å‹å®‰å…¨ï¼Œè¿™äº›ç‰¹æ€§å¸®åŠ©å¼€å‘è€…é¿å…äº†å¾ˆå¤šéº»çƒ¦é—®é¢˜ã€‚ç„¶è€Œå³ä¾¿å¦‚æ­¤ï¼Œåœ¨ `NSAttributedString` çš„è¿ç”¨ä¸­åŒæ ·å­˜åœ¨ç€çš„æ½œåœ¨ä¸å®‰å…¨å› ç´ ï¼Œåœ¨ Part.1 ä¸­å°†ä¼šå›´ç»•å¦‚ä½•æ›´å®‰å…¨åœ°ä½¿ç”¨ `NSAttributedString` å±•å¼€è®¨è®ºã€‚"/><meta name="twitter:description" content="Swift æ‹¥æœ‰å¯é€‰ç±»å‹ä¸”ç±»å‹å®‰å…¨ï¼Œè¿™äº›ç‰¹æ€§å¸®åŠ©å¼€å‘è€…é¿å…äº†å¾ˆå¤šéº»çƒ¦é—®é¢˜ã€‚ç„¶è€Œå³ä¾¿å¦‚æ­¤ï¼Œåœ¨ `NSAttributedString` çš„è¿ç”¨ä¸­åŒæ ·å­˜åœ¨ç€çš„æ½œåœ¨ä¸å®‰å…¨å› ç´ ï¼Œåœ¨ Part.1 ä¸­å°†ä¼šå›´ç»•å¦‚ä½•æ›´å®‰å…¨åœ°ä½¿ç”¨ `NSAttributedString` å±•å¼€è®¨è®ºã€‚"/><meta name="og:description" content="Swift æ‹¥æœ‰å¯é€‰ç±»å‹ä¸”ç±»å‹å®‰å…¨ï¼Œè¿™äº›ç‰¹æ€§å¸®åŠ©å¼€å‘è€…é¿å…äº†å¾ˆå¤šéº»çƒ¦é—®é¢˜ã€‚ç„¶è€Œå³ä¾¿å¦‚æ­¤ï¼Œåœ¨ `NSAttributedString` çš„è¿ç”¨ä¸­åŒæ ·å­˜åœ¨ç€çš„æ½œåœ¨ä¸å®‰å…¨å› ç´ ï¼Œåœ¨ Part.1 ä¸­å°†ä¼šå›´ç»•å¦‚ä½•æ›´å®‰å…¨åœ°ä½¿ç”¨ `NSAttributedString` å±•å¼€è®¨è®ºã€‚"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Ckitakishi.playground"/></head><body class="item-page"><header><div class="wrapper"><a href="/" class="site-name">Ckitakishi.playground</a><nav><ul><li><a href="/">Home</a></li><li><a href="/posts" class="selected">Writing</a></li><li><a href="https://github.com/Ckitakishi?tab=repositories">Project</a></li><li><a href="/tags/æ±‚ç´¢é›†/">æ±‚ç´¢é›†</a></li><li><a href="/tags/æµ®ç”Ÿè®°/">æµ®ç”Ÿè®°</a></li><li><a href="/feed.rss">RSS</a></li></ul></nav></div></header><div class="wrapper"><article><div class="content"><h1>å®‰å…¨ä¸”ä¼˜é›…åœ°ä½¿ç”¨ NSAttributedString - Part.1</h1><p>Swift æ‹¥æœ‰å¯é€‰ç±»å‹ä¸”ç±»å‹å®‰å…¨ï¼Œè¿™äº›ç‰¹æ€§å¸®åŠ©å¼€å‘è€…é¿å…äº†å¾ˆå¤šéº»çƒ¦é—®é¢˜ã€‚</p><p>ç„¶è€Œå½“æ¶‰åŠåˆ°å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¿˜æ˜¯æˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›ç‘•ç–µã€‚ä¾‹å¦‚å¼•ç”¨èµ„æºæ–‡ä»¶ï¼Œå›¾ç‰‡æ–‡å­—ç­‰ï¼Œä¸€æ—¦æ‹¼å†™é”™è¯¯ï¼Œæ˜¯æ²¡æœ‰åŠæ³•åœ¨ç¼–è¯‘ä¹‹å‰çŸ¥é“çš„ï¼Œåˆæˆ–è€…æ˜¯ç»§ç»­åœ¨ä»£ç ä¸­å¼•ç”¨å·²ç»è¢«åˆ é™¤çš„èµ„æºï¼Œä¹Ÿä¸å®¹æ˜“è¢«å¯Ÿè§‰ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€äº›çŸ¥åçš„åº“åº”è¿è€Œç”Ÿï¼Œåƒæ˜¯ <a href="https://github.com/mac-cain13/R.swift">R.swift</a>, <a href="https://github.com/SwiftGen/SwiftGen">SwiftGen</a> ä¹‹ç±»ã€‚è§£å†³æ–¹æ¡ˆçš„å…¶ä¸­ä¸€ä¸ªæ ¸å¿ƒæ˜¯ä½¿å¾—èµ„æºå¼•ç”¨è¿™ä¸ªè¿‡ç¨‹å˜å¾—ç±»å‹å®‰å…¨ï¼Œä»¥æ­¤æ¥å…‹æœæ½œåœ¨çš„ä¸æ˜äº†æ€§ï¼Œä¾‹å¦‚ï¼š</p><pre><code><span class="comment">// normal</span>
<span class="keyword">let</span> icon = <span class="type">UIImage</span>(named: <span class="string">"settings-icon"</span>)

<span class="comment">// R.swift</span>
<span class="keyword">let</span> icon = <span class="type">R</span>.<span class="property">image</span>.<span class="call">settingsIcon</span>()
</code></pre><p>ä¸è¿‡è¿™æ¬¡æƒ³è®¨è®ºçš„å¹¶ä¸æ˜¯ä¸Šè¿°é—®é¢˜ï¼Œè€Œæ˜¯åœ¨ <code>NSAttributedString</code> çš„è¿ç”¨ä¸­åŒæ ·å­˜åœ¨ç€çš„æ½œåœ¨ä¸å®‰å…¨å› ç´ ã€‚ä»æˆ‘çš„æ—¥å¸¸ä½“éªŒæ¥è¯´ï¼Œ<code>NSAttributedString</code> åœ¨æ— æ•°æƒ…å¢ƒä¹‹ä¸‹éƒ½ä¼šè¢«æˆ‘ä»¬æƒ³èµ·ï¼Œæ— è®ºæ˜¯å¯Œæ–‡æœ¬æ”¯æŒè¿˜æ˜¯å›¾æ–‡æ··æ’ï¼Œåˆæˆ–è€…æ˜¯æƒ³å®ç°ä¸€ä¸ª markdown ç»„ä»¶ç­‰ç­‰ã€‚</p><p>è™½ç„¶æˆ‘è®¤ä¸ºä» Objective-C åˆ° Swiftï¼Œåœ¨å®‰å…¨é—®é¢˜ä¸Šå·²ç»æ˜¯è¿ˆè¿›äº†ä¸€å¤§æ­¥ã€‚ä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼Œä»¥å¾€å†™ Objective-C çš„æ—¶å€™ï¼Œä¼šæ³¨æ„é¿å…ä¸€ä¸ªé¢„æœŸå¤–çš„ <code>nil</code> è¢«ä½œä¸º <code>str</code> å‚æ•°ä¼ å…¥ï¼Œè€Œå¼•èµ·ä¸å¿…è¦çš„å´©æºƒã€‚</p><pre><code>- (instancetype)initWithString:(<span class="type">NSString</span> *)str
</code></pre><p>å¯¹äº Swift è€Œè¨€ï¼Œäº‹æƒ…ä¼šå˜å¾—ç®€å•å¾ˆå¤šï¼Œå¯é€‰å€¼çš„å£°æ˜è®©æˆ‘ä»¬æ›´å®¹æ˜“åšå‡ºæ­£ç¡®çš„åˆ¤æ–­ã€‚</p><pre><code><span class="keyword">init</span>(string str: <span class="type">String</span>)
</code></pre><p>å³ä¾¿å¦‚æ­¤ï¼Œå…³äºæ½œåœ¨çš„ä¸å®‰å…¨å› ç´ ä¾ç„¶æœ‰å¾ˆå¤šè¯å¯ä»¥è¯´ï¼Œä¾‹å¦‚ä¸‹é¢è¿™ä¸ªæå…¶ç®€å•çš„ä¾‹å­ï¼š</p><pre><code><span class="keyword">let</span> paragraphStyle = <span class="type">NSMutableParagraphStyle</span>()
paragraphStyle.<span class="property">lineSpacing</span> = <span class="number">1.0</span>
paragraphStyle.<span class="property">lineBreakMode</span> = .<span class="dotAccess">byTruncatingTail</span>
paragraphStyle.<span class="property">alignment</span> = .<span class="dotAccess">center</span>

xxxxxx.<span class="property">attributedText</span> = <span class="type">NSAttributedString</span>(
    string: <span class="string">"å®è¨€æ˜¥å¤© ç ´ç¢ç§‹åƒ"</span>,
    attributes: [
        .<span class="dotAccess">font</span>: <span class="type">UIFont</span>.<span class="call">systemFont</span>(ofSize: <span class="number">12.0</span>, weight: .<span class="dotAccess">regular</span>),
        .<span class="dotAccess">foregroundColor</span>: <span class="type">UIColor</span>.<span class="property">gray</span>,
        .<span class="dotAccess">paragraphStyle</span>: paragraphStyle
])
</code></pre><p>çœ‹å®Œè¿™æ®µä»£ç ï¼Œå¿ƒä¸­åº”è¯¥ä¼šå¾ˆå®¹æ˜“æµ®ç°å‡ ä¸ªç›´å‡»çµé­‚çš„é—®é¢˜ï¼š</p><ol><li>ä¸ºä»€ä¹ˆä¸º <code>foregroundColor</code> è®¾ç½®å€¼çš„æ—¶å€™ä¸èƒ½å¤Ÿçœç•¥ <code>UIColor</code>ï¼Ÿ</li><li>å¦‚æœä¼ å…¥çš„ä¸æ˜¯ <code>UIColor</code> ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å—ï¼Ÿ</li><li><code>paragraphStyle</code> çš„åˆå§‹åŒ–å’Œèµ‹å€¼æ˜¯ä¸æ˜¯å¯ä»¥å†™çš„æ›´ <code>swifty</code>ï¼Ÿ</li></ol><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•ï¼Œçœ‹å€¼ç±»å‹å„å¼å„æ ·äº”èŠ±å…«é—¨å°±ä¼šçŸ¥é“è¿™å¤§æ¦‚æ˜¯ <code>Any</code>ï¼Œå¦‚æœå°† <code>attributes</code> çš„åˆå§‹åŒ–åˆ†ç¦»å‡ºæ¥ï¼Œè¿™ä¸ªåŸå› ä¼šæ›´åŠ ä¸€ç›®äº†ç„¶ã€‚</p><pre><code><span class="keyword">let</span> attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>: <span class="type">Any</span>] = [
    .<span class="dotAccess">font</span>: <span class="type">UIFont</span>.<span class="call">systemFont</span>(ofSize: <span class="number">12.0</span>, weight: .<span class="dotAccess">regular</span>),
    .<span class="dotAccess">foregroundColor</span>: <span class="type">UIColor</span>.<span class="property">gray</span>,
    .<span class="dotAccess">paragraphStyle</span>: paragraphStyle
]
</code></pre><p>ç¬¬äºŒä¸ªé—®é¢˜å®Œå…¨æ˜¯ç¬¬ä¸€é—®çš„å‰¯ä½œç”¨ã€‚å¯¹äºä¼šä¸ä¼šå‘ç”Ÿä»€ä¹ˆäº‹ï¼Œç­”æ¡ˆæ˜¯ä¼šã€‚æ›¾ç»ä¸€æ—¶å¤±ç¥ï¼Œä¸º <code>paragraphStyle</code> ä¼ å…¥äº†ä¸€ä¸ª <code>CGColor</code> çš„å€¼ï¼Œæœ€å¯æ€•çš„åœ¨äºä¸­æ–‡å’Œæ—¥è¯­éƒ½å¯ä»¥é¡ºåˆ©å‘ˆç°å‡ºæ‰€æœŸå¾…çš„é¢œè‰²ï¼Œä½†åˆ‡æ¢æˆè‹±è¯­ååº”ç”¨ç›´æ¥å°±å´©æºƒäº†ã€‚è‹¥é­é‡è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æƒ³ä¸ºäº†æ¢å¯»åŸå› ä¹Ÿè¿˜æ˜¯éœ€è¦èŠ±ä¸€ç‚¹ç‚¹æ—¶é—´çš„ã€‚</p><p>ä¸ºäº†æ¶ˆè§£è¿™ä¸å®‰å…¨æ„Ÿï¼Œä¼°è®¡å¤§å®¶éƒ½ä¼šæƒ³è¦åšç‚¹ä»€ä¹ˆã€‚è¦ä¹ˆæ˜¯ä¸º <code>attributes</code> å†™ä¸€æ®µç±»å‹æ£€æŸ¥çš„ä»£ç é€šè¿‡è¾“å‡º log æ¥é¿å…æ„å¤–ï¼Œæˆ–è€…æ˜¯å°è£… <code>NSAttributedString</code> ä»¥å®ç°ç±»å‹å®‰å…¨ã€‚æ–¹æ¡ˆä¸€ç•¥æ˜¾å•è–„ï¼Œä½†ä¸Šè¿°æœ€è‡´å‘½çš„é—®é¢˜äºŒæ˜¯å¯ä»¥è¢«åœ†æ»¡è§£å†³çš„ï¼Œå”¯ä¸€çš„ç¼ºæ†¾æ˜¯åœ¨ç¼–è¯‘åæ‰èƒ½çŸ¥é“ç»“æœã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œä¸å¦‚å°±æ¥å®ç°æ–¹æ¡ˆäºŒã€‚</p><p>æ¯”è¾ƒç›´æ¥çš„æƒ³æ³•åº”è¯¥æ˜¯é¿å… <code>Any</code> çš„å­˜åœ¨ï¼Œè¿™æ ·ä¸€æ¥ï¼Œä¸å¦¨ç´¢æ€§æŠ›å¼ƒå­—å…¸ï¼Œä½¿å„ä¸ªå±æ€§æˆä¸ºä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å­˜åœ¨ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºä¸€äº›å‡½æ•°ç„¶åé“¾å¼è°ƒç”¨ï¼Œä½†æ›´å®¹æ˜“æµ®ç°åœ¨è„‘æµ·ä¸­çš„åº”è¯¥æ˜¯ç”¨æšä¸¾å»åšè¿™ä»¶äº‹ï¼š</p><pre><code><span class="keyword">enum</span> StringAttribute {
    <span class="keyword">case</span> font(<span class="type">UIFont</span>)
    <span class="keyword">case</span> foregroundColor(<span class="type">UIColor</span>)
    <span class="keyword">case</span> underlineColor(<span class="type">UIColor</span>?) <span class="comment">// The default value is nil</span>
    <span class="keyword">case</span> kern(<span class="type">CGFloat</span>)
    <span class="comment">// ...</span>
}
</code></pre><p>åœ¨å®šä¹‰äº†ä¸Šè¿°æšä¸¾ä¹‹åï¼ŒåŸºæœ¬ä¸Šç±»å‹ä¸å®‰å…¨çš„é—®é¢˜å°±å¾—åˆ°äº†è§£å†³ã€‚ä¸è¿‡ä½œä¸ºæ¢å–ç±»å‹å®‰å…¨çš„ä»£ä»·ï¼Œéœ€è¦å¤šä¸€é“å·¥åºæŠŠ <code>StringAttribute</code> è½¬å› <code>[NSAttributedString.Key: Any]</code>ï¼š</p><pre><code><span class="keyword">extension</span> <span class="type">NSAttributedString</span> {
    <span class="keyword">convenience init</span>(string str: <span class="type">String</span>, stringAttributes attrs: [<span class="type">StringAttribute</span>]) {
        <span class="keyword">self</span>.<span class="keyword">init</span>(string: str, attributes: attrs.<span class="property">attributesDictionary</span>)
    }
}

<span class="keyword">enum</span> StringAttribute {
    <span class="keyword">case</span> font(<span class="type">UIFont</span>)
    <span class="keyword">case</span> foregroundColor(<span class="type">UIColor</span>)
    <span class="keyword">case</span> underlineColor(<span class="type">UIColor</span>?) <span class="comment">// The default value is nil</span>
    <span class="keyword">case</span> kern(<span class="type">CGFloat</span>)
    <span class="comment">// ...</span>
    
    <span class="keyword">var</span> keyAndValue: (<span class="type">NSAttributedString</span>.<span class="type">Key</span>, <span class="type">Any</span>?) {
        <span class="keyword">switch self</span> {
        <span class="keyword">case</span> .<span class="dotAccess">font</span>(<span class="keyword">let</span> value):
            <span class="keyword">return</span> (.<span class="dotAccess">font</span>, value)
        <span class="keyword">case</span> .<span class="dotAccess">foregroundColor</span>(<span class="keyword">let</span> value):
            <span class="keyword">return</span> (.<span class="dotAccess">foregroundColor</span>, value)
        <span class="keyword">case</span> .<span class="dotAccess">underlineColor</span>(<span class="keyword">let</span> optionalValue):
            <span class="keyword">return</span> (.<span class="dotAccess">underlineColor</span>, optionalValue)
        <span class="keyword">case</span> .<span class="dotAccess">kern</span>(<span class="keyword">let</span> value):
            <span class="keyword">return</span> (.<span class="dotAccess">kern</span>, value <span class="keyword">as</span> <span class="type">NSNumber</span>)
        }
        <span class="comment">// ...</span>
    }
}

<span class="keyword">extension</span> <span class="type">Array</span> <span class="keyword">where</span> <span class="type">Element</span> == <span class="type">StringAttribute</span> {
    <span class="comment">// StringAttribute =&gt; [NSAttributedString.Key: Any]</span>
    <span class="keyword">var</span> attributesDictionary: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>: <span class="type">Any</span>] {
        <span class="keyword">var</span> attributesDict: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>: <span class="type">Any</span>] = [:]
        
        <span class="keyword">self</span>.<span class="call">forEach</span> { attribute <span class="keyword">in
            let</span> (key, value) = attribute.<span class="property">keyAndValue</span>
            attributesDict[key] = value
        }
        
        <span class="keyword">return</span> attributesDict
    }
}
</code></pre><p>åˆ°è¿™é‡Œå°±å¤§åŠŸå‘Šæˆäº†ï¼æˆ‘ä»¬å¯ä»¥å°è¯•æŠŠä¸Šé¢çš„ä»£ç æ”¹å†™ä¸€ä¸‹ï¼š</p><pre><code><span class="keyword">let</span> attributes: [<span class="type">StringAttribute</span>] = [
    .<span class="call">font</span>(.<span class="call">systemFont</span>(ofSize: <span class="number">12.0</span>, weight: .<span class="dotAccess">regular</span>)),
    .<span class="call">foregroundColor</span>(.<span class="dotAccess">gray</span>),
    .<span class="call">paragraphStyle</span>(paragraphStyle)
]
</code></pre><p>å¦‚æœå®Œæ•´å®ç°äº† <code>StringAttribute</code> çš„è¯ï¼Œä¸€å®šä¼šç•™æ„åˆ° <code>NSAttributedString</code> ä¸­æœ‰ä¸€ä¸ªç›¸å¯¹ç‰¹æ®Šçš„å±æ€§ï¼š<code>.paragraphStyle</code>ã€‚ä½¿ç”¨å®ƒä¹‹å‰éœ€è¦å…ˆå®Œæˆä¸€ç³»åˆ—çš„åˆå§‹åŒ–èµ‹å€¼ï¼Œæ­£æ˜¯ä¸Šé¢ä»£ç å—ä¸­å‡ºç°çš„ <code>paragraphStyle</code>ã€‚ä½œä¸ºä¸€ä¸ªä»£ç é£æ ¼ä¼˜åŒ–çš„å¯é€‰é¡¹ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ç”¨ä¸ <code>StringAttribute</code> ç›¸ä¼¼çš„æ‰‹æ®µæ¥å°è£… <code>NSMutableParagraphStyle</code>ã€‚</p><pre><code><span class="keyword">enum</span> ParagraphAttribute {
    <span class="keyword">case</span> alignment(<span class="type">NSTextAlignment</span>)
    <span class="keyword">case</span> lineSpacing(<span class="type">CGFloat</span>)
    <span class="keyword">case</span> lineBreakMode(<span class="type">NSLineBreakMode</span>)
}

<span class="keyword">enum</span> StringAttribute {
    <span class="keyword">case</span> paragraphStyle([<span class="type">ParagraphAttribute</span>])
    
    <span class="keyword">var</span> keyAndValue: (<span class="type">NSAttributedString</span>.<span class="type">Key</span>, <span class="type">Any</span>?) {
        <span class="keyword">switch self</span> {
        <span class="keyword">case</span> .<span class="dotAccess">paragraphStyle</span>(<span class="keyword">let</span> value):
            <span class="keyword">return</span> (.<span class="dotAccess">paragraphStyle</span>, <span class="keyword">self</span>.<span class="call">configureParagraphStyle</span>(value))
        }
    }
    
    <span class="comment">// [ParagraphAttribute] =&gt; NSMutableParagraphStyle</span>
    <span class="keyword">private func</span> configureParagraphStyle(<span class="keyword">_</span> attributes: [<span class="type">ParagraphAttribute</span>]) -&gt; <span class="type">NSMutableParagraphStyle</span> {
        
        <span class="keyword">let</span> paragraphStyle = <span class="type">NSMutableParagraphStyle</span>()

        attributes.<span class="call">forEach</span> {
            <span class="keyword">switch</span> $0 {
            <span class="keyword">case</span> .<span class="dotAccess">alignment</span>(<span class="keyword">let</span> value):
                paragraphStyle.<span class="property">alignment</span> = value
            <span class="keyword">case</span> .<span class="dotAccess">lineSpacing</span>(<span class="keyword">let</span> value):
                paragraphStyle.<span class="property">lineSpacing</span> = value
            <span class="keyword">case</span> .<span class="dotAccess">lineBreakMode</span>(<span class="keyword">let</span> value):
                paragraphStyle.<span class="property">lineBreakMode</span> = value
            }
        }
        
        <span class="keyword">return</span> paragraphStyle
    }
}
</code></pre><p>äºæ˜¯ï¼Œæœ€åˆçš„ä»£ç å°±å¯ä»¥ç”¨ä¸€ç§æ›´ <code>Swifty</code> çš„æ–¹å¼æ¥é‡å†™äº†ã€‚ ä»£ç é£æ ¼å„æœ‰æ‰€çˆ±ï¼Œå°±æˆ‘ä¸ªäººæ¥è¯´ï¼Œå®‰å…¨ä¸ä¼˜é›…çš„ä»£ç ç€å®ä»¤äººæ„ŸåŠ¨ï¼šP</p><pre><code>xxxxxx.<span class="property">attributedText</span> = <span class="type">NSAttributedString</span>(
    string: <span class="string">"å®è¨€æ˜¥å¤© ç ´ç¢ç§‹åƒ"</span>,
    stringAttributes: [
        .<span class="call">font</span>(.<span class="call">systemFont</span>(ofSize: <span class="number">12.0</span>, weight: .<span class="dotAccess">regular</span>)),
        .<span class="call">foregroundColor</span>(.<span class="dotAccess">gray</span>),
	      .<span class="call">paragraphStyle</span>([
	          .<span class="call">lineSpacing</span>(<span class="number">1.0</span>),
	          .<span class="call">lineBreakMode</span>(.<span class="dotAccess">byTruncatingTail</span>),
	          .<span class="call">alignment</span>(.<span class="dotAccess">center</span>)
	      ])

])
</code></pre><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰äº†ä¸€ä¸ªç±»å‹å®‰å…¨çš„ <code>NSAttributedString</code> åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸è¿‡æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼Œä¼´éšç€ <code>SwiftUI</code> çš„è¯ç”Ÿï¼ŒSwift 5.1 ä¸­æ–°å¢åŠ äº† <code>Function Builder</code>ï¼Œç”¨å®ƒæ¥è¾¾æˆæˆ‘ä»¬æœ€åˆçš„ç›®æ ‡ä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½æ–¹æ³•ã€‚è¯»ä¸€è¯»è¿™ç¯‡ <a href="https://medium.com/@carson.katri/create-your-first-function-builder-in-5-minutes-b4a717390671">Create Your First Function Builder in 10 Minutes</a> åº”è¯¥ä¼šæœ‰ä¸å°‘å¯å‘ã€‚</p><h2>TBC</h2><p>(ä¸‹ä¸€ç¯‡è®¡åˆ’è®²ä¸€è®²åœ¨å…¶å®ƒä¸€äº›åœºæ™¯ä¸­ï¼Œå¦‚ä½•æ›´ä¼˜é›…åœ°ä½¿ç”¨ <code>NSAttributedString</code>)</p><blockquote><p>Source Code: https://github.com/Ckitakishi/PlayWithAttributedString</p></blockquote></div><span>Tagged with: </span><ul class="tag-list"><li><a href="/tags/æ±‚ç´¢é›†">æ±‚ç´¢é›†</a></li><li><a href="/tags/ios">iOS</a></li><li><a href="/tags/swift">Swift</a></li></ul></article></div><footer><p>Copyright Â© 2014-2022 Ckitakishi ğŸ¥‘ Powered by <a href="https://github.com/johnsundell/publish">Publish</a></p></footer></body></html>